{"version":3,"sources":["../../../node_modules/tslib/tslib.es6.js","ng://angular-calendar/utilities/mc-calendar-utils.ts","ng://angular-calendar/modules/common/calendar-a11y.provider.ts","ng://angular-calendar/modules/common/calendar-a11y.pipe.ts","ng://angular-calendar/date-adapters/date-adapter.ts","ng://angular-calendar/modules/common/util.ts","ng://angular-calendar/modules/common/calendar-view.enum.ts","ng://angular-calendar/modules/common/calendar-angular-date-formatter.provider.ts","ng://angular-calendar/modules/common/calendar-date-formatter.provider.ts","ng://angular-calendar/modules/common/calendar-date.pipe.ts","ng://angular-calendar/modules/common/calendar-event-actions.component.ts","ng://angular-calendar/modules/common/calendar-event-title-formatter.provider.ts","ng://angular-calendar/modules/common/calendar-event-title.component.ts","ng://angular-calendar/modules/common/calendar-event-title.pipe.ts","ng://angular-calendar/modules/common/calendar-event-times-changed-event.interface.ts","ng://angular-calendar/modules/common/calendar-next-view.directive.ts","ng://angular-calendar/modules/common/calendar-previous-view.directive.ts","ng://angular-calendar/modules/common/calendar-today.directive.ts","ng://angular-calendar/modules/common/calendar-tooltip.directive.ts","ng://angular-calendar/modules/common/calendar-utils.provider.ts","ng://angular-calendar/modules/common/click.directive.ts","ng://angular-calendar/modules/common/keydown-enter.directive.ts","ng://angular-calendar/modules/common/calendar-moment-date-formatter.provider.ts","ng://angular-calendar/modules/common/calendar-native-date-formatter.provider.ts","ng://angular-calendar/modules/common/calendar-common.module.ts","ng://angular-calendar/modules/day/calendar-day-view.component.ts","ng://angular-calendar/modules/week/calendar-week-view-current-time-marker.component.ts","ng://angular-calendar/modules/week/calendar-week-view-event.component.ts","ng://angular-calendar/modules/week/calendar-week-view-header.component.ts","ng://angular-calendar/modules/week/calendar-week-view-hour-segment.component.ts","ng://angular-calendar/modules/common/calendar-drag-helper.provider.ts","ng://angular-calendar/modules/common/calendar-resize-helper.provider.ts","ng://angular-calendar/modules/week/calendar-week-view.component.ts","ng://angular-calendar/modules/week/quicklinks/quicklinks.component.ts","ng://angular-calendar/modules/week/calendar-week.module.ts","ng://angular-calendar/modules/day/calendar-day.module.ts","ng://angular-calendar/modules/month/calendar-month-cell.component.ts","ng://angular-calendar/modules/month/calendar-month-view-header.component.ts","ng://angular-calendar/modules/month/calendar-month-view.component.ts","ng://angular-calendar/modules/month/calendar-open-day-events.component.ts","ng://angular-calendar/modules/month/calendar-month.module.ts","ng://angular-calendar/modules/calendar.module.ts"],"names":["extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__assign","assign","t","s","i","n","arguments","length","prototype","call","apply","this","__decorate","decorators","target","key","desc","c","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__read","o","m","Symbol","iterator","e","ar","next","done","push","value","error","__spread","concat","DAYS_OF_WEEK","CalendarA11y","i18nPlural","monthCell","_a","day","locale","badgeTotal","formatDate","date","transform","=0","=1","other","openDayEventsLandmark","openDayEventsAlert","eventDescription","event","allDay","allDayEventDescription","aria","start","title","end","actionButtonLabel","action","a11yLabel","monthCellTabIndex","hideMonthCellEvents","hideEventTitle","hideWeekHourSegment","hideDayHourSegment","I18nPluralPipe","Injectable","CalendarA11yPipe","calendarA11y","a11yParams","method","allowedMethods","getOwnPropertyNames","getPrototypeOf","filter","iMethod","Error","join","Inject","args","LOCALE_ID","Pipe","name","String","EventValidationErrorMessage","DEFAULT_WEEKEND_DAYS","SUNDAY","SATURDAY","getExcludedSeconds","dateAdapter","startDate","seconds","excluded","precision","addSeconds","getDay","addDays","endDate","dayStart","dayEnd","result","current","some","excludedDay","differenceInSeconds","endOfDay","startOfDay","calculateExcludedSeconds","getEventsInPeriod","events","periodStart","periodEnd","isSameSecond","eventStart","eventEnd","isEventIsPeriod","getWeekDay","_b","weekendDays","isSameDay","today","Date","isPast","isToday","isFuture","isWeekend","indexOf","getWeekViewHeader","viewDate","weekStartsOn","_c","viewStart","startOfWeek","_d","viewEnd","days","getAllDayWeekEvents","_e","absolutePositionedEvents","differenceInDays","maxRange","date1","date2","diff","getDifferenceInDaysWithExclusions","totalDaysInView","eventsMapped","map","offset","startOfWeekDate","Math","abs","getWeekViewEventOffset","span","max","begin","offsetSeconds","secondsInView","getWeekViewEventSpan","entry","startsBeforeWeek","endsAfterWeek","sort","itemA","itemB","startSecondsDiff","allDayEventRows","allocatedEvents","forEach","index","rowSpan_1","weekEvents","slice","nextEvent","nextEventOffset","id","weekEvent","row","getWeekViewHourGrid","hourSegments","hourDuration","segmentHeight","minimumEventHeight","dayViewHourGrid","setMinutes","setHours","startOfMinute","addMinutes","addHours","hours","startOfView","sanitiseHours","hour","sanitiseMinutes","minute","endOfView","segmentDuration","startOfViewDay","endOfViewDay","dateAdjustment","getTimezoneOffset","dayDuration","segments","j","displayDate","isStart","getDayViewHourGrid","weekDays","getHours","getMinutes","dayView","eventWidth","differenceInMinutes","setSeconds","previousDayEvents","eventsInPeriod","dayViewEvents","eventA","eventB","valueOf","startsBeforeDay","endsAfterDay","hourHeightModifier","top","eventOffset","height","overlappingPreviousEvents","getOverLappingWeekViewEvents","left","previousEvent","dayEvent","width","allDayEvents","period","getDayView","segment","mappedEvents","getColumnCount","allEvents","prevOverlappingEvents","columnCount","iEvent","nextOverlappingEvents","overLappingEvents","otherEvent","min","bottom","previousEventTop","previousEventBottom","minutes","validateEvents","log","isValid","isError","msg","isArray","StartPropertyNotDate","StartPropertyMissing","EndPropertyNotDate","EndsBeforeStart","NotArray","validateEventsWithoutLog","_i","console","warn","isInside","outer","inner","floor","ceil","right","roundToNearest","amount","round","trackByEventId","trackByWeekDayHeaderDate","toISOString","trackByHourSegment","trackByHour","trackByWeekAllDayEvent","trackByWeekTimeEvent","getPixelAmountInMinutes","hourSegmentHeight","getMinutesMoved","movedY","eventSnapSize","getDefaultEventEnd","minimumMinutes","addDaysWithExclusions","daysCounter","daysToAdd","changeDays","subDays","getWeekViewPeriod","daysInWeek","endOfWeek","isWithinThreshold","x","y","CalendarView","CalendarAngularDateFormatter","monthViewColumnHeader","monthViewDayNumber","monthViewTitle","weekViewColumnHeader","weekViewColumnSubHeader","weekViewTitle","excludeDays","format","dateToFormat","showYear","getUTCFullYear","weekViewHour","dayViewHour","dayViewTitle","eventStartDateTitle","eventStartTimeTitle","eventEndTimeTitle","DateAdapter","CalendarDateFormatter","__","constructor","create","__extends","_super","CalendarDatePipe","dateFormatter","CalendarEventActionsComponent","trackByActionId","Input","TemplateRef","Component","selector","template","CalendarEventTitleFormatter","month","monthTooltip","week","weekTooltip","dayTooltip","CalendarEventTitleComponent","quicklinkClick","EventEmitter","isLive","ngOnChanges","_this","setInterval","videoURL","navigateToLiveStream","emit","Output","CalendarEventTitlePipe","calendarEventTitle","titleType","CalendarEventTimesChangedEventType","CalendarNextViewDirective","stepDays","viewDateChange","onClick","addFn","addWeeks","addMonths","view","Day","Week","HostListener","Directive","CalendarPreviousViewDirective","subFn","subWeeks","subMonths","CalendarTodayDirective","CalendarTooltipWindowComponent","CalendarTooltipDirective","elementRef","injector","renderer","componentFactoryResolver","viewContainerRef","document","placement","delay","cancelTooltipDelay$","Subject","tooltipFactory","resolveComponentFactory","changes","tooltipRef","contents","customTemplate","instance","changeDetectorRef","markForCheck","hide","ngOnDestroy","onMouseOver","of","timer","pipe","takeUntil","subscribe","show","onMouseOut","createComponent","appendToBody","body","appendChild","location","nativeElement","requestAnimationFrame","positionTooltip","remove","hostView","previousPositions","detectChanges","positionElements","children","ElementRef","Injector","Renderer2","ComponentFactoryResolver","ViewContainerRef","DOCUMENT","CalendarUtils","getMonthView","startOfMonth","endOfMonth","previousDate","isSameMonth","getMonth","eventsInMonth","initialViewDays","getTime","HOURS_IN_DAY","inMonth","totalDaysVisibleInWeek","rows","rowOffsets","getWeekView","_f","_g","header","hourColumns","ClickDirective","elm","clickListenerDisabled","click","destroy$","ngOnInit","listen","stopPropagation","Observable","observer","KeydownEnterDirective","keydown","onKeyPress","keyCode","which","preventDefault","MOMENT","InjectionToken","CalendarMomentDateFormatter","moment","CalendarNativeDateFormatter","Intl","DateTimeFormat","weekday","year","undefined","CalendarCommonModule","forRoot","config","ngModule","CalendarCommonModule_1","providers","eventTitleFormatter","utils","a11y","NgModule","declarations","imports","CommonModule","exports","entryComponents","CalendarDayViewComponent","dayStartHour","dayStartMinute","dayEndHour","dayEndMinute","tooltipPlacement","tooltipDisabled","tooltipAppendToBody","tooltipDelay","snapDraggedEvents","eventClicked","hourSegmentClicked","eventTimesChanged","beforeViewRender","CalendarWeekViewCurrentTimeMarkerComponent","zone","columnDate$","BehaviorSubject","columnDate","marker$","onStable","switchMap","interval","startWith","switchMapTo","now","isVisible","currentValue","NgZone","CalendarWeekViewEventComponent","duration","sourceEvent","isQuicklink","CalendarWeekViewHeaderComponent","dayHeaderClicked","eventDropped","dragEnter","CalendarWeekViewHourSegmentComponent","CalendarDragHelper","dragContainerElement","draggableElement","startPosition","getBoundingClientRect","validateDrag","dragAlreadyMoved","newRect","CalendarResizeHelper","resizeContainerElement","minWidth","validateResize","rectangle","CalendarWeekViewComponent","cdr","allDayEventResizes","Map","timeEventResizes","eventDragEnterByType","time","dragActive","calendarId","trackByHourColumn","column","trackById","refresh","refreshSubscription","refreshAll","refreshHeader","refreshBody","emitBeforeViewRender","unsubscribe","timeEventResizeStarted","eventsContainer","timeEvent","resizeEvent","set","resizeStarted","timeEventResizing","adjustedEvents","tempEvents","lastResizeEvent","newEventDates","getTimeEventResizedDates","adjustedEvent","eventIndex","restoreOriginalEvents","timeEventResizeEnded","get","delete","newStart","newEnd","type","Resize","allDayEventResizeStarted","allDayEventsContainer","allDayEvent","originalOffset","originalSpan","edge","edges","getDayColumnWidth","allDayEventResizing","dayWidth","currentResize","allDayEventResizeEnded","allDayEventResizingBeforeStart","daysDiff","eventRowContainer","offsetWidth","dateDragEnter","lastDragEnterDate","dropEvent","dropData","shouldFireDroppedEvent","lastDraggedEvent","Drop","dragLeave","dragStarted","dayColumnWidth","dragHelper","size","linkedEvent","find","columnEvent","dragMove","dragEvent","newEventTimes","getDragMovedEventTimes","originalEvent","allDayEventDragMove","dragEnded","dragEndEvent","useY","isDraggedWithinPeriod","Drag","daysDragged","minutesMoved","previousView","adjustedEventsArray","has","columnIndex","hourIndex","segmentIndex","cssClass","existingColumnEvent","event_1","tempEvent","clear","calendarEvent","eventWithoutEnd","getOwnPropertySymbols","propertyIsEnumerable","__rest","smallestResizes","resizeHelper","ChangeDetectorRef","QuicklinksComponent","navigateToLink","link","CalendarWeekModule","ResizableModule","DragAndDropModule","CalendarDayModule","CalendarMonthCellComponent","highlightDay","unhighlightDay","host","class","[class.cal-past]","[class.cal-today]","[class.cal-future]","[class.cal-weekend]","[class.cal-in-month]","[class.cal-out-month]","[class.cal-has-events]","[class.cal-open]","[class.cal-event-highlight]","CalendarMonthViewHeaderComponent","columnHeaderClicked","CalendarMonthViewComponent","activeDayIsOpen","dayClicked","trackByRowOffset","trackByDate","activeDay","checkActiveDayIsOpen","toggleDayHighlight","isHighlighted","backgroundColor","color","secondary","droppedOn","draggedFrom","getYear","getDate","setDate","setMonth","setYear","secondsDiff","columnHeaders","activeDay_1","openDay","openRowIndex","collapseAnimation","trigger","state","style","overflow","padding-top","padding-bottom","transition","animate","CalendarOpenDayEventsComponent","isOpen","animations","CalendarMonthModule","CalendarModule","CalendarModule_1"],"mappings":"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","sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { DateAdapter } from \"../date-adapters/date-adapter\";\n\nexport enum DAYS_OF_WEEK {\n    SUNDAY = 0,\n    MONDAY = 1,\n    TUESDAY = 2,\n    WEDNESDAY = 3,\n    THURSDAY = 4,\n    FRIDAY = 5,\n    SATURDAY = 6,\n}\n\nconst DEFAULT_WEEKEND_DAYS: number[] = [\n    DAYS_OF_WEEK.SUNDAY,\n    DAYS_OF_WEEK.SATURDAY,\n];\nconst DAYS_IN_WEEK: number = 7;\nconst HOURS_IN_DAY: number = 24;\nconst MINUTES_IN_HOUR: number = 60;\nexport const SECONDS_IN_DAY: number = 60 * 60 * 24;\n\nexport interface MCWeekDay {\n    date: Date;\n    day: number;\n    isPast: boolean;\n    isToday: boolean;\n    isFuture: boolean;\n    isWeekend: boolean;\n    cssClass?: string;\n}\n\nexport interface EventColor {\n    primary: string;\n    secondary: string;\n}\n\nexport interface MCEventAction {\n    id?: string | number;\n    label: string;\n    cssClass?: string;\n    a11yLabel?: string;\n    onClick({\n        event,\n        sourceEvent,\n    }: {\n        event: MCEvent;\n        sourceEvent: MouseEvent | KeyboardEvent;\n    }): any;\n}\n\nexport interface MCEvent<MetaType = any> {\n    id?: string | number;\n    start: Date;\n    end?: Date;\n    title?: string;\n    color?: EventColor;\n    actions?: MCEventAction[];\n    allDay?: boolean;\n    cssClass?: string;\n    resizable?: {\n        beforeStart?: boolean;\n        afterEnd?: boolean;\n    };\n    draggable?: boolean;\n    meta?: MetaType;\n    online: boolean;\n    onSite: boolean;\n    room?: MCRoom;\n    videoURL?: string;\n    presenceRecorded?: boolean;\n    lesson: MCLesson;\n    topic?: string;\n    newsid?: number;\n}\n\nexport interface MCLesson {\n    id: number;\n    name: string;\n    shortName: string;\n    module: MCModule;\n    subject: MCSubject;\n    performanceRecord: MCPerformanceRecord;\n    lessonType: MCLessonType;\n    iliasURL: string;\n    hasLearningMaterial: boolean;\n    swapLessonAllowed?: boolean;\n    changeLessonAllowed?: boolean;\n    swapEventAllowed: boolean;\n    changeEventAllowed: boolean;\n}\n\nexport interface MCModule {\n    id: number;\n    name: string;\n}\n\nexport interface MCRoom {\n    id: number;\n    name: string;\n    shortName: string;\n    roomLink: string;\n}\n\nexport interface MCSubject {\n    id: number;\n    name: string;\n}\n\nexport interface MCPerformanceRecord {\n    id: number;\n    name: string;\n}\n\nexport interface MCLessonType {\n    id: number;\n    name: string;\n    mandatory: boolean;\n    color: string;\n}\n\nexport interface MCWeekViewAllDayEvent {\n    event: MCEvent;\n    offset: number;\n    span: number;\n    startsBeforeWeek: boolean;\n    endsAfterWeek: boolean;\n}\n\nexport interface MCWeekViewAllDayEventRow {\n    id?: string;\n    row: MCWeekViewAllDayEvent[];\n}\n\nexport interface MCWeekView {\n    period: MCViewPeriod;\n    allDayEventRows: MCWeekViewAllDayEventRow[];\n    hourColumns: MCWeekViewHourColumn[];\n}\n\nexport interface MCMonthViewDay<MetaType = any> extends MCWeekDay {\n    inMonth: boolean;\n    events: MCEvent[];\n    backgroundColor?: string;\n    badgeTotal: number;\n    meta?: MetaType;\n}\n\nexport interface MCMonthView {\n    rowOffsets: number[];\n    days: MCMonthViewDay[];\n    totalDaysVisibleInWeek: number;\n    period: MCViewPeriod;\n}\n\nexport interface MCWeekViewTimeEvent {\n    event: MCEvent;\n    height: number;\n    width: number;\n    top: number;\n    left: number;\n    startsBeforeDay: boolean;\n    endsAfterDay: boolean;\n}\n\ninterface MCDayView {\n    events: MCWeekViewTimeEvent[];\n    width: number;\n    allDayEvents: MCEvent[];\n    period: MCViewPeriod;\n}\n\nexport interface MCWeekViewHourSegment {\n    isStart: boolean;\n    date: Date;\n    displayDate: Date;\n    cssClass?: string;\n}\n\nexport interface MCWeekViewHour {\n    segments: MCWeekViewHourSegment[];\n}\n\nexport interface MCWeekViewHourColumn {\n    date: Date;\n    hours: MCWeekViewHour[];\n    events: MCWeekViewTimeEvent[];\n}\n\nexport interface MCViewPeriod {\n    start: Date;\n    end: Date;\n    events: MCEvent[];\n}\n\nfunction getExcludedSeconds(\n    dateAdapter: DateAdapter,\n    {\n        startDate,\n        seconds,\n        excluded,\n        precision,\n    }: {\n        startDate: Date;\n        seconds: number;\n        excluded: number[];\n        precision: 'minutes' | 'days';\n    }\n): number {\n    if (excluded.length < 1) {\n        return 0;\n    }\n    const { addSeconds, getDay, addDays } = dateAdapter;\n    const endDate: Date = addSeconds(startDate, seconds - 1);\n    const dayStart: number = getDay(startDate);\n    const dayEnd: number = getDay(endDate);\n    let result: number = 0; // Calculated in seconds\n    let current: Date = startDate;\n\n    while (current < endDate) {\n        const day: number = getDay(current);\n\n        if (excluded.some((excludedDay) => excludedDay === day)) {\n            result += calculateExcludedSeconds(dateAdapter, {\n                dayStart,\n                dayEnd,\n                day,\n                precision,\n                startDate,\n                endDate,\n            });\n        }\n\n        current = addDays(current, 1);\n    }\n\n    return result;\n}\n\nfunction calculateExcludedSeconds(\n    dateAdapter: DateAdapter,\n    {\n        precision,\n        day,\n        dayStart,\n        dayEnd,\n        startDate,\n        endDate,\n    }: {\n        day: number;\n        startDate: Date;\n        endDate: Date;\n        dayStart: number;\n        dayEnd: number;\n        precision?: 'minutes' | 'days';\n    }\n): number {\n    const { differenceInSeconds, endOfDay, startOfDay } = dateAdapter;\n    if (precision === 'minutes') {\n        if (day === dayStart) {\n            return differenceInSeconds(endOfDay(startDate), startDate) + 1;\n        } else if (day === dayEnd) {\n            return differenceInSeconds(endDate, startOfDay(endDate)) + 1;\n        }\n    }\n\n    return SECONDS_IN_DAY;\n}\n\nfunction getWeekViewEventSpan(\n    dateAdapter: DateAdapter,\n    {\n        event,\n        offset,\n        startOfWeekDate,\n        excluded,\n        precision,\n        totalDaysInView,\n    }: {\n        event: MCEvent;\n        offset: number;\n        startOfWeekDate: Date;\n        excluded: number[];\n        precision: 'minutes' | 'days';\n        totalDaysInView: number;\n    }\n): number {\n    const {\n        max,\n        differenceInSeconds,\n        addDays,\n        endOfDay,\n        differenceInDays,\n    } = dateAdapter;\n    let span: number = SECONDS_IN_DAY;\n    const begin: Date = max([event.start, startOfWeekDate]);\n\n    if (event.end) {\n        switch (precision) {\n            case 'minutes':\n                span = differenceInSeconds(event.end, begin);\n                break;\n            default:\n                span =\n                    differenceInDays(addDays(endOfDay(event.end), 1), begin) *\n                    SECONDS_IN_DAY;\n                break;\n        }\n    }\n\n    const offsetSeconds: number = offset * SECONDS_IN_DAY;\n    const totalLength: number = offsetSeconds + span;\n\n    // the best way to detect if an event is outside the week-view\n    // is to check if the total span beginning (from startOfWeekDay or event start) exceeds the total days in the view\n    const secondsInView = totalDaysInView * SECONDS_IN_DAY;\n    if (totalLength > secondsInView) {\n        span = secondsInView - offsetSeconds;\n    }\n\n    span -= getExcludedSeconds(dateAdapter, {\n        startDate: begin,\n        seconds: span,\n        excluded,\n        precision,\n    });\n\n    return span / SECONDS_IN_DAY;\n}\n\nfunction getWeekViewEventOffset(\n    dateAdapter: DateAdapter,\n    {\n        event,\n        startOfWeek: startOfWeekDate,\n        excluded,\n        precision,\n    }: {\n        event: MCEvent;\n        startOfWeek: Date;\n        excluded: number[];\n        precision: 'minutes' | 'days';\n    }\n): number {\n    const { differenceInDays, startOfDay, differenceInSeconds } = dateAdapter;\n    if (event.start < startOfWeekDate) {\n        return 0;\n    }\n\n    let offset: number = 0;\n\n    switch (precision) {\n        case 'days':\n            offset =\n                differenceInDays(startOfDay(event.start), startOfWeekDate) *\n                SECONDS_IN_DAY;\n            break;\n        case 'minutes':\n            offset = differenceInSeconds(event.start, startOfWeekDate);\n            break;\n    }\n\n    offset -= getExcludedSeconds(dateAdapter, {\n        startDate: startOfWeekDate,\n        seconds: offset,\n        excluded,\n        precision,\n    });\n\n    return Math.abs(offset / SECONDS_IN_DAY);\n}\n\ninterface IsEventInPeriodArgs {\n    event: MCEvent;\n    periodStart: Date;\n    periodEnd: Date;\n}\n\nfunction isEventIsPeriod(\n    dateAdapter: DateAdapter,\n    { event, periodStart, periodEnd }: IsEventInPeriodArgs\n): boolean {\n    const { isSameSecond } = dateAdapter;\n    const eventStart: Date = event.start;\n    const eventEnd: Date = event.end || event.start;\n\n    if (eventStart > periodStart && eventStart < periodEnd) {\n        return true;\n    }\n\n    if (eventEnd > periodStart && eventEnd < periodEnd) {\n        return true;\n    }\n\n    if (eventStart < periodStart && eventEnd > periodEnd) {\n        return true;\n    }\n\n    if (\n        isSameSecond(eventStart, periodStart) ||\n        isSameSecond(eventStart, periodEnd)\n    ) {\n        return true;\n    }\n\n    if (\n        isSameSecond(eventEnd, periodStart) ||\n        isSameSecond(eventEnd, periodEnd)\n    ) {\n        return true;\n    }\n\n    return false;\n}\n\nexport interface MCGetEventsInPeriodArgs {\n    events: MCEvent[];\n    periodStart: Date;\n    periodEnd: Date;\n}\n\nexport function getEventsInPeriod(\n    dateAdapter: DateAdapter,\n    { events, periodStart, periodEnd }: MCGetEventsInPeriodArgs\n): MCEvent[] {\n    return events.filter((event: MCEvent) =>\n        isEventIsPeriod(dateAdapter, { event, periodStart, periodEnd })\n    );\n}\n\nfunction getWeekDay(\n    dateAdapter: DateAdapter,\n    {\n        date,\n        weekendDays = DEFAULT_WEEKEND_DAYS,\n    }: {\n        date: Date;\n        weekendDays: number[];\n        precision?: 'days' | 'minutes';\n    }\n): MCWeekDay {\n    const { startOfDay, isSameDay, getDay } = dateAdapter;\n    const today = startOfDay(new Date());\n    const day = getDay(date);\n    return {\n        date,\n        day,\n        isPast: date < today,\n        isToday: isSameDay(date, today),\n        isFuture: date > today,\n        isWeekend: weekendDays.indexOf(day) > -1,\n    };\n}\n\nexport interface MCGetWeekViewHeaderArgs {\n    viewDate: Date;\n    weekStartsOn: number;\n    excluded?: number[];\n    weekendDays?: number[];\n    viewStart?: Date;\n    viewEnd?: Date;\n}\n\nexport function getWeekViewHeader(\n    dateAdapter: DateAdapter,\n    {\n        viewDate,\n        weekStartsOn,\n        excluded = [],\n        weekendDays,\n        viewStart = dateAdapter.startOfWeek(viewDate, { weekStartsOn }),\n        viewEnd = dateAdapter.addDays(viewStart, DAYS_IN_WEEK),\n    }: MCGetWeekViewHeaderArgs\n): MCWeekDay[] {\n    const { addDays, getDay } = dateAdapter;\n    const days: MCWeekDay[] = [];\n    let date = viewStart;\n    while (date < viewEnd) {\n        if (!excluded.some((e) => getDay(date) === e)) {\n            days.push(getWeekDay(dateAdapter, { date, weekendDays }));\n        }\n        date = addDays(date, 1);\n    }\n    return days;\n}\n\nexport interface MCGetWeekViewArgs {\n    events?: MCEvent[];\n    viewDate: Date;\n    weekStartsOn: number;\n    excluded?: number[];\n    precision?: 'minutes' | 'days';\n    absolutePositionedEvents?: boolean;\n    hourSegments?: number;\n    hourDuration?: number;\n    dayStart: Time;\n    dayEnd: Time;\n    weekendDays?: number[];\n    segmentHeight: number;\n    viewStart?: Date;\n    viewEnd?: Date;\n    minimumEventHeight?: number;\n}\n\nexport function getDifferenceInDaysWithExclusions(\n    dateAdapter: DateAdapter,\n    { date1, date2, excluded }: { date1: Date; date2: Date; excluded: number[] }\n): number {\n    let date = date1;\n    let diff = 0;\n    while (date < date2) {\n        if (excluded.indexOf(dateAdapter.getDay(date)) === -1) {\n            diff++;\n        }\n        date = dateAdapter.addDays(date, 1);\n    }\n    return diff;\n}\n\ninterface MCGetAllDayEventArgs {\n    precision?: 'days' | 'minutes';\n    events?: MCEvent[];\n    absolutePositionedEvents?: boolean;\n    viewStart: Date;\n    viewEnd: Date;\n    excluded?: number[];\n}\n\nexport function getAllDayWeekEvents(\n    dateAdapter: DateAdapter,\n    {\n        events = [],\n        excluded = [],\n        precision = 'days' as const,\n        absolutePositionedEvents = false,\n        viewStart,\n        viewEnd,\n    }: MCGetAllDayEventArgs\n): MCWeekViewAllDayEventRow[] {\n    viewStart = dateAdapter.startOfDay(viewStart);\n    viewEnd = dateAdapter.endOfDay(viewEnd);\n    const { differenceInSeconds, differenceInDays } = dateAdapter;\n    const maxRange: number = getDifferenceInDaysWithExclusions(dateAdapter, {\n        date1: viewStart,\n        date2: viewEnd,\n        excluded,\n    });\n    const totalDaysInView = differenceInDays(viewEnd, viewStart) + 1;\n    const eventsMapped: MCWeekViewAllDayEvent[] = events\n        .filter((event) => event.allDay)\n        .map((event) => {\n            const offset: number = getWeekViewEventOffset(dateAdapter, {\n                event,\n                startOfWeek: viewStart,\n                excluded,\n                precision,\n            });\n            const span: number = getWeekViewEventSpan(dateAdapter, {\n                event,\n                offset,\n                startOfWeekDate: viewStart,\n                excluded,\n                precision,\n                totalDaysInView,\n            });\n            return { event, offset, span };\n        })\n        .filter((e) => e.offset < maxRange)\n        .filter((e) => e.span > 0)\n        .map((entry) => ({\n            event: entry.event,\n            offset: entry.offset,\n            span: entry.span,\n            startsBeforeWeek: entry.event.start < viewStart,\n            endsAfterWeek: (entry.event.end || entry.event.start) > viewEnd,\n        }))\n        .sort((itemA, itemB): number => {\n            const startSecondsDiff: number = differenceInSeconds(\n                itemA.event.start,\n                itemB.event.start\n            );\n            if (startSecondsDiff === 0) {\n                return differenceInSeconds(\n                    itemB.event.end || itemB.event.start,\n                    itemA.event.end || itemA.event.start\n                );\n            }\n            return startSecondsDiff;\n        });\n\n    const allDayEventRows: MCWeekViewAllDayEventRow[] = [];\n    const allocatedEvents: MCWeekViewAllDayEvent[] = [];\n\n    eventsMapped.forEach((event: MCWeekViewAllDayEvent, index: number) => {\n        if (allocatedEvents.indexOf(event) === -1) {\n            allocatedEvents.push(event);\n            let rowSpan: number = event.span + event.offset;\n            const otherRowEvents: MCWeekViewAllDayEvent[] = eventsMapped\n                .slice(index + 1)\n                .filter((nextEvent) => {\n                    if (\n                        nextEvent.offset >= rowSpan &&\n                        rowSpan + nextEvent.span <= totalDaysInView &&\n                        allocatedEvents.indexOf(nextEvent) === -1\n                    ) {\n                        const nextEventOffset: number = nextEvent.offset - rowSpan;\n                        if (!absolutePositionedEvents) {\n                            nextEvent.offset = nextEventOffset;\n                        }\n                        rowSpan += nextEvent.span + nextEventOffset;\n                        allocatedEvents.push(nextEvent);\n                        return true;\n                    }\n                });\n            const weekEvents = [event, ...otherRowEvents];\n            const id = weekEvents\n                .filter((weekEvent) => weekEvent.event.id)\n                .map((weekEvent) => weekEvent.event.id)\n                .join('-');\n            allDayEventRows.push({\n                row: weekEvents,\n                ...(id ? { id } : {}),\n            });\n        }\n    });\n    return allDayEventRows;\n}\n\ninterface MCGetWeekViewHourGridArgs extends MCGetDayViewHourGridArgs {\n    weekStartsOn: number;\n    excluded?: number[];\n    weekendDays?: number[];\n    events?: MCEvent[];\n    segmentHeight: number;\n    viewStart: Date;\n    viewEnd: Date;\n    minimumEventHeight: number;\n}\n\nfunction getWeekViewHourGrid(\n    dateAdapter: DateAdapter,\n    {\n        events,\n        viewDate,\n        hourSegments,\n        hourDuration,\n        dayStart,\n        dayEnd,\n        weekStartsOn,\n        excluded,\n        weekendDays,\n        segmentHeight,\n        viewStart,\n        viewEnd,\n        minimumEventHeight,\n    }: MCGetWeekViewHourGridArgs\n): MCWeekViewHourColumn[] {\n    const dayViewHourGrid = getDayViewHourGrid(dateAdapter, {\n        viewDate,\n        hourSegments,\n        hourDuration,\n        dayStart,\n        dayEnd,\n    });\n    const weekDays = getWeekViewHeader(dateAdapter, {\n        viewDate,\n        weekStartsOn,\n        excluded,\n        weekendDays,\n        viewStart,\n        viewEnd,\n    });\n    const { setHours, setMinutes, getHours, getMinutes } = dateAdapter;\n\n    return weekDays.map((day) => {\n        const dayView = getDayView(dateAdapter, {\n            events,\n            viewDate: day.date,\n            hourSegments,\n            dayStart,\n            dayEnd,\n            segmentHeight,\n            eventWidth: 1,\n            hourDuration,\n            minimumEventHeight,\n        });\n\n        const hours = dayViewHourGrid.map((hour) => {\n            const segments = hour.segments.map((segment) => {\n                const date = setMinutes(\n                    setHours(day.date, getHours(segment.date)),\n                    getMinutes(segment.date)\n                );\n                return { ...segment, date };\n            });\n            return { ...hour, segments };\n        });\n\n        function getColumnCount(\n            allEvents: MCWeekViewTimeEvent[],\n            prevOverlappingEvents: MCWeekViewTimeEvent[]\n        ): number {\n            const columnCount = Math.max(\n                ...prevOverlappingEvents.map((iEvent) => iEvent.left + 1)\n            );\n\n            const nextOverlappingEvents = allEvents\n                .filter((iEvent) => iEvent.left >= columnCount)\n                .filter((iEvent) => {\n                    return (\n                        getOverLappingWeekViewEvents(\n                            prevOverlappingEvents,\n                            iEvent.top,\n                            iEvent.top + iEvent.height\n                        ).length > 0\n                    );\n                });\n\n            if (nextOverlappingEvents.length > 0) {\n                return getColumnCount(allEvents, nextOverlappingEvents);\n            } else {\n                return columnCount;\n            }\n        }\n\n        const mappedEvents = dayView.events.map((event) => {\n            const columnCount = getColumnCount(\n                dayView.events,\n                getOverLappingWeekViewEvents(\n                    dayView.events,\n                    event.top,\n                    event.top + event.height\n                )\n            );\n\n            const width = 100 / columnCount;\n            return { ...event, left: event.left * width, width };\n        });\n\n        return {\n            hours,\n            date: day.date,\n            events: mappedEvents.map((event) => {\n                const overLappingEvents = getOverLappingWeekViewEvents(\n                    mappedEvents.filter((otherEvent) => otherEvent.left > event.left),\n                    event.top,\n                    event.top + event.height\n                );\n                if (overLappingEvents.length > 0) {\n                    return {\n                        ...event,\n                        width:\n                            Math.min(\n                                ...overLappingEvents.map((otherEvent) => otherEvent.left)\n                            ) - event.left,\n                    };\n                }\n                return event;\n            }),\n        };\n    });\n}\n\nexport function getWeekView(\n    dateAdapter: DateAdapter,\n    {\n        events = [],\n        viewDate,\n        weekStartsOn,\n        excluded = [],\n        precision = 'days',\n        absolutePositionedEvents = false,\n        hourSegments,\n        hourDuration,\n        dayStart,\n        dayEnd,\n        weekendDays,\n        segmentHeight,\n        minimumEventHeight,\n        viewStart = dateAdapter.startOfWeek(viewDate, { weekStartsOn }),\n        viewEnd = dateAdapter.endOfWeek(viewDate, { weekStartsOn }),\n    }: MCGetWeekViewArgs\n): MCWeekView {\n    if (!events) {\n        events = [];\n    }\n    const { startOfDay, endOfDay } = dateAdapter;\n    viewStart = startOfDay(viewStart);\n    viewEnd = endOfDay(viewEnd);\n    const eventsInPeriod = getEventsInPeriod(dateAdapter, {\n        events,\n        periodStart: viewStart,\n        periodEnd: viewEnd,\n    });\n\n    const header = getWeekViewHeader(dateAdapter, {\n        viewDate,\n        weekStartsOn,\n        excluded,\n        weekendDays,\n        viewStart,\n        viewEnd,\n    });\n\n    return {\n        allDayEventRows: getAllDayWeekEvents(dateAdapter, {\n            events: eventsInPeriod,\n            excluded,\n            precision,\n            absolutePositionedEvents,\n            viewStart,\n            viewEnd,\n        }),\n        period: {\n            events: eventsInPeriod,\n            start: header[0].date,\n            end: endOfDay(header[header.length - 1].date),\n        },\n        hourColumns: getWeekViewHourGrid(dateAdapter, {\n            events,\n            viewDate,\n            hourSegments,\n            hourDuration,\n            dayStart,\n            dayEnd,\n            weekStartsOn,\n            excluded,\n            weekendDays,\n            segmentHeight,\n            viewStart,\n            viewEnd,\n            minimumEventHeight,\n        }),\n    };\n}\n\nexport interface MCGetMonthViewArgs {\n    events?: MCEvent[];\n    viewDate: Date;\n    weekStartsOn: number;\n    excluded?: number[];\n    viewStart?: Date;\n    viewEnd?: Date;\n    weekendDays?: number[];\n}\n\nexport function getMonthView(\n    dateAdapter: DateAdapter,\n    {\n        events = [],\n        viewDate,\n        weekStartsOn,\n        excluded = [],\n        viewStart = dateAdapter.startOfMonth(viewDate),\n        viewEnd = dateAdapter.endOfMonth(viewDate),\n        weekendDays,\n    }: MCGetMonthViewArgs\n): MCMonthView {\n    if (!events) {\n        events = [];\n    }\n\n    const {\n        startOfWeek,\n        endOfWeek,\n        differenceInDays,\n        startOfDay,\n        addHours,\n        endOfDay,\n        isSameMonth,\n        getDay,\n        getMonth,\n    } = dateAdapter;\n    const start: Date = startOfWeek(viewStart, { weekStartsOn });\n    const end: Date = endOfWeek(viewEnd, { weekStartsOn });\n    const eventsInMonth: MCEvent[] = getEventsInPeriod(dateAdapter, {\n        events,\n        periodStart: start,\n        periodEnd: end,\n    });\n    const initialViewDays: MCMonthViewDay[] = [];\n    let previousDate: Date;\n    for (let i: number = 0; i < differenceInDays(end, start) + 1; i++) {\n        // hacky fix for https://github.com/mattlewis92/angular-calendar/issues/173\n        let date: Date;\n        if (previousDate) {\n            date = startOfDay(addHours(previousDate, HOURS_IN_DAY));\n            if (previousDate.getTime() === date.getTime()) {\n                // DST change, so need to add 25 hours\n                /* istanbul ignore next */\n                date = startOfDay(addHours(previousDate, HOURS_IN_DAY + 1));\n            }\n            previousDate = date;\n        } else {\n            date = previousDate = start;\n        }\n\n        if (!excluded.some((e) => getDay(date) === e)) {\n            const day: MCMonthViewDay = getWeekDay(dateAdapter, {\n                date,\n                weekendDays,\n            }) as MCMonthViewDay;\n            const eventsInPeriod: MCEvent[] = getEventsInPeriod(dateAdapter, {\n                events: eventsInMonth,\n                periodStart: startOfDay(date),\n                periodEnd: endOfDay(date),\n            });\n            day.inMonth = isSameMonth(date, viewDate);\n            day.events = eventsInPeriod;\n            day.badgeTotal = eventsInPeriod.length;\n            initialViewDays.push(day);\n        }\n    }\n\n    let days: MCMonthViewDay[] = [];\n    const totalDaysVisibleInWeek: number = DAYS_IN_WEEK - excluded.length;\n    if (totalDaysVisibleInWeek < DAYS_IN_WEEK) {\n        for (\n            let i: number = 0;\n            i < initialViewDays.length;\n            i += totalDaysVisibleInWeek\n        ) {\n            const row: MCMonthViewDay[] = initialViewDays.slice(\n                i,\n                i + totalDaysVisibleInWeek\n            );\n            const isRowInMonth: boolean = row.some(\n                (day) => viewStart <= day.date && day.date < viewEnd\n            );\n            if (isRowInMonth) {\n                days = [...days, ...row];\n            }\n        }\n    } else {\n        days = initialViewDays;\n    }\n\n    const rows: number = Math.floor(days.length / totalDaysVisibleInWeek);\n    const rowOffsets: number[] = [];\n    for (let i: number = 0; i < rows; i++) {\n        rowOffsets.push(i * totalDaysVisibleInWeek);\n    }\n\n    return {\n        rowOffsets,\n        totalDaysVisibleInWeek,\n        days,\n        period: {\n            start: days[0].date,\n            end: endOfDay(days[days.length - 1].date),\n            events: eventsInMonth,\n        },\n    };\n}\n\nexport interface MCGetDayViewArgs {\n    events?: MCEvent[];\n    viewDate: Date;\n    hourSegments: number;\n    dayStart: {\n        hour: number;\n        minute: number;\n    };\n    dayEnd: {\n        hour: number;\n        minute: number;\n    };\n    eventWidth: number;\n    segmentHeight: number;\n    hourDuration: number;\n    minimumEventHeight: number;\n}\n\nfunction getOverLappingWeekViewEvents(\n    events: MCWeekViewTimeEvent[],\n    top: number,\n    bottom: number\n): MCWeekViewTimeEvent[] {\n    return events.filter((previousEvent: MCWeekViewTimeEvent) => {\n        const previousEventTop: number = previousEvent.top;\n        const previousEventBottom: number =\n            previousEvent.top + previousEvent.height;\n\n        if (top < previousEventBottom && previousEventBottom < bottom) {\n            return true;\n        } else if (top < previousEventTop && previousEventTop < bottom) {\n            return true;\n        } else if (previousEventTop <= top && bottom <= previousEventBottom) {\n            return true;\n        }\n\n        return false;\n    });\n}\n\nfunction getDayView(\n    dateAdapter: DateAdapter,\n    {\n        events,\n        viewDate,\n        hourSegments,\n        dayStart,\n        dayEnd,\n        eventWidth,\n        segmentHeight,\n        hourDuration,\n        minimumEventHeight,\n    }: MCGetDayViewArgs\n): MCDayView {\n    const {\n        setMinutes,\n        setHours,\n        startOfDay,\n        startOfMinute,\n        endOfDay,\n        differenceInMinutes,\n    } = dateAdapter;\n\n    const startOfView: Date = setMinutes(\n        setHours(startOfDay(viewDate), sanitiseHours(dayStart.hour)),\n        sanitiseMinutes(dayStart.minute)\n    );\n    const endOfView: Date = setMinutes(\n        setHours(startOfMinute(endOfDay(viewDate)), sanitiseHours(dayEnd.hour)),\n        sanitiseMinutes(dayEnd.minute)\n    );\n    endOfView.setSeconds(59, 999);\n    const previousDayEvents: MCWeekViewTimeEvent[] = [];\n    const eventsInPeriod = getEventsInPeriod(dateAdapter, {\n        events: events.filter((event: MCEvent) => !event.allDay),\n        periodStart: startOfView,\n        periodEnd: endOfView,\n    });\n\n    const dayViewEvents: MCWeekViewTimeEvent[] = eventsInPeriod\n        .sort((eventA: MCEvent, eventB: MCEvent) => {\n            return eventA.start.valueOf() - eventB.start.valueOf();\n        })\n        .map((event: MCEvent) => {\n            const eventStart: Date = event.start;\n            const eventEnd: Date = event.end || eventStart;\n            const startsBeforeDay: boolean = eventStart < startOfView;\n            const endsAfterDay: boolean = eventEnd > endOfView;\n            const hourHeightModifier: number =\n                (hourSegments * segmentHeight) / (hourDuration || MINUTES_IN_HOUR);\n\n            let top: number = 0;\n            if (eventStart > startOfView) {\n                // adjust the difference in minutes if the user's offset is different between the start of the day and the event (e.g. when going to or from DST)\n                const eventOffset = eventStart.getTimezoneOffset();\n                const startOffset = startOfView.getTimezoneOffset();\n                const diff = startOffset - eventOffset;\n                top += differenceInMinutes(eventStart, startOfView) + diff;\n            }\n            top *= hourHeightModifier;\n\n            const startDate: Date = startsBeforeDay ? startOfView : eventStart;\n            const endDate: Date = endsAfterDay ? endOfView : eventEnd;\n            let height: number = differenceInMinutes(endDate, startDate);\n            if (!event.end) {\n                height = segmentHeight;\n            } else {\n                height *= hourHeightModifier;\n            }\n\n            if (minimumEventHeight && height < minimumEventHeight) {\n                height = minimumEventHeight;\n            }\n\n            const bottom: number = top + height;\n\n            const overlappingPreviousEvents = getOverLappingWeekViewEvents(\n                previousDayEvents,\n                top,\n                bottom\n            );\n\n            let left: number = 0;\n\n            while (\n                overlappingPreviousEvents.some(\n                    (previousEvent) => previousEvent.left === left\n                )\n            ) {\n                left += eventWidth;\n            }\n\n            const dayEvent: MCWeekViewTimeEvent = {\n                event,\n                height,\n                width: eventWidth,\n                top,\n                left,\n                startsBeforeDay,\n                endsAfterDay,\n            };\n\n            previousDayEvents.push(dayEvent);\n\n            return dayEvent;\n        });\n\n    const width: number = Math.max(\n        ...dayViewEvents.map((event: MCWeekViewTimeEvent) => event.left + event.width)\n    );\n    const allDayEvents: MCEvent[] = getEventsInPeriod(dateAdapter, {\n        events: events.filter((event: MCEvent) => event.allDay),\n        periodStart: startOfDay(startOfView),\n        periodEnd: endOfDay(endOfView),\n    });\n\n    return {\n        events: dayViewEvents,\n        width,\n        allDayEvents,\n        period: {\n            events: eventsInPeriod,\n            start: startOfView,\n            end: endOfView,\n        },\n    };\n}\n\ninterface Time {\n    hour: number;\n    minute: number;\n}\n\ninterface MCGetDayViewHourGridArgs {\n    viewDate: Date;\n    hourSegments: number;\n    hourDuration: number;\n    dayStart: Time;\n    dayEnd: Time;\n}\n\nfunction sanitiseHours(hours: number): number {\n    return Math.max(Math.min(23, hours), 0);\n}\n\nfunction sanitiseMinutes(minutes: number): number {\n    return Math.max(Math.min(59, minutes), 0);\n}\n\nfunction getDayViewHourGrid(\n    dateAdapter: DateAdapter,\n    {\n        viewDate,\n        hourSegments,\n        hourDuration,\n        dayStart,\n        dayEnd,\n    }: MCGetDayViewHourGridArgs\n): MCWeekViewHour[] {\n    const {\n        setMinutes,\n        setHours,\n        startOfDay,\n        startOfMinute,\n        endOfDay,\n        addMinutes,\n        addHours,\n        addDays,\n    } = dateAdapter;\n    const hours: MCWeekViewHour[] = [];\n\n    let startOfView: Date = setMinutes(\n        setHours(startOfDay(viewDate), sanitiseHours(dayStart.hour)),\n        sanitiseMinutes(dayStart.minute)\n    );\n    let endOfView: Date = setMinutes(\n        setHours(startOfMinute(endOfDay(viewDate)), sanitiseHours(dayEnd.hour)),\n        sanitiseMinutes(dayEnd.minute)\n    );\n    const segmentDuration: number =\n        (hourDuration || MINUTES_IN_HOUR) / hourSegments;\n    let startOfViewDay: Date = startOfDay(viewDate);\n    const endOfViewDay: Date = endOfDay(viewDate);\n    let dateAdjustment: (d: Date) => Date = (d: Date) => d;\n\n    // this means that we change from or to DST on this day and that's going to cause problems so we bump the date\n    if (startOfViewDay.getTimezoneOffset() !== endOfViewDay.getTimezoneOffset()) {\n        startOfViewDay = addDays(startOfViewDay, 1);\n        startOfView = addDays(startOfView, 1);\n        endOfView = addDays(endOfView, 1);\n        dateAdjustment = (d: Date) => addDays(d, -1);\n    }\n\n    const dayDuration: number = hourDuration\n        ? (HOURS_IN_DAY * 60) / hourDuration\n        : MINUTES_IN_HOUR;\n\n    for (let i: number = 0; i < dayDuration; i++) {\n        const segments: MCWeekViewHourSegment[] = [];\n        for (let j: number = 0; j < hourSegments; j++) {\n            const date: Date = addMinutes(\n                addMinutes(startOfView, i * (hourDuration || MINUTES_IN_HOUR)),\n                j * segmentDuration\n            );\n            if (date >= startOfView && date < endOfView) {\n                segments.push({\n                    date: dateAdjustment(date),\n                    displayDate: date,\n                    isStart: j === 0,\n                });\n            }\n        }\n        if (segments.length > 0) {\n            hours.push({ segments });\n        }\n    }\n\n    return hours;\n}\n\nexport enum EventValidationErrorMessage {\n    NotArray = 'Events must be an array',\n    StartPropertyMissing = 'Event is missing the `start` property',\n    StartPropertyNotDate = 'Event `start` property should be a javascript date object. Do `new Date(event.start)` to fix it.',\n    EndPropertyNotDate = 'Event `end` property should be a javascript date object. Do `new Date(event.end)` to fix it.',\n    EndsBeforeStart = 'Event `start` property occurs after the `end`',\n}\n\nexport function validateEvents(\n    events: MCEvent[],\n    log: (...args: any[]) => void\n): boolean {\n    let isValid: boolean = true;\n\n    function isError(msg: string, event: MCEvent): void {\n        log(msg, event);\n        isValid = false;\n    }\n\n    if (!Array.isArray(events)) {\n        log(EventValidationErrorMessage.NotArray, events);\n        return false;\n    }\n\n    events.forEach((event) => {\n        if (!event.start) {\n            isError(EventValidationErrorMessage.StartPropertyMissing, event);\n        } else if (!(event.start instanceof Date)) {\n            isError(EventValidationErrorMessage.StartPropertyNotDate, event);\n        }\n\n        if (event.end) {\n            if (!(event.end instanceof Date)) {\n                isError(EventValidationErrorMessage.EndPropertyNotDate, event);\n            }\n            if (event.start > event.end) {\n                isError(EventValidationErrorMessage.EndsBeforeStart, event);\n            }\n        }\n    });\n\n    return isValid;\n}","import { Injectable } from '@angular/core';\nimport { formatDate, I18nPluralPipe } from '@angular/common';\nimport { A11yParams } from './calendar-a11y.interface';\n\n/**\n * This class is responsible for adding accessibility to the calendar.\n * You may override any of its methods via angulars DI to suit your requirements.\n * For example:\n *\n * ```typescript\n * import { A11yParams, CalendarA11y } from 'angular-calendar';\n * import { formatDate, I18nPluralPipe } from '@angular/common';\n * import { Injectable } from '@angular/core';\n *\n * // adding your own a11y params\n * export interface CustomA11yParams extends A11yParams {\n *   isDrSuess?: boolean;\n * }\n *\n * @Injectable()\n * export class CustomCalendarA11y extends CalendarA11y {\n *   constructor(protected i18nPlural: I18nPluralPipe) {\n *     super(i18nPlural);\n *   }\n *\n *   // overriding a function\n *   public openDayEventsLandmark({ date, locale, isDrSuess }: CustomA11yParams): string {\n *     if (isDrSuess) {\n *       return `\n *         ${formatDate(date, 'EEEE MMMM d', locale)}\n *          Today you are you! That is truer than true! There is no one alive\n *          who is you-er than you!\n *       `;\n *     }\n *   }\n * }\n *\n * // in your component that uses the calendar\n * providers: [{\n *  provide: CalendarA11y,\n *  useClass: CustomCalendarA11y\n * }]\n * ```\n */\n@Injectable()\nexport class CalendarA11y {\n  constructor(protected i18nPlural: I18nPluralPipe) {}\n\n  /**\n   * Aria label for the badges/date of a cell\n   * @example: `Saturday October 19 1 event click to expand`\n   */\n  public monthCell({ day, locale }: A11yParams): string {\n    if (day.badgeTotal > 0) {\n      return `\n        ${formatDate(day.date, 'EEEE MMMM d', locale)},\n        ${this.i18nPlural.transform(day.badgeTotal, {\n          '=0': 'No events',\n          '=1': 'One event',\n          other: '# events',\n        })},\n         click to expand\n      `;\n    } else {\n      return `${formatDate(day.date, 'EEEE MMMM d', locale)}`;\n    }\n  }\n\n  /**\n   * Aria label for the open day events start landmark\n   * @example: `Saturday October 19 expanded view`\n   */\n  public openDayEventsLandmark({ date, locale }: A11yParams): string {\n    return `\n      Beginning of expanded view for ${formatDate(date, 'EEEE MMMM dd', locale)}\n    `;\n  }\n\n  /**\n   * Aria label for alert that a day in the month view was expanded\n   * @example: `Saturday October 19 expanded`\n   */\n  public openDayEventsAlert({ date, locale }: A11yParams): string {\n    return `${formatDate(date, 'EEEE MMMM dd', locale)} expanded`;\n  }\n\n  /**\n   * Descriptive aria label for an event\n   * @example: `Saturday October 19th, Scott's Pizza Party, from 11:00am to 5:00pm`\n   */\n  public eventDescription({ event, locale }: A11yParams): string {\n    if (event.allDay === true) {\n      return this.allDayEventDescription({ event, locale });\n    }\n\n    const aria = `\n      ${formatDate(event.start, 'EEEE MMMM dd', locale)},\n      ${event.title}, from ${formatDate(event.start, 'hh:mm a', locale)}\n    `;\n    if (event.end) {\n      return aria + ` to ${formatDate(event.end, 'hh:mm a', locale)}`;\n    }\n    return aria;\n  }\n\n  /**\n   * Descriptive aria label for an all day event\n   * @example:\n   * `Scott's Party, event spans multiple days: start time October 19 5:00pm, no stop time`\n   */\n  public allDayEventDescription({ event, locale }: A11yParams): string {\n    const aria = `\n      ${event.title}, event spans multiple days:\n      start time ${formatDate(event.start, 'MMMM dd hh:mm a', locale)}\n    `;\n    if (event.end) {\n      return (\n        aria + `, stop time ${formatDate(event.end, 'MMMM d hh:mm a', locale)}`\n      );\n    }\n    return aria + `, no stop time`;\n  }\n\n  /**\n   * Aria label for the calendar event actions icons\n   * @returns 'Edit' for fa-pencil icons, and 'Delete' for fa-times icons\n   */\n  public actionButtonLabel({ action }: A11yParams): string {\n    return action.a11yLabel;\n  }\n\n  /**\n   * @returns {number} Tab index to be given to month cells\n   */\n  public monthCellTabIndex(): number {\n    return 0;\n  }\n\n  /**\n   * @returns true if the events inside the month cell should be aria-hidden\n   */\n  public hideMonthCellEvents(): boolean {\n    return true;\n  }\n\n  /**\n   * @returns true if event titles should be aria-hidden (global)\n   */\n  public hideEventTitle(): boolean {\n    return true;\n  }\n\n  /**\n   * @returns true if hour segments in the week view should be aria-hidden\n   */\n  public hideWeekHourSegment(): boolean {\n    return true;\n  }\n\n  /**\n   * @returns true if hour segments in the day view should be aria-hidden\n   */\n  public hideDayHourSegment(): boolean {\n    return true;\n  }\n}\n","import { Pipe, PipeTransform, LOCALE_ID, Inject } from '@angular/core';\nimport { CalendarA11y } from './calendar-a11y.provider';\nimport { A11yParams } from './calendar-a11y.interface';\n\n/**\n * This pipe is primarily for rendering aria labels. Example usage:\n * ```typescript\n * // where `myEvent` is a `CalendarEvent` and myLocale is a locale identifier\n * {{ { event: myEvent, locale: myLocale } | calendarA11y: 'eventDescription' }}\n * ```\n */\n@Pipe({\n  name: 'calendarA11y',\n})\nexport class CalendarA11yPipe implements PipeTransform {\n  constructor(\n    private calendarA11y: CalendarA11y,\n    @Inject(LOCALE_ID) private locale: string\n  ) {}\n\n  transform(a11yParams: A11yParams, method: string): string {\n    a11yParams.locale = a11yParams.locale || this.locale;\n    if (typeof this.calendarA11y[method] === 'undefined') {\n      const allowedMethods = Object.getOwnPropertyNames(\n        Object.getPrototypeOf(CalendarA11y.prototype)\n      ).filter((iMethod) => iMethod !== 'constructor');\n      throw new Error(\n        `${method} is not a valid a11y method. Can only be one of ${allowedMethods.join(\n          ', '\n        )}`\n      );\n    }\n    return this.calendarA11y[method](a11yParams);\n  }\n}\n","import { DateAdapter as BaseDateAdapter } from 'calendar-utils/date-adapters/date-adapter';\n\nexport abstract class DateAdapter implements BaseDateAdapter {\n  abstract addWeeks(date: Date | number, amount: number): Date;\n\n  abstract addMonths(date: Date | number, amount: number): Date;\n\n  abstract subDays(date: Date | number, amount: number): Date;\n\n  abstract subWeeks(date: Date | number, amount: number): Date;\n\n  abstract subMonths(date: Date | number, amount: number): Date;\n\n  abstract getISOWeek(date: Date | number): number;\n\n  abstract setDate(date: Date | number, dayOfMonth: number): Date;\n\n  abstract setMonth(date: Date | number, month: number): Date;\n\n  abstract setYear(date: Date | number, year: number): Date;\n\n  abstract getDate(date: Date | number): number;\n\n  abstract getMonth(date: Date | number): number;\n\n  abstract getYear(date: Date | number): number;\n\n  abstract addDays(date: Date | number, amount: number): Date;\n\n  abstract addHours(date: Date | number, amount: number): Date;\n\n  abstract addMinutes(date: Date | number, amount: number): Date;\n\n  abstract addSeconds(date: Date | number, amount: number): Date;\n\n  abstract differenceInDays(\n    dateLeft: Date | number,\n    dateRight: Date | number\n  ): number;\n\n  abstract differenceInMinutes(\n    dateLeft: Date | number,\n    dateRight: Date | number\n  ): number;\n\n  abstract differenceInSeconds(\n    dateLeft: Date | number,\n    dateRight: Date | number\n  ): number;\n\n  abstract endOfDay(date: Date | number): Date;\n\n  abstract endOfMonth(date: Date | number): Date;\n\n  abstract endOfWeek(\n    date: Date | number,\n    options?: { weekStartsOn?: number }\n  ): Date;\n\n  abstract getDay(date: Date | number): number;\n\n  abstract isSameDay(\n    dateLeft: Date | number,\n    dateRight: Date | number\n  ): boolean;\n\n  abstract isSameMonth(\n    dateLeft: Date | number,\n    dateRight: Date | number\n  ): boolean;\n\n  abstract isSameSecond(\n    dateLeft: Date | number,\n    dateRight: Date | number\n  ): boolean;\n\n  abstract max(dates: (Date | number)[]): Date;\n\n  abstract setHours(date: Date | number, hours: number): Date;\n\n  abstract setMinutes(date: Date | number, minutes: number): Date;\n\n  abstract startOfDay(date: Date | number): Date;\n\n  abstract startOfMinute(date: Date | number): Date;\n\n  abstract startOfMonth(date: Date | number): Date;\n\n  abstract startOfWeek(\n    date: Date | number,\n    options?: { weekStartsOn?: number }\n  ): Date;\n\n  abstract getHours(date: Date | number): number;\n\n  abstract getMinutes(date: Date | number): number;\n}\n","import { MCEvent, MCViewPeriod, MCWeekDay, MCWeekViewAllDayEvent, MCWeekViewHour, MCWeekViewHourSegment, MCWeekViewTimeEvent, validateEvents as validateEventsWithoutLog } from '../../utilities/mc-calendar-utils';\nimport { DateAdapter } from '../../date-adapters/date-adapter';\n\nexport const validateEvents = (events: MCEvent[]) => {\n  const warn = (...args) => console.warn('angular-calendar', ...args);\n  return validateEventsWithoutLog(events, warn);\n};\n\nexport function isInside(outer: ClientRect, inner: ClientRect): boolean {\n  return (\n    Math.floor(outer.left) <= Math.ceil(inner.left) &&\n    Math.floor(inner.left) <= Math.ceil(outer.right) &&\n    Math.floor(outer.left) <= Math.ceil(inner.right) &&\n    Math.floor(inner.right) <= Math.ceil(outer.right) &&\n    Math.floor(outer.top) <= Math.ceil(inner.top) &&\n    Math.floor(inner.top) <= Math.ceil(outer.bottom) &&\n    Math.floor(outer.top) <= Math.ceil(inner.bottom) &&\n    Math.floor(inner.bottom) <= Math.ceil(outer.bottom)\n  );\n}\n\nexport function roundToNearest(amount: number, precision: number) {\n  return Math.round(amount / precision) * precision;\n}\n\nexport const trackByEventId = (index: number, event: MCEvent) =>\n  event.id ? event.id : event;\n\nexport const trackByWeekDayHeaderDate = (index: number, day: MCWeekDay) =>\n  day.date.toISOString();\n\nexport const trackByHourSegment = (\n  index: number,\n  segment: MCWeekViewHourSegment\n) => segment.date.toISOString();\n\nexport const trackByHour = (index: number, hour: MCWeekViewHour) =>\n  hour.segments[0].date.toISOString();\n\nexport const trackByWeekAllDayEvent = (\n  index: number,\n  weekEvent: MCWeekViewAllDayEvent\n) => (weekEvent.event.id ? weekEvent.event.id : weekEvent.event);\n\nexport const trackByWeekTimeEvent = (\n  index: number,\n  weekEvent: MCWeekViewTimeEvent\n) => (weekEvent.event.id ? weekEvent.event.id : weekEvent.event);\n\nconst MINUTES_IN_HOUR = 60;\n\nfunction getPixelAmountInMinutes(\n  hourSegments: number,\n  hourSegmentHeight: number\n) {\n  return MINUTES_IN_HOUR / (hourSegments * hourSegmentHeight);\n}\n\nexport function getMinutesMoved(\n  movedY: number,\n  hourSegments: number,\n  hourSegmentHeight: number,\n  eventSnapSize: number\n): number {\n  const draggedInPixelsSnapSize = roundToNearest(\n    movedY,\n    eventSnapSize || hourSegmentHeight\n  );\n  const pixelAmountInMinutes = getPixelAmountInMinutes(\n    hourSegments,\n    hourSegmentHeight\n  );\n  return draggedInPixelsSnapSize * pixelAmountInMinutes;\n}\n\nexport function getMinimumEventHeightInMinutes(\n  hourSegments: number,\n  hourSegmentHeight: number\n) {\n  return (\n    getPixelAmountInMinutes(hourSegments, hourSegmentHeight) * hourSegmentHeight\n  );\n}\n\nexport function getDefaultEventEnd(\n  dateAdapter: DateAdapter,\n  event: MCEvent,\n  minimumMinutes: number\n): Date {\n  if (event.end) {\n    return event.end;\n  } else {\n    return dateAdapter.addMinutes(event.start, minimumMinutes);\n  }\n}\n\nexport function addDaysWithExclusions(\n  dateAdapter: DateAdapter,\n  date: Date,\n  days: number,\n  excluded: number[]\n): Date {\n  let daysCounter = 0;\n  let daysToAdd = 0;\n  const changeDays = days < 0 ? dateAdapter.subDays : dateAdapter.addDays;\n  let result = date;\n  while (daysToAdd <= Math.abs(days)) {\n    result = changeDays(date, daysCounter);\n    const day = dateAdapter.getDay(result);\n    if (excluded.indexOf(day) === -1) {\n      daysToAdd++;\n    }\n    daysCounter++;\n  }\n  return result;\n}\n\nexport function isDraggedWithinPeriod(\n  newStart: Date,\n  newEnd: Date,\n  period: MCViewPeriod\n): boolean {\n  const end = newEnd || newStart;\n  return (\n    (period.start <= newStart && newStart <= period.end) ||\n    (period.start <= end && end <= period.end)\n  );\n}\n\nexport function shouldFireDroppedEvent(\n  dropEvent: { dropData?: { event?: MCEvent; calendarId?: symbol } },\n  date: Date,\n  allDay: boolean,\n  calendarId: symbol\n) {\n  return (\n    dropEvent.dropData &&\n    dropEvent.dropData.event &&\n    (dropEvent.dropData.calendarId !== calendarId ||\n      (dropEvent.dropData.event.allDay && !allDay) ||\n      (!dropEvent.dropData.event.allDay && allDay))\n  );\n}\n\nexport function getWeekViewPeriod(\n  dateAdapter: DateAdapter,\n  viewDate: Date,\n  weekStartsOn: number,\n  excluded: number[] = [],\n  daysInWeek?: number\n): { viewStart: Date; viewEnd: Date } {\n  let viewStart = daysInWeek\n    ? dateAdapter.startOfDay(viewDate)\n    : dateAdapter.startOfWeek(viewDate, { weekStartsOn });\n  const endOfWeek = dateAdapter.endOfWeek(viewDate, { weekStartsOn });\n  while (\n    excluded.indexOf(dateAdapter.getDay(viewStart)) > -1 &&\n    viewStart < endOfWeek\n  ) {\n    viewStart = dateAdapter.addDays(viewStart, 1);\n  }\n  if (daysInWeek) {\n    const viewEnd = dateAdapter.endOfDay(\n      addDaysWithExclusions(dateAdapter, viewStart, daysInWeek - 1, excluded)\n    );\n    return { viewStart, viewEnd };\n  } else {\n    let viewEnd = endOfWeek;\n    while (\n      excluded.indexOf(dateAdapter.getDay(viewEnd)) > -1 &&\n      viewEnd > viewStart\n    ) {\n      viewEnd = dateAdapter.subDays(viewEnd, 1);\n    }\n    return { viewStart, viewEnd };\n  }\n}\n\nexport function isWithinThreshold({ x, y }: { x: number; y: number }) {\n  const DRAG_THRESHOLD = 1;\n  return Math.abs(x) > DRAG_THRESHOLD || Math.abs(y) > DRAG_THRESHOLD;\n}\n","export enum CalendarView {\n  Month = 'month',\n  Week = 'week',\n  Day = 'day',\n}\n","import {\n  CalendarDateFormatterInterface,\n  DateFormatterParams,\n} from './calendar-date-formatter.interface';\nimport { formatDate } from '@angular/common';\nimport { Injectable } from '@angular/core';\nimport { DateAdapter } from '../../date-adapters/date-adapter';\nimport { getWeekViewPeriod } from './util';\n\n/**\n * This will use the angular date pipe to do all date formatting. It is the default date formatter used by the calendar.\n */\n@Injectable()\nexport class CalendarAngularDateFormatter\n  implements CalendarDateFormatterInterface {\n  constructor(protected dateAdapter: DateAdapter) {}\n\n  /**\n   * The month view header week day labels\n   */\n  public monthViewColumnHeader({ date, locale }: DateFormatterParams): string {\n    return formatDate(date, 'EEEE', locale);\n  }\n\n  /**\n   * The month view cell day number\n   */\n  public monthViewDayNumber({ date, locale }: DateFormatterParams): string {\n    return formatDate(date, 'd', locale);\n  }\n\n  /**\n   * The month view title\n   */\n  public monthViewTitle({ date, locale }: DateFormatterParams): string {\n    return formatDate(date, 'LLLL y', locale);\n  }\n\n  /**\n   * The week view header week day labels\n   */\n  public weekViewColumnHeader({ date, locale }: DateFormatterParams): string {\n    return formatDate(date, 'EEEE', locale);\n  }\n\n  /**\n   * The week view sub header day and month labels\n   */\n  public weekViewColumnSubHeader({\n    date,\n    locale,\n  }: DateFormatterParams): string {\n    return formatDate(date, 'MMM d', locale);\n  }\n\n  /**\n   * The week view title\n   */\n  public weekViewTitle({\n    date,\n    locale,\n    weekStartsOn,\n    excludeDays,\n    daysInWeek,\n  }: DateFormatterParams): string {\n    const { viewStart, viewEnd } = getWeekViewPeriod(\n      this.dateAdapter,\n      date,\n      weekStartsOn,\n      excludeDays,\n      daysInWeek\n    );\n    const format = (dateToFormat: Date, showYear: boolean) =>\n      formatDate(dateToFormat, 'MMM d' + (showYear ? ', yyyy' : ''), locale);\n    return `${format(\n      viewStart,\n      viewStart.getUTCFullYear() !== viewEnd.getUTCFullYear()\n    )} - ${format(viewEnd, true)}`;\n  }\n\n  /**\n   * The time formatting down the left hand side of the week view\n   */\n  public weekViewHour({ date, locale }: DateFormatterParams): string {\n    return formatDate(date, 'h a', locale);\n  }\n\n  /**\n   * The time formatting down the left hand side of the day view\n   */\n  public dayViewHour({ date, locale }: DateFormatterParams): string {\n    return formatDate(date, 'h a', locale);\n  }\n\n  /**\n   * The day view title\n   */\n  public dayViewTitle({ date, locale }: DateFormatterParams): string {\n    return formatDate(date, 'EEEE, MMMM d, y', locale);\n  }\n\n\n  public eventStartDateTitle({\n    date,\n    locale,\n  }: DateFormatterParams): string {\n    return formatDate(date, 'd. MMMM y / HH:mm', locale);\n  }\n\n  public eventStartTimeTitle({\n    date,\n    locale,\n  }: DateFormatterParams): string {\n    return formatDate(date, 'HH:mm', locale);\n  }\n\n  public eventEndTimeTitle({\n    date,\n    locale,\n  }: DateFormatterParams): string {\n    return formatDate(date, 'HH:mm', locale);\n  }\n}\n","import { CalendarAngularDateFormatter } from './calendar-angular-date-formatter.provider';\nimport { Injectable } from '@angular/core';\n\n/**\n * This class is responsible for all formatting of dates. There are 3 implementations available, the `CalendarAngularDateFormatter` (default) which uses the angular date pipe to format dates, the `CalendarNativeDateFormatter` which will use the <a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Intl\" target=\"_blank\">Intl</a> API to format dates, or there is the `CalendarMomentDateFormatter` which uses <a href=\"http://momentjs.com/\" target=\"_blank\">moment</a>.\n *\n * If you wish, you may override any of the defaults via angulars DI. For example:\n *\n * ```typescript\n * import { CalendarDateFormatter, DateFormatterParams } from 'angular-calendar';\n * import { formatDate } from '@angular/common';\n * import { Injectable } from '@angular/core';\n *\n * @Injectable()\n * class CustomDateFormatter extends CalendarDateFormatter {\n *\n *   public monthViewColumnHeader({date, locale}: DateFormatterParams): string {\n *     return formatDate(date, 'EEE', locale); // use short week days\n *   }\n *\n * }\n *\n * // in your component that uses the calendar\n * providers: [{\n *   provide: CalendarDateFormatter,\n *   useClass: CustomDateFormatter\n * }]\n * ```\n */\n@Injectable()\nexport class CalendarDateFormatter extends CalendarAngularDateFormatter {}\n","import { Pipe, PipeTransform, LOCALE_ID, Inject } from '@angular/core';\nimport { CalendarDateFormatter } from './calendar-date-formatter.provider';\n\n/**\n * This pipe is primarily for rendering the current view title. Example usage:\n * ```typescript\n * // where `viewDate` is a `Date` and view is `'month' | 'week' | 'day'`\n * {{ viewDate | calendarDate:(view + 'ViewTitle'):'en' }}\n * ```\n */\n@Pipe({\n  name: 'calendarDate',\n})\nexport class CalendarDatePipe implements PipeTransform {\n  constructor(\n    private dateFormatter: CalendarDateFormatter,\n    @Inject(LOCALE_ID) private locale: string\n  ) {}\n\n  transform(\n    date: Date,\n    method: string,\n    locale: string = this.locale,\n    weekStartsOn: number = 0,\n    excludeDays: number[] = [],\n    daysInWeek?: number\n  ): string {\n    if (typeof this.dateFormatter[method] === 'undefined') {\n      const allowedMethods = Object.getOwnPropertyNames(\n        Object.getPrototypeOf(CalendarDateFormatter.prototype)\n      ).filter((iMethod) => iMethod !== 'constructor');\n      throw new Error(\n        `${method} is not a valid date formatter. Can only be one of ${allowedMethods.join(\n          ', '\n        )}`\n      );\n    }\n    return this.dateFormatter[method]({\n      date,\n      locale,\n      weekStartsOn,\n      excludeDays,\n      daysInWeek,\n    });\n  }\n}\n","import { Component, Input, TemplateRef } from '@angular/core';\nimport { MCEvent, MCEventAction } from '../../utilities/mc-calendar-utils';\n\n@Component({\n  selector: 'mwl-calendar-event-actions',\n  template: `\n    <ng-template\n      #defaultTemplate\n      let-event=\"event\"\n      let-trackByActionId=\"trackByActionId\"\n    >\n      <span *ngIf=\"event.actions\" class=\"cal-event-actions\">\n        <a\n          class=\"cal-event-action\"\n          href=\"javascript:;\"\n          *ngFor=\"let action of event.actions; trackBy: trackByActionId\"\n          (mwlClick)=\"action.onClick({ event: event, sourceEvent: $event })\"\n          (mwlKeydownEnter)=\"\n            action.onClick({ event: event, sourceEvent: $event })\n          \"\n          [ngClass]=\"action.cssClass\"\n          [innerHtml]=\"action.label\"\n          tabindex=\"0\"\n          role=\"button\"\n          [attr.aria-label]=\"\n            { action: action } | calendarA11y: 'actionButtonLabel'\n          \"\n        >\n        </a>\n      </span>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]=\"customTemplate || defaultTemplate\"\n      [ngTemplateOutletContext]=\"{\n        event: event,\n        trackByActionId: trackByActionId\n      }\"\n    >\n    </ng-template>\n  `,\n})\nexport class CalendarEventActionsComponent {\n  @Input() event: MCEvent;\n\n  @Input() customTemplate: TemplateRef<any>;\n\n  trackByActionId = (index: number, action: MCEventAction) =>\n    action.id ? action.id : action;\n}\n","import { MCEvent } from \"../../utilities/mc-calendar-utils\";\n\n/**\n * This class is responsible for displaying all event titles within the calendar. You may override any of its methods via angulars DI to suit your requirements. For example:\n *\n * ```typescript\n * import { Injectable } from '@angular/core';\n * import { CalendarEventTitleFormatter, MCCalendarEvent } from 'angular-calendar';\n *\n * @Injectable()\n * class CustomEventTitleFormatter extends MCCalendarEventTitleFormatter {\n *\n *   month(event: MCCalendarEvent): string {\n *     return `Custom prefix: ${event.title}`;\n *   }\n *\n * }\n *\n * // in your component\n * providers: [{\n *  provide: MCCalendarEventTitleFormatter,\n *  useClass: CustomEventTitleFormatter\n * }]\n * ```\n */\nexport class CalendarEventTitleFormatter {\n  /**\n   * The month view event title.\n   */\n  month(event: MCEvent, title: string): string {\n    return event.title;\n  }\n\n  /**\n   * The month view event tooltip. Return a falsey value from this to disable the tooltip.\n   */\n  monthTooltip(event: MCEvent, title: string): string {\n    return event.title;\n  }\n\n  /**\n   * The week view event title.\n   */\n  week(event: MCEvent, title: string): string {\n    return event.title;\n  }\n\n  /**\n   * The week view event tooltip. Return a falsey value from this to disable the tooltip.\n   */\n  weekTooltip(event: MCEvent, title: string): string {\n    return event.title;\n  }\n\n  /**\n   * The day view event title.\n   */\n  day(event: MCEvent, title: string): string {\n    return event.title;\n  }\n\n  /**\n   * The day view event tooltip. Return a falsey value from this to disable the tooltip.\n   */\n  dayTooltip(event: MCEvent, title: string): string {\n    return event.title;\n  }\n}\n","import {\n  Component,\n  EventEmitter,\n  Input,\n  OnChanges,\n  Output,\n  TemplateRef,\n} from '@angular/core';\nimport { MCEvent } from '../../utilities/mc-calendar-utils';\n\n@Component({\n  selector: 'mwl-calendar-event-title',\n  template: `\n    <ng-template #defaultTemplate let-event=\"event\" let-view=\"view\">\n      <div class=\"cal-event-arrow\">\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          height=\"24\"\n          viewBox=\"0 0 24 24\"\n          width=\"24\"\n        >\n          <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n          <path d=\"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z\" />\n        </svg>\n      </div>\n      <span\n        class=\"cal-event-title\"\n        [innerHTML]=\"event.title | calendarEventTitle: view:event\"\n        [attr.aria-hidden]=\"{} | calendarA11y: 'hideEventTitle'\"\n      >\n      </span>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]=\"customTemplate || defaultTemplate\"\n      [ngTemplateOutletContext]=\"{\n        event: event,\n        view: view\n      }\"\n    >\n    </ng-template>\n  `,\n})\nexport class CalendarEventTitleComponent implements OnChanges {\n  @Input() event: MCEvent;\n\n  @Input() customTemplate: TemplateRef<any>;\n\n  @Input() view: string;\n\n  @Output()\n  quicklinkClick: EventEmitter<string> = new EventEmitter<string>();\n\n  isLive = false;\n\n  ngOnChanges() {\n    setInterval(() => {\n      this.isLive =\n        this.event.videoURL &&\n        new Date() >= this.event.start &&\n        new Date() < this.event.end;\n    }, 60);\n  }\n\n  navigateToLiveStream() {\n    this.quicklinkClick.emit(this.event.videoURL);\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { MCEvent } from '../../utilities/mc-calendar-utils';\nimport { CalendarEventTitleFormatter } from './calendar-event-title-formatter.provider';\n\n@Pipe({\n  name: 'calendarEventTitle',\n})\nexport class CalendarEventTitlePipe implements PipeTransform {\n  constructor(private calendarEventTitle: CalendarEventTitleFormatter) { }\n\n  transform(title: string, titleType: string, event: MCEvent): string {\n    return this.calendarEventTitle[titleType](event, title);\n  }\n}\n","import { MCEvent } from \"../../utilities/mc-calendar-utils\";\n\nexport enum CalendarEventTimesChangedEventType {\n  Drag = 'drag',\n  Drop = 'drop',\n  Resize = 'resize',\n}\n\n/**\n * The output `$event` type when an event is resized or dragged and dropped.\n */\nexport interface CalendarEventTimesChangedEvent<MetaType = any> {\n  type: CalendarEventTimesChangedEventType;\n  event: MCEvent<MetaType>;\n  newStart: Date;\n  newEnd?: Date;\n  allDay?: boolean;\n}\n","import {\n  Directive,\n  EventEmitter,\n  HostListener,\n  Input,\n  Output,\n} from '@angular/core';\nimport { DateAdapter } from '../../date-adapters/date-adapter';\nimport { CalendarView } from './calendar-view.enum';\nimport { addDaysWithExclusions } from './util';\n\n/**\n * Change the view date to the next view. For example:\n *\n * ```typescript\n * <button\n *  mwlCalendarNextView\n *  [(viewDate)]=\"viewDate\"\n *  [view]=\"view\">\n *  Next\n * </button>\n * ```\n */\n@Directive({\n  selector: '[mwlCalendarNextView]',\n})\nexport class CalendarNextViewDirective {\n  /**\n   * The current view\n   */\n  @Input() view: CalendarView | 'month' | 'week' | 'day';\n\n  /**\n   * The current view date\n   */\n  @Input() viewDate: Date;\n\n  /**\n   * Days to skip when going forward by 1 day\n   */\n  @Input() excludeDays: number[] = [];\n\n  @Input()\n  stepDays: number = 1;\n\n  /**\n   * The number of days in a week. If set will add this amount of days instead of 1 week\n   */\n  @Input() daysInWeek: number;\n\n  /**\n   * Called when the view date is changed\n   */\n  @Output() viewDateChange: EventEmitter<Date> = new EventEmitter();\n\n  constructor(private dateAdapter: DateAdapter) { }\n\n  /**\n   * @hidden\n   */\n  @HostListener('click')\n  onClick(): void {\n    const addFn: any = {\n      day: this.dateAdapter.addDays,\n      week: this.dateAdapter.addWeeks,\n      month: this.dateAdapter.addMonths,\n    }[this.view];\n\n    if (this.view === CalendarView.Day) {\n      this.viewDateChange.emit(\n        addDaysWithExclusions(\n          this.dateAdapter,\n          this.viewDate,\n          this.stepDays,\n          this.excludeDays\n        )\n      );\n    } else if (this.view === CalendarView.Week && this.daysInWeek) {\n      this.viewDateChange.emit(\n        addDaysWithExclusions(\n          this.dateAdapter,\n          this.viewDate,\n          this.daysInWeek,\n          this.excludeDays\n        )\n      );\n    } else {\n      this.viewDateChange.emit(addFn(this.viewDate, 1));\n    }\n  }\n}\n","import {\n  Directive,\n  HostListener,\n  Input,\n  Output,\n  EventEmitter,\n} from '@angular/core';\nimport { DateAdapter } from '../../date-adapters/date-adapter';\nimport { CalendarView } from './calendar-view.enum';\nimport { addDaysWithExclusions } from './util';\n\n/**\n * Change the view date to the previous view. For example:\n *\n * ```typescript\n * <button\n *  mwlCalendarPreviousView\n *  [(viewDate)]=\"viewDate\"\n *  [view]=\"view\">\n *  Previous\n * </button>\n * ```\n */\n@Directive({\n  selector: '[mwlCalendarPreviousView]',\n})\nexport class CalendarPreviousViewDirective {\n  /**\n   * The current view\n   */\n  @Input() view: CalendarView | 'month' | 'week' | 'day';\n\n  /**\n   * The current view date\n   */\n  @Input() viewDate: Date;\n\n  /**\n   * Days to skip when going back by 1 day\n   */\n  @Input() excludeDays: number[] = [];\n\n  @Input()\n  stepDays: number = 1;\n\n  /**\n   * The number of days in a week. If set will subtract this amount of days instead of 1 week\n   */\n  @Input() daysInWeek: number;\n\n  /**\n   * Called when the view date is changed\n   */\n  @Output() viewDateChange: EventEmitter<Date> = new EventEmitter();\n\n  constructor(private dateAdapter: DateAdapter) { }\n\n  /**\n   * @hidden\n   */\n  @HostListener('click')\n  onClick(): void {\n    const subFn: any = {\n      day: this.dateAdapter.subDays,\n      week: this.dateAdapter.subWeeks,\n      month: this.dateAdapter.subMonths,\n    }[this.view];\n\n    if (this.view === CalendarView.Day) {\n      this.viewDateChange.emit(\n        addDaysWithExclusions(\n          this.dateAdapter,\n          this.viewDate,\n          -(this.stepDays),\n          this.excludeDays\n        )\n      );\n    } else if (this.view === CalendarView.Week && this.daysInWeek) {\n      this.viewDateChange.emit(\n        addDaysWithExclusions(\n          this.dateAdapter,\n          this.viewDate,\n          -this.daysInWeek,\n          this.excludeDays\n        )\n      );\n    } else {\n      this.viewDateChange.emit(subFn(this.viewDate, 1));\n    }\n  }\n}\n","import {\n  Directive,\n  HostListener,\n  Input,\n  Output,\n  EventEmitter,\n} from '@angular/core';\nimport { DateAdapter } from '../../date-adapters/date-adapter';\n\n/**\n * Change the view date to the current day. For example:\n *\n * ```typescript\n * <button\n *  mwlCalendarToday\n *  [(viewDate)]=\"viewDate\">\n *  Today\n * </button>\n * ```\n */\n@Directive({\n  selector: '[mwlCalendarToday]',\n})\nexport class CalendarTodayDirective {\n  /**\n   * The current view date\n   */\n  @Input() viewDate: Date;\n\n  /**\n   * Called when the view date is changed\n   */\n  @Output() viewDateChange: EventEmitter<Date> = new EventEmitter();\n\n  constructor(private dateAdapter: DateAdapter) {}\n\n  /**\n   * @hidden\n   */\n  @HostListener('click')\n  onClick(): void {\n    this.viewDateChange.emit(this.dateAdapter.startOfDay(new Date()));\n  }\n}\n","import {\n  Directive,\n  Component,\n  HostListener,\n  OnDestroy,\n  Input,\n  ComponentRef,\n  Injector,\n  ComponentFactoryResolver,\n  ViewContainerRef,\n  ElementRef,\n  ComponentFactory,\n  Inject,\n  Renderer2,\n  TemplateRef,\n  OnChanges,\n  SimpleChanges,\n} from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { PlacementArray, positionElements } from 'positioning';\nimport { Observable, of, Subject, timer } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { MCEvent } from '../../utilities/mc-calendar-utils';\n\n@Component({\n  selector: 'mwl-calendar-tooltip-window',\n  template: `\n    <ng-template\n      #defaultTemplate\n      let-contents=\"contents\"\n      let-placement=\"placement\"\n      let-event=\"event\"\n    >\n      <div class=\"cal-tooltip\" [ngClass]=\"'cal-tooltip-' + placement\">\n        <div class=\"cal-tooltip-arrow\"></div>\n        <div class=\"cal-tooltip-inner\" [innerHtml]=\"contents\"></div>\n      </div>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]=\"customTemplate || defaultTemplate\"\n      [ngTemplateOutletContext]=\"{\n        contents: contents,\n        placement: placement,\n        event: event\n      }\"\n    >\n    </ng-template>\n  `,\n})\nexport class CalendarTooltipWindowComponent {\n  @Input() contents: string;\n\n  @Input() placement: string;\n\n  @Input() event: MCEvent;\n\n  @Input() customTemplate: TemplateRef<any>;\n}\n\n@Directive({\n  selector: '[mwlCalendarTooltip]',\n})\nexport class CalendarTooltipDirective implements OnDestroy, OnChanges {\n  @Input('mwlCalendarTooltip') contents: string; // tslint:disable-line no-input-rename\n\n  @Input('tooltipPlacement') placement: PlacementArray = 'auto'; // tslint:disable-line no-input-rename\n\n  @Input('tooltipTemplate') customTemplate: TemplateRef<any>; // tslint:disable-line no-input-rename\n\n  @Input('tooltipEvent') event: MCEvent; // tslint:disable-line no-input-rename\n\n  @Input('tooltipAppendToBody') appendToBody: boolean; // tslint:disable-line no-input-rename\n\n  @Input('tooltipDelay') delay: number | null = null; // tslint:disable-line no-input-rename\n\n  private tooltipFactory: ComponentFactory<CalendarTooltipWindowComponent>;\n  private tooltipRef: ComponentRef<CalendarTooltipWindowComponent>;\n  private cancelTooltipDelay$ = new Subject();\n\n  constructor(\n    private elementRef: ElementRef,\n    private injector: Injector,\n    private renderer: Renderer2,\n    componentFactoryResolver: ComponentFactoryResolver,\n    private viewContainerRef: ViewContainerRef,\n    @Inject(DOCUMENT) private document //tslint:disable-line\n  ) {\n    this.tooltipFactory = componentFactoryResolver.resolveComponentFactory(\n      CalendarTooltipWindowComponent\n    );\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (\n      this.tooltipRef &&\n      (changes.contents || changes.customTemplate || changes.event)\n    ) {\n      this.tooltipRef.instance.contents = this.contents;\n      this.tooltipRef.instance.customTemplate = this.customTemplate;\n      this.tooltipRef.instance.event = this.event;\n      this.tooltipRef.changeDetectorRef.markForCheck();\n\n      if (!this.contents) {\n        this.hide();\n      }\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.hide();\n  }\n\n  @HostListener('mouseenter')\n  onMouseOver(): void {\n    const delay$: Observable<any> =\n      this.delay === null ? of('now') : timer(this.delay);\n    delay$.pipe(takeUntil(this.cancelTooltipDelay$)).subscribe(() => {\n      this.show();\n    });\n  }\n\n  @HostListener('mouseleave')\n  onMouseOut(): void {\n    this.hide();\n  }\n\n  private show(): void {\n    if (!this.tooltipRef && this.contents) {\n      this.tooltipRef = this.viewContainerRef.createComponent(\n        this.tooltipFactory,\n        0,\n        this.injector,\n        []\n      );\n      this.tooltipRef.instance.contents = this.contents;\n      this.tooltipRef.instance.customTemplate = this.customTemplate;\n      this.tooltipRef.instance.event = this.event;\n      if (this.appendToBody) {\n        this.document.body.appendChild(this.tooltipRef.location.nativeElement);\n      }\n      requestAnimationFrame(() => {\n        this.positionTooltip();\n      });\n    }\n  }\n\n  private hide(): void {\n    if (this.tooltipRef) {\n      this.viewContainerRef.remove(\n        this.viewContainerRef.indexOf(this.tooltipRef.hostView)\n      );\n      this.tooltipRef = null;\n    }\n    this.cancelTooltipDelay$.next();\n  }\n\n  private positionTooltip(previousPositions: string[] = []): void {\n    if (this.tooltipRef) {\n      this.tooltipRef.changeDetectorRef.detectChanges();\n      this.tooltipRef.instance.placement = positionElements(\n        this.elementRef.nativeElement,\n        this.tooltipRef.location.nativeElement.children[0],\n        this.placement,\n        this.appendToBody\n      );\n      // keep re-positioning the tooltip until the arrow position doesn't make a difference\n      if (\n        previousPositions.indexOf(this.tooltipRef.instance.placement) === -1\n      ) {\n        this.positionTooltip([\n          ...previousPositions,\n          this.tooltipRef.instance.placement,\n        ]);\n      }\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { getMonthView, getWeekView, getWeekViewHeader, MCGetMonthViewArgs, MCGetWeekViewArgs, MCGetWeekViewHeaderArgs, MCMonthView, MCWeekDay, MCWeekView } from '../../utilities/mc-calendar-utils';\nimport { DateAdapter } from '../../date-adapters/date-adapter';\n\n@Injectable()\nexport class CalendarUtils {\n  constructor(protected dateAdapter: DateAdapter) { }\n\n  getMonthView(args: MCGetMonthViewArgs): MCMonthView {\n    return getMonthView(this.dateAdapter, args);\n  }\n\n  getWeekViewHeader(args: MCGetWeekViewHeaderArgs): MCWeekDay[] {\n    return getWeekViewHeader(this.dateAdapter, args);\n  }\n\n  getWeekView(args: MCGetWeekViewArgs): MCWeekView {\n    return getWeekView(this.dateAdapter, args);\n  }\n}\n","import {\n  Directive,\n  Renderer2,\n  ElementRef,\n  OnInit,\n  OnDestroy,\n  Output,\n  EventEmitter,\n  Inject,\n  Input,\n  NgZone,\n} from '@angular/core';\nimport { DOCUMENT } from '@angular/common';\nimport { Observable, Subject } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\n\n@Directive({\n  selector: '[mwlClick]',\n})\nexport class ClickDirective implements OnInit, OnDestroy {\n  @Input() clickListenerDisabled = false;\n\n  @Output('mwlClick') click = new EventEmitter<MouseEvent>(); // tslint:disable-line\n\n  private destroy$ = new Subject();\n\n  constructor(\n    private renderer: Renderer2,\n    private elm: ElementRef<HTMLElement>,\n    @Inject(DOCUMENT) private document\n  ) {}\n\n  ngOnInit(): void {\n    if (!this.clickListenerDisabled) {\n      this.listen()\n        .pipe(takeUntil(this.destroy$))\n        .subscribe((event) => {\n          event.stopPropagation();\n          this.click.emit(event);\n        });\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroy$.next();\n  }\n\n  private listen() {\n    return new Observable<MouseEvent>((observer) => {\n      return this.renderer.listen(this.elm.nativeElement, 'click', (event) => {\n        observer.next(event);\n      });\n    });\n  }\n}\n","import { Directive, Output, EventEmitter, HostListener } from '@angular/core';\n\n@Directive({\n  selector: '[mwlKeydownEnter]',\n})\nexport class KeydownEnterDirective {\n  @Output('mwlKeydownEnter') keydown = new EventEmitter<any>(); // tslint:disable-line\n\n  @HostListener('keydown', ['$event'])\n  onKeyPress(event: any) {\n    if (event.keyCode === 13 || event.which === 13 || event.key === 'Enter') {\n      event.preventDefault();\n      event.stopPropagation();\n      this.keydown.emit(event);\n    }\n  }\n}\n","import { InjectionToken, Inject, Injectable } from '@angular/core';\nimport {\n  CalendarDateFormatterInterface,\n  DateFormatterParams,\n} from './calendar-date-formatter.interface';\nimport { getWeekViewPeriod } from './util';\nimport { DateAdapter } from '../../date-adapters/date-adapter';\n\nexport const MOMENT: InjectionToken<string> = new InjectionToken('Moment');\n\n/**\n * This will use <a href=\"http://momentjs.com/\" target=\"_blank\">moment</a> to do all date formatting. To use this class:\n *\n * ```typescript\n * import { CalendarDateFormatter, CalendarMomentDateFormatter, MOMENT } from 'angular-calendar';\n * import moment from 'moment';\n *\n * // in your component\n * provide: [{\n *   provide: MOMENT, useValue: moment\n * }, {\n *   provide: CalendarDateFormatter, useClass: CalendarMomentDateFormatter\n * }]\n *\n * ```\n */\n@Injectable()\nexport class CalendarMomentDateFormatter\n  implements CalendarDateFormatterInterface {\n  /**\n   * @hidden\n   */\n  constructor(\n    @Inject(MOMENT) protected moment: any,\n    protected dateAdapter: DateAdapter\n  ) {}\n\n  /**\n   * The month view header week day labels\n   */\n  public monthViewColumnHeader({ date, locale }: DateFormatterParams): string {\n    return this.moment(date).locale(locale).format('dddd');\n  }\n\n  /**\n   * The month view cell day number\n   */\n  public monthViewDayNumber({ date, locale }: DateFormatterParams): string {\n    return this.moment(date).locale(locale).format('D');\n  }\n\n  /**\n   * The month view title\n   */\n  public monthViewTitle({ date, locale }: DateFormatterParams): string {\n    return this.moment(date).locale(locale).format('MMMM YYYY');\n  }\n\n  /**\n   * The week view header week day labels\n   */\n  public weekViewColumnHeader({ date, locale }: DateFormatterParams): string {\n    return this.moment(date).locale(locale).format('dddd');\n  }\n\n  /**\n   * The week view sub header day and month labels\n   */\n  public weekViewColumnSubHeader({\n    date,\n    locale,\n  }: DateFormatterParams): string {\n    return this.moment(date).locale(locale).format('MMM D');\n  }\n\n  /**\n   * The week view title\n   */\n  public weekViewTitle({\n    date,\n    locale,\n    weekStartsOn,\n    excludeDays,\n    daysInWeek,\n  }: DateFormatterParams): string {\n    const { viewStart, viewEnd } = getWeekViewPeriod(\n      this.dateAdapter,\n      date,\n      weekStartsOn,\n      excludeDays,\n      daysInWeek\n    );\n    const format = (dateToFormat: Date, showYear: boolean) =>\n      this.moment(dateToFormat)\n        .locale(locale)\n        .format('MMM D' + (showYear ? ', YYYY' : ''));\n    return `${format(\n      viewStart,\n      viewStart.getUTCFullYear() !== viewEnd.getUTCFullYear()\n    )} - ${format(viewEnd, true)}`;\n  }\n\n  /**\n   * The time formatting down the left hand side of the week view\n   */\n  public weekViewHour({ date, locale }: DateFormatterParams): string {\n    return this.moment(date).locale(locale).format('ha');\n  }\n\n  /**\n   * The time formatting down the left hand side of the day view\n   */\n  public dayViewHour({ date, locale }: DateFormatterParams): string {\n    return this.moment(date).locale(locale).format('ha');\n  }\n\n  /**\n   * The day view title\n   */\n  public dayViewTitle({ date, locale }: DateFormatterParams): string {\n    return this.moment(date).locale(locale).format('dddd, D MMMM, YYYY');\n  }\n}\n","import {\n  CalendarDateFormatterInterface,\n  DateFormatterParams,\n} from './calendar-date-formatter.interface';\nimport { Injectable } from '@angular/core';\nimport { DateAdapter } from '../../date-adapters/date-adapter';\nimport { getWeekViewPeriod } from './util';\n\n/**\n * This will use <a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Intl\" target=\"_blank\">Intl</a> API to do all date formatting.\n *\n * You will need to include a <a href=\"https://github.com/andyearnshaw/Intl.js/\">polyfill</a> for older browsers.\n */\n@Injectable()\nexport class CalendarNativeDateFormatter\n  implements CalendarDateFormatterInterface {\n  constructor(protected dateAdapter: DateAdapter) {}\n\n  /**\n   * The month view header week day labels\n   */\n  public monthViewColumnHeader({ date, locale }: DateFormatterParams): string {\n    return new Intl.DateTimeFormat(locale, { weekday: 'long' }).format(date);\n  }\n\n  /**\n   * The month view cell day number\n   */\n  public monthViewDayNumber({ date, locale }: DateFormatterParams): string {\n    return new Intl.DateTimeFormat(locale, { day: 'numeric' }).format(date);\n  }\n\n  /**\n   * The month view title\n   */\n  public monthViewTitle({ date, locale }: DateFormatterParams): string {\n    return new Intl.DateTimeFormat(locale, {\n      year: 'numeric',\n      month: 'long',\n    }).format(date);\n  }\n\n  /**\n   * The week view header week day labels\n   */\n  public weekViewColumnHeader({ date, locale }: DateFormatterParams): string {\n    return new Intl.DateTimeFormat(locale, { weekday: 'long' }).format(date);\n  }\n\n  /**\n   * The week view sub header day and month labels\n   */\n  public weekViewColumnSubHeader({\n    date,\n    locale,\n  }: DateFormatterParams): string {\n    return new Intl.DateTimeFormat(locale, {\n      day: 'numeric',\n      month: 'short',\n    }).format(date);\n  }\n\n  /**\n   * The week view title\n   */\n  public weekViewTitle({\n    date,\n    locale,\n    weekStartsOn,\n    excludeDays,\n    daysInWeek,\n  }: DateFormatterParams): string {\n    const { viewStart, viewEnd } = getWeekViewPeriod(\n      this.dateAdapter,\n      date,\n      weekStartsOn,\n      excludeDays,\n      daysInWeek\n    );\n\n    const format = (dateToFormat: Date, showYear: boolean) =>\n      new Intl.DateTimeFormat(locale, {\n        day: 'numeric',\n        month: 'short',\n        year: showYear ? 'numeric' : undefined,\n      }).format(dateToFormat);\n\n    return `${format(\n      viewStart,\n      viewStart.getUTCFullYear() !== viewEnd.getUTCFullYear()\n    )} - ${format(viewEnd, true)}`;\n  }\n\n  /**\n   * The time formatting down the left hand side of the week view\n   */\n  public weekViewHour({ date, locale }: DateFormatterParams): string {\n    return new Intl.DateTimeFormat(locale, { hour: 'numeric' }).format(date);\n  }\n\n  /**\n   * The time formatting down the left hand side of the day view\n   */\n  public dayViewHour({ date, locale }: DateFormatterParams): string {\n    return new Intl.DateTimeFormat(locale, { hour: 'numeric' }).format(date);\n  }\n\n  /**\n   * The day view title\n   */\n  public dayViewTitle({ date, locale }: DateFormatterParams): string {\n    return new Intl.DateTimeFormat(locale, {\n      day: 'numeric',\n      month: 'long',\n      year: 'numeric',\n      weekday: 'long',\n    }).format(date);\n  }\n}\n","import { CommonModule, I18nPluralPipe } from '@angular/common';\nimport { ModuleWithProviders, NgModule, Provider } from '@angular/core';\nimport { CalendarA11yPipe } from './calendar-a11y.pipe';\nimport { CalendarA11y } from './calendar-a11y.provider';\nimport { CalendarDateFormatter } from './calendar-date-formatter.provider';\nimport { CalendarDatePipe } from './calendar-date.pipe';\nimport { CalendarEventActionsComponent } from './calendar-event-actions.component';\nimport { CalendarEventTitleFormatter } from './calendar-event-title-formatter.provider';\nimport { CalendarEventTitleComponent } from './calendar-event-title.component';\nimport { CalendarEventTitlePipe } from './calendar-event-title.pipe';\nimport { CalendarNextViewDirective } from './calendar-next-view.directive';\nimport { CalendarPreviousViewDirective } from './calendar-previous-view.directive';\nimport { CalendarTodayDirective } from './calendar-today.directive';\nimport {\n  CalendarTooltipDirective,\n  CalendarTooltipWindowComponent\n} from './calendar-tooltip.directive';\nimport { CalendarUtils } from './calendar-utils.provider';\nimport { ClickDirective } from './click.directive';\nimport { KeydownEnterDirective } from './keydown-enter.directive';\n\nexport interface CalendarModuleConfig {\n  eventTitleFormatter?: Provider;\n  dateFormatter?: Provider;\n  utils?: Provider;\n  a11y?: Provider;\n}\n\nexport {\n  CalendarEvent,\n\n  DAYS_OF_WEEK, EventAction as CalendarEventAction,\n\n  ViewPeriod as CalendarViewPeriod\n} from 'calendar-utils';\nexport * from '../../date-adapters/date-adapter';\nexport * from './calendar-a11y.interface';\nexport * from './calendar-a11y.provider';\nexport * from './calendar-angular-date-formatter.provider';\nexport * from './calendar-date-formatter.interface';\nexport * from './calendar-date-formatter.provider';\nexport * from './calendar-event-times-changed-event.interface';\nexport * from './calendar-event-title-formatter.provider';\nexport * from './calendar-moment-date-formatter.provider';\nexport * from './calendar-native-date-formatter.provider';\nexport * from './calendar-utils.provider';\nexport * from './calendar-view.enum';\n\n\n/**\n * Import this module to if you're just using a singular view and want to save on bundle size. Example usage:\n *\n * ```typescript\n * import { CalendarCommonModule, CalendarMonthModule } from 'angular-calendar';\n *\n * @NgModule({\n *   imports: [\n *     CalendarCommonModule.forRoot(),\n *     CalendarMonthModule\n *   ]\n * })\n * class MyModule {}\n * ```\n *\n */\n@NgModule({\n  declarations: [\n    CalendarEventActionsComponent,\n    CalendarEventTitleComponent,\n    CalendarTooltipWindowComponent,\n    CalendarTooltipDirective,\n    CalendarPreviousViewDirective,\n    CalendarNextViewDirective,\n    CalendarTodayDirective,\n    CalendarDatePipe,\n    CalendarEventTitlePipe,\n    CalendarA11yPipe,\n    ClickDirective,\n    KeydownEnterDirective\n  ],\n  imports: [CommonModule],\n  exports: [\n    CalendarEventActionsComponent,\n    CalendarEventTitleComponent,\n    CalendarTooltipWindowComponent,\n    CalendarTooltipDirective,\n    CalendarPreviousViewDirective,\n    CalendarNextViewDirective,\n    CalendarTodayDirective,\n    CalendarDatePipe,\n    CalendarEventTitlePipe,\n    CalendarA11yPipe,\n    ClickDirective,\n    KeydownEnterDirective,\n  ],\n  providers: [I18nPluralPipe],\n  entryComponents: [CalendarTooltipWindowComponent],\n})\nexport class CalendarCommonModule {\n  static forRoot(\n    dateAdapter: Provider,\n    config: CalendarModuleConfig = {}\n  ): ModuleWithProviders<CalendarCommonModule> {\n    return {\n      ngModule: CalendarCommonModule,\n      providers: [\n        dateAdapter,\n        config.eventTitleFormatter || CalendarEventTitleFormatter,\n        config.dateFormatter || CalendarDateFormatter,\n        config.utils || CalendarUtils,\n        config.a11y || CalendarA11y,\n      ],\n    };\n  }\n}\n","import {\n  Component,\n  EventEmitter,\n  Input,\n  Output,\n  TemplateRef\n} from '@angular/core';\nimport { PlacementArray } from 'positioning';\nimport { MCEvent } from '../../utilities/mc-calendar-utils';\nimport { Subject } from 'rxjs';\nimport { CalendarEventTimesChangedEvent } from '../common/calendar-event-times-changed-event.interface';\nimport { CalendarWeekViewBeforeRenderEvent } from '../week/calendar-week.module';\n\nexport type CalendarDayViewBeforeRenderEvent = CalendarWeekViewBeforeRenderEvent;\n\n/**\n * Shows all events on a given day. Example usage:\n *\n * ```typescript\n * <mwl-calendar-day-view\n *  [viewDate]=\"viewDate\"\n *  [events]=\"events\">\n * </mwl-calendar-day-view>\n * ```\n */\n@Component({\n  selector: 'mwl-calendar-day-view',\n  template: `\n    <mwl-calendar-week-view\n      class=\"cal-day-view\"\n      [daysInWeek]=\"1\"\n      [viewDate]=\"viewDate\"\n      [events]=\"events\"\n      [hourSegments]=\"hourSegments\"\n      [hourSegmentHeight]=\"hourSegmentHeight\"\n      [dayStartHour]=\"dayStartHour\"\n      [dayStartMinute]=\"dayStartMinute\"\n      [dayEndHour]=\"dayEndHour\"\n      [dayEndMinute]=\"dayEndMinute\"\n      [refresh]=\"refresh\"\n      [locale]=\"locale\"\n      [eventSnapSize]=\"eventSnapSize\"\n      [tooltipPlacement]=\"tooltipPlacement\"\n      [tooltipDisabled]=\"tooltipDisabled\"\n      [tooltipTemplate]=\"tooltipTemplate\"\n      [tooltipAppendToBody]=\"tooltipAppendToBody\"\n      [tooltipDelay]=\"tooltipDelay\"\n      [hourSegmentTemplate]=\"hourSegmentTemplate\"\n      [eventTemplate]=\"eventTemplate\"\n      [eventTitleTemplate]=\"eventTitleTemplate\"\n      [eventActionsTemplate]=\"eventActionsTemplate\"\n      [snapDraggedEvents]=\"snapDraggedEvents\"\n      [allDayEventsLabelTemplate]=\"allDayEventsLabelTemplate\"\n      [currentTimeMarkerTemplate]=\"currentTimeMarkerTemplate\"\n      (eventClicked)=\"eventClicked.emit($event)\"\n      (hourSegmentClicked)=\"hourSegmentClicked.emit($event)\"\n      (eventTimesChanged)=\"eventTimesChanged.emit($event)\"\n      (beforeViewRender)=\"beforeViewRender.emit($event)\"\n    ></mwl-calendar-week-view>\n  `,\n})\nexport class CalendarDayViewComponent {\n  /**\n   * The current view date\n   */\n  @Input() viewDate: Date;\n\n  /**\n   * An array of events to display on view\n   * The schema is available here: https://github.com/mattlewis92/calendar-utils/blob/c51689985f59a271940e30bc4e2c4e1fee3fcb5c/src/calendarUtils.ts#L49-L63\n   */\n  @Input() events: MCEvent[] = [];\n\n  /**\n   * The number of segments in an hour. Must be <= 6\n   */\n  @Input() hourSegments: number = 2;\n\n  /**\n   * The height in pixels of each hour segment\n   */\n  @Input() hourSegmentHeight: number = 30;\n\n  /**\n   * The day start hours in 24 hour time. Must be 0-23\n   */\n  @Input() dayStartHour: number = 0;\n\n  /**\n   * The day start minutes. Must be 0-59\n   */\n  @Input() dayStartMinute: number = 0;\n\n  /**\n   * The day end hours in 24 hour time. Must be 0-23\n   */\n  @Input() dayEndHour: number = 23;\n\n  /**\n   * The day end minutes. Must be 0-59\n   */\n  @Input() dayEndMinute: number = 59;\n\n  /**\n   * An observable that when emitted on will re-render the current view\n   */\n  @Input() refresh: Subject<any>;\n\n  /**\n   * The locale used to format dates\n   */\n  @Input() locale: string;\n\n  /**\n   * The grid size to snap resizing and dragging of events to\n   */\n  @Input() eventSnapSize: number;\n\n  /**\n   * The placement of the event tooltip\n   */\n  @Input() tooltipPlacement: PlacementArray = 'auto';\n\n  /**\n   * A custom template to use for the event tooltips\n   */\n  @Input() tooltipTemplate: TemplateRef<any>;\n\n\n  @Input() tooltipDisabled = true;\n\n  /**\n   * Whether to append tooltips to the body or next to the trigger element\n   */\n  @Input() tooltipAppendToBody: boolean = true;\n\n  /**\n   * The delay in milliseconds before the tooltip should be displayed. If not provided the tooltip\n   * will be displayed immediately.\n   */\n  @Input() tooltipDelay: number | null = null;\n\n  /**\n   * A custom template to use to replace the hour segment\n   */\n  @Input() hourSegmentTemplate: TemplateRef<any>;\n\n  /**\n   * A custom template to use for day view events\n   */\n  @Input() eventTemplate: TemplateRef<any>;\n\n  /**\n   * A custom template to use for event titles\n   */\n  @Input() eventTitleTemplate: TemplateRef<any>;\n\n  /**\n   * A custom template to use for event actions\n   */\n  @Input() eventActionsTemplate: TemplateRef<any>;\n\n  /**\n   * Whether to snap events to a grid when dragging\n   */\n  @Input() snapDraggedEvents: boolean = true;\n\n  /**\n   * A custom template to use for the all day events label text\n   */\n  @Input() allDayEventsLabelTemplate: TemplateRef<any>;\n\n  /**\n   * A custom template to use for the current time marker\n   */\n  @Input() currentTimeMarkerTemplate: TemplateRef<any>;\n\n  /**\n   * Called when an event title is clicked\n   */\n  @Output() eventClicked = new EventEmitter<any>();\n\n  /**\n   * Called when an hour segment is clicked\n   */\n  @Output() hourSegmentClicked = new EventEmitter<{\n    date: Date;\n  }>();\n\n  /**\n   * Called when an event is resized or dragged and dropped\n   */\n  @Output() eventTimesChanged = new EventEmitter<\n    CalendarEventTimesChangedEvent\n  >();\n\n  /**\n   * An output that will be called before the view is rendered for the current day.\n   * If you add the `cssClass` property to an hour grid segment it will add that class to the hour segment in the template\n   */\n  @Output() beforeViewRender = new EventEmitter<\n    CalendarDayViewBeforeRenderEvent\n  >();\n}\n","import {\n  Component,\n  Input,\n  NgZone,\n  OnChanges,\n  SimpleChanges,\n  TemplateRef,\n} from '@angular/core';\nimport { BehaviorSubject, interval, Observable } from 'rxjs';\nimport { switchMapTo, startWith, map, switchMap } from 'rxjs/operators';\nimport { DateAdapter } from '../../date-adapters/date-adapter';\n\n@Component({\n  selector: 'mwl-calendar-week-view-current-time-marker',\n  template: `\n    <ng-template\n      #defaultTemplate\n      let-columnDate=\"columnDate\"\n      let-dayStartHour=\"dayStartHour\"\n      let-dayStartMinute=\"dayStartMinute\"\n      let-dayEndHour=\"dayEndHour\"\n      let-dayEndMinute=\"dayEndMinute\"\n      let-isVisible=\"isVisible\"\n      let-topPx=\"topPx\"\n    >\n      <div\n        class=\"cal-current-time-marker\"\n        *ngIf=\"isVisible\"\n        [style.top.px]=\"topPx\"\n      >\n        <div style=\"position: absolute;height: 18px;width: 18px;top: -8px;left: -6px;\">\n          <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" width=\"18px\" height=\"18px\" style=\"fill: red;\">\n            <path d=\"M0 0h24v24H0z\" fill=\"none\"></path>\n            <path d=\"M8 5v14l11-7z\"></path>\n          </svg>\n        </div>\n      </div>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]=\"customTemplate || defaultTemplate\"\n      [ngTemplateOutletContext]=\"{\n        columnDate: columnDate,\n        dayStartHour: dayStartHour,\n        dayStartMinute: dayStartMinute,\n        dayEndHour: dayEndHour,\n        dayEndMinute: dayEndMinute,\n        isVisible: (marker$ | async)?.isVisible,\n        topPx: (marker$ | async)?.top\n      }\"\n    >\n    </ng-template>\n  `,\n})\nexport class CalendarWeekViewCurrentTimeMarkerComponent implements OnChanges {\n  @Input() columnDate: Date;\n\n  @Input() dayStartHour: number;\n\n  @Input() dayStartMinute: number;\n\n  @Input() dayEndHour: number;\n\n  @Input() dayEndMinute: number;\n\n  @Input() hourSegments: number;\n\n  @Input() hourSegmentHeight: number;\n\n  @Input() customTemplate: TemplateRef<any>;\n\n  columnDate$ = new BehaviorSubject<Date>(this.columnDate);\n\n  marker$: Observable<{\n    isVisible: boolean;\n    top: number;\n  }> = this.zone.onStable.pipe(\n    switchMap(() => interval(60 * 1000)),\n    startWith(0),\n    switchMapTo(this.columnDate$),\n    map((columnDate) => {\n      const startOfDay = this.dateAdapter.setMinutes(\n        this.dateAdapter.setHours(columnDate, this.dayStartHour),\n        this.dayStartMinute\n      );\n      const endOfDay = this.dateAdapter.setMinutes(\n        this.dateAdapter.setHours(columnDate, this.dayEndHour),\n        this.dayEndMinute\n      );\n      const hourHeightModifier =\n        (this.hourSegments * this.hourSegmentHeight) / 60;\n      const now = new Date();\n      return {\n        isVisible:\n          this.dateAdapter.isSameDay(columnDate, now) &&\n          now >= startOfDay &&\n          now <= endOfDay,\n        top:\n          this.dateAdapter.differenceInMinutes(now, startOfDay) *\n          hourHeightModifier,\n      };\n    })\n  );\n\n  constructor(private dateAdapter: DateAdapter, private zone: NgZone) { }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.columnDate) {\n      this.columnDate$.next(changes.columnDate.currentValue);\n    }\n  }\n}\n","import {\n  Component,\n  EventEmitter,\n  Input,\n  OnChanges,\n  Output,\n  TemplateRef\n} from '@angular/core';\nimport { PlacementArray } from 'positioning';\nimport {\n  MCWeekViewAllDayEvent,\n  MCWeekViewHourColumn,\n  MCWeekViewTimeEvent\n} from '../../utilities/mc-calendar-utils';\n\n@Component({\n  selector: 'mwl-calendar-week-view-event',\n  template: `\n    <ng-template\n      #defaultTemplate\n      let-weekEvent=\"weekEvent\"\n      let-tooltipPlacement=\"tooltipPlacement\"\n      let-eventClicked=\"eventClicked\"\n      let-tooltipTemplate=\"tooltipTemplate\"\n      let-tooltipAppendToBody=\"tooltipAppendToBody\"\n      let-tooltipDisabled=\"tooltipDisabled\"\n      let-tooltipDelay=\"tooltipDelay\"\n      let-column=\"column\"\n      let-daysInWeek=\"daysInWeek\"\n    >\n      <div\n        class=\"cal-event\"\n        [mwlCalendarTooltip]=\"\n          !tooltipDisabled\n            ? (weekEvent.event.title\n              | calendarEventTitle\n                : (daysInWeek === 1 ? 'dayTooltip' : 'weekTooltip')\n                : weekEvent.tempEvent || weekEvent.event)\n            : ''\n        \"\n        [tooltipPlacement]=\"tooltipPlacement\"\n        [tooltipEvent]=\"weekEvent.tempEvent || weekEvent.event\"\n        [tooltipTemplate]=\"tooltipTemplate\"\n        [tooltipAppendToBody]=\"tooltipAppendToBody\"\n        [tooltipDelay]=\"tooltipDelay\"\n        (mwlClick)=\"eventClicked.emit({ sourceEvent: $event })\"\n        (mwlKeydownEnter)=\"eventClicked.emit({ sourceEvent: $event })\"\n        tabindex=\"0\"\n        role=\"application\"\n        [attr.aria-label]=\"\n          { event: weekEvent.tempEvent || weekEvent.event, locale: locale }\n            | calendarA11y: 'eventDescription'\n        \"\n      >\n        <mwl-calendar-event-actions\n          [event]=\"weekEvent.tempEvent || weekEvent.event\"\n          [customTemplate]=\"eventActionsTemplate\"\n        >\n        </mwl-calendar-event-actions>\n        &ngsp;\n        <div\n          class=\"cal-event-top-bar\"\n          [ngStyle]=\"{ 'border-top': '2px solid ' + weekEvent.event.color?.primary }\"\n          *ngIf=\"!(weekEvent.tempEvent || weekEvent.event).allDay\"\n        >\n          <span\n            class=\"cal-event-date-title cal-event-room-group\"\n            [attr.aria-hidden]=\"{} | calendarA11y: 'hideEventTitle'\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 24 24\"\n              width=\"12\"\n              style=\"transform: translateY(2px);margin-right: 1px;\"\n              height=\"12\"\n            >\n              <path d=\"M0 0h24v24H0V0z\" fill=\"none\"></path>\n              <path\n                d=\"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z\"\n              ></path>\n            </svg>\n            {{\n              weekEvent.event.start | calendarDate: 'eventStartTimeTitle':'de'\n            }}\n            -\n            {{ weekEvent.event.end | calendarDate: 'eventEndTimeTitle':'de' }}\n            Uhr\n          </span>\n\n          <span\n            *ngIf=\"weekEvent.event.onSite && weekEvent.event.room\"\n            [ngStyle]=\"{'width': weekEvent.event.online ? '50%' : '100%'}\"\n            class=\"cal-event-room-group\"\n          >\n            <svg\n              xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 24 24\"\n              width=\"12\"\n              height=\"12\"\n              style=\"transform: translateY(2px);margin-right: 1px;\"\n            >\n              <path d=\"M0 0h24v24H0V0z\" fill=\"none\"></path>\n              <path\n                d=\"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zM7 9c0-2.76 2.24-5 5-5s5 2.24 5 5c0 2.88-2.88 7.19-5 9.88C9.92 16.21 7 11.85 7 9z\"\n              ></path>\n              <circle cx=\"12\" cy=\"9\" r=\"2.5\"></circle>\n            </svg>\n            {{ weekEvent.event.online ? weekEvent.event.room?.shortName : weekEvent.event.room?.name }}\n          </span>\n\n          <span\n            *ngIf=\"weekEvent.event.online\"\n            [ngStyle]=\"{'width': weekEvent.event.onSite && weekEvent.event.room ? '50%' : '100%'}\"\n            class=\"cal-event-room-group\"\n          >\n            <svg xmlns=\"http://www.w3.org/2000/svg\"\n              viewBox=\"0 0 24 24\"\n              fill=\"black\"\n              width=\"12\"\n              height=\"12\"\n              style=\"transform: translateY(2px);margin-right: 1px;\">\n              <path d=\"M0 0h24v24H0V0z\" fill=\"none\"/>\n              <path d=\"M15 8v8H5V8h10m1-2H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4V7c0-.55-.45-1-1-1z\"/>\n            </svg>\n            Online\n            <span\n              *ngIf=\"isLive\"\n              style=\"border: 1px solid red;\n              border-radius: 3px;\n              padding: 0px 4px;\n              margin: 0px 4px;\n              color: red;\n              font-size: 10px;\n              font-weight: 500;\"\n              class=\"cal-event-live\"\n              (click)=\"navigateToLiveStream()\"\n            >\n              <svg\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"10\"\n                height=\"10\"\n                style=\"transform: translateY(1px); margin-right: -1px;fill: red;\"\n                viewBox=\"0 0 24 24\"\n              >\n                <path d=\"M24 24H0V0h24v24z\" fill=\"none\"></path>\n                <circle cx=\"12\" cy=\"12\" r=\"8\"></circle>\n              </svg>\n              LIVE\n            </span>\n          </span>\n\n          <div\n            class=\"cal-event-color\"\n            style=\"pointer-events: none;\"\n            [ngStyle]=\"{ backgroundColor: weekEvent.event.color?.primary }\"\n          ></div>\n        </div>\n\n        <mwl-calendar-event-title\n          [event]=\"weekEvent.tempEvent || weekEvent.event\"\n          [customTemplate]=\"eventTitleTemplate\"\n          [view]=\"daysInWeek === 1 ? 'day' : 'week'\"\n          (quicklinkClick)=\"\n            eventClicked.emit({ sourceEvent: $event, isQuicklink: true })\n          \"\n        >\n        </mwl-calendar-event-title>\n\n        <mwl-mc-quicklinks\n          *ngIf=\"duration >= 45 && hourSegmentHeight >= 90\"\n          (quicklinkClick)=\"\n            eventClicked.emit({ sourceEvent: $event, isQuicklink: true })\n          \"\n          [event]=\"weekEvent.event\"\n        ></mwl-mc-quicklinks>\n      </div>\n    </ng-template>\n\n    <ng-template\n      #allDayTemplate\n      let-weekEvent=\"weekEvent\"\n      let-tooltipPlacement=\"tooltipPlacement\"\n      let-eventClicked=\"eventClicked\"\n      let-tooltipTemplate=\"tooltipTemplate\"\n      let-tooltipAppendToBody=\"tooltipAppendToBody\"\n      let-tooltipDisabled=\"tooltipDisabled\"\n      let-tooltipDelay=\"tooltipDelay\"\n      let-column=\"column\"\n      let-daysInWeek=\"daysInWeek\"\n    >\n      <div\n        class=\"cal-event cal-event-all-day\"\n        [mwlCalendarTooltip]=\"\n          !tooltipDisabled\n            ? (weekEvent.event.title\n              | calendarEventTitle\n                : (daysInWeek === 1 ? 'dayTooltip' : 'weekTooltip')\n                : weekEvent.tempEvent || weekEvent.event)\n            : ''\n        \"\n        [tooltipPlacement]=\"tooltipPlacement\"\n        [tooltipEvent]=\"weekEvent.tempEvent || weekEvent.event\"\n        [tooltipTemplate]=\"tooltipTemplate\"\n        [tooltipAppendToBody]=\"tooltipAppendToBody\"\n        [tooltipDelay]=\"tooltipDelay\"\n        (mwlClick)=\"eventClicked.emit({ sourceEvent: $event })\"\n        (mwlKeydownEnter)=\"eventClicked.emit({ sourceEvent: $event })\"\n        tabindex=\"0\"\n        role=\"application\"\n        [attr.aria-label]=\"\n          { event: weekEvent.tempEvent || weekEvent.event, locale: locale }\n            | calendarA11y: 'eventDescription'\n        \"\n        [style.background]=\"weekEvent.event.color.primary || 'red'\"\n      >\n        <mwl-calendar-event-actions\n          [event]=\"weekEvent.tempEvent || weekEvent.event\"\n          [customTemplate]=\"eventActionsTemplate\"\n        >\n        </mwl-calendar-event-actions>\n        &ngsp;\n        <div\n          class=\"cal-event-top-bar\"\n          *ngIf=\"!(weekEvent.tempEvent || weekEvent.event).allDay\"\n        >\n          <span class=\"cal-event-room-group\">Raum L30 / Gr. H1 - H24</span>\n          <div\n            class=\"cal-event-color\"\n            [ngStyle]=\"{ backgroundColor: weekEvent.event.color?.primary }\"\n          ></div>\n        </div>\n        <svg\n          class=\"all-day-event-icon\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n          fill=\"white\"\n          width=\"18px\"\n          height=\"18px\"\n        >\n          <path d=\"M0 0h24v24H0V0z\" fill=\"none\" />\n          <path\n            d=\"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H5.17L4 17.17V4h16v12zm-9-4h2v2h-2zm0-6h2v4h-2z\"\n          />\n        </svg>\n        <mwl-calendar-event-title\n          [event]=\"weekEvent.tempEvent || weekEvent.event\"\n          [customTemplate]=\"eventTitleTemplate\"\n          [view]=\"daysInWeek === 1 ? 'day' : 'week'\"\n        >\n        </mwl-calendar-event-title>\n      </div>\n    </ng-template>\n\n    <ng-template\n      [ngTemplateOutlet]=\"\n        customTemplate ||\n        (weekEvent.event && weekEvent.event.allDay\n          ? allDayTemplate\n          : defaultTemplate)\n      \"\n      [ngTemplateOutletContext]=\"{\n        weekEvent: weekEvent,\n        tooltipPlacement: tooltipPlacement,\n        eventClicked: eventClicked,\n        tooltipTemplate: tooltipTemplate,\n        tooltipAppendToBody: tooltipAppendToBody,\n        tooltipDisabled: tooltipDisabled,\n        tooltipDelay: tooltipDelay,\n        column: column,\n        daysInWeek: daysInWeek\n      }\"\n    >\n    </ng-template>\n  `,\n})\nexport class CalendarWeekViewEventComponent implements OnChanges {\n  @Input() locale: string;\n\n  @Input() hourSegmentHeight: number;\n\n  @Input() weekEvent: MCWeekViewAllDayEvent | MCWeekViewTimeEvent;\n\n  @Input() tooltipPlacement: PlacementArray;\n\n  @Input() tooltipAppendToBody: boolean;\n\n  @Input() tooltipDisabled: boolean = true;\n\n  @Input() tooltipDelay: number | null;\n\n  @Input() customTemplate: TemplateRef<any>;\n\n  @Input() eventTitleTemplate: TemplateRef<any>;\n\n  @Input() eventActionsTemplate: TemplateRef<any>;\n\n  @Input() tooltipTemplate: TemplateRef<any>;\n\n  @Input() column: MCWeekViewHourColumn;\n\n  @Input() daysInWeek: number;\n\n  @Output() eventClicked = new EventEmitter<{\n    sourceEvent: MouseEvent | any;\n    isQuicklink?: boolean;\n  }>();\n\n  duration = 0;\n\n  isLive = false;\n\n  ngOnChanges() {\n    const diff =\n      this.weekEvent.event.end.getTime() - this.weekEvent.event.start.getTime();\n    this.duration = Math.round(diff / 60000);\n\n    setInterval(() => {\n      this.isLive =\n        this.weekEvent.event.videoURL &&\n        new Date() >= this.weekEvent.event.start &&\n        new Date() < this.weekEvent.event.end;\n    }, 60);\n  }\n\n\n\n  navigateToLiveStream() {\n    this.eventClicked.emit({sourceEvent: this.weekEvent.event.videoURL, isQuicklink : true});\n  }\n}\n","import {\n  Component,\n  EventEmitter,\n  Input,\n  Output,\n  TemplateRef\n} from '@angular/core';\nimport { MCEvent, MCWeekDay } from '../../utilities/mc-calendar-utils';\nimport { trackByWeekDayHeaderDate } from '../common/util';\n\n@Component({\n  selector: 'mwl-calendar-week-view-header',\n  template: `\n    <ng-template\n      #defaultTemplate\n      let-days=\"days\"\n      let-locale=\"locale\"\n      let-dayHeaderClicked=\"dayHeaderClicked\"\n      let-eventDropped=\"eventDropped\"\n      let-trackByWeekDayHeaderDate=\"trackByWeekDayHeaderDate\"\n      let-dragEnter=\"dragEnter\"\n    >\n      <div class=\"cal-day-headers\" role=\"row\">\n        <div\n          class=\"cal-header\"\n          *ngFor=\"let day of days; trackBy: trackByWeekDayHeaderDate\"\n          [class.cal-past]=\"day.isPast\"\n          [class.cal-today]=\"day.isToday\"\n          [class.cal-future]=\"day.isFuture\"\n          [class.cal-weekend]=\"day.isWeekend\"\n          [ngClass]=\"day.cssClass\"\n          (mwlClick)=\"dayHeaderClicked.emit({ day: day, sourceEvent: $event })\"\n          mwlDroppable\n          dragOverClass=\"cal-drag-over\"\n          (drop)=\"\n            eventDropped.emit({\n              event: $event.dropData.event,\n              newStart: day.date\n            })\n          \"\n          (dragEnter)=\"dragEnter.emit({ date: day.date })\"\n          tabindex=\"0\"\n          role=\"columnheader\"\n        >\n          <b>{{ day.date | calendarDate: 'weekViewColumnHeader':locale }}</b\n          ><br />\n          <span>{{\n            day.date | calendarDate: 'weekViewColumnSubHeader':locale\n          }}</span>\n        </div>\n      </div>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]=\"customTemplate || defaultTemplate\"\n      [ngTemplateOutletContext]=\"{\n        days: days,\n        locale: locale,\n        dayHeaderClicked: dayHeaderClicked,\n        eventDropped: eventDropped,\n        dragEnter: dragEnter,\n        trackByWeekDayHeaderDate: trackByWeekDayHeaderDate\n      }\"\n    >\n    </ng-template>\n  `,\n})\nexport class CalendarWeekViewHeaderComponent {\n  @Input() days: MCWeekDay[];\n\n  @Input() locale: string;\n\n  @Input() customTemplate: TemplateRef<any>;\n\n  @Output() dayHeaderClicked = new EventEmitter<{\n    day: MCWeekDay;\n    sourceEvent: MouseEvent;\n  }>();\n\n  @Output() eventDropped = new EventEmitter<{\n    event: MCEvent;\n    newStart: Date;\n  }>();\n\n  @Output() dragEnter = new EventEmitter<{ date: Date }>();\n\n  trackByWeekDayHeaderDate = trackByWeekDayHeaderDate;\n}\n","import { Component, Input, TemplateRef } from '@angular/core';\nimport { MCWeekViewHourSegment } from '../../utilities/mc-calendar-utils';\n\n@Component({\n  selector: 'mwl-calendar-week-view-hour-segment',\n  template: `\n    <ng-template\n      #defaultTemplate\n      let-segment=\"segment\"\n      let-locale=\"locale\"\n      let-segmentHeight=\"segmentHeight\"\n      let-isTimeLabel=\"isTimeLabel\"\n      let-daysInWeek=\"daysInWeek\"\n    >\n      <div\n        [attr.aria-hidden]=\"\n          {}\n            | calendarA11y\n              : (daysInWeek === 1\n                  ? 'hideDayHourSegment'\n                  : 'hideWeekHourSegment')\n        \"\n        class=\"cal-hour-segment\"\n        [style.height.px]=\"segmentHeight\"\n        [class.cal-hour-start]=\"segment.isStart\"\n        [class.cal-after-hour-start]=\"!segment.isStart\"\n        [ngClass]=\"segment.cssClass\"\n      >\n        <div class=\"cal-time\" *ngIf=\"isTimeLabel\" [style.height.px]=\"segmentHeight * 2\">\n          {{\n            segment.displayDate\n              | calendarDate\n                : (daysInWeek === 1 ? 'dayViewHour' : 'weekViewHour')\n                : locale\n          }}\n        </div>\n      </div>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]=\"customTemplate || defaultTemplate\"\n      [ngTemplateOutletContext]=\"{\n        segment: segment,\n        locale: locale,\n        segmentHeight: segmentHeight,\n        isTimeLabel: isTimeLabel,\n        daysInWeek: daysInWeek\n      }\"\n    >\n    </ng-template>\n  `,\n})\nexport class CalendarWeekViewHourSegmentComponent {\n  @Input() segment: MCWeekViewHourSegment;\n\n  @Input() segmentHeight: number;\n\n  @Input() locale: string;\n\n  @Input() isTimeLabel: boolean;\n\n  @Input() daysInWeek: number;\n\n  @Input() customTemplate: TemplateRef<any>;\n}\n","import { isInside, isWithinThreshold } from './util';\nimport { ValidateDragParams } from 'angular-draggable-droppable';\n\nexport class CalendarDragHelper {\n  private readonly startPosition: ClientRect;\n\n  constructor(\n    private dragContainerElement: HTMLElement,\n    draggableElement: HTMLElement\n  ) {\n    this.startPosition = draggableElement.getBoundingClientRect();\n  }\n\n  validateDrag({\n    x,\n    y,\n    snapDraggedEvents,\n    dragAlreadyMoved,\n    transform,\n  }: {\n    x: number;\n    y: number;\n    snapDraggedEvents: boolean;\n    dragAlreadyMoved: boolean;\n    transform: ValidateDragParams['transform'];\n  }): boolean {\n    if (snapDraggedEvents) {\n      const newRect: ClientRect = Object.assign({}, this.startPosition, {\n        left: this.startPosition.left + transform.x,\n        right: this.startPosition.right + transform.x,\n        top: this.startPosition.top + transform.y,\n        bottom: this.startPosition.bottom + transform.y,\n      });\n\n      return (\n        (isWithinThreshold({ x, y }) || dragAlreadyMoved) &&\n        isInside(this.dragContainerElement.getBoundingClientRect(), newRect)\n      );\n    } else {\n      return isWithinThreshold({ x, y }) || dragAlreadyMoved;\n    }\n  }\n}\n","import { isInside } from './util';\n\nexport class CalendarResizeHelper {\n  constructor(\n    private resizeContainerElement: HTMLElement,\n    private minWidth?: number\n  ) {}\n\n  validateResize({ rectangle }: { rectangle: ClientRect }): boolean {\n    if (\n      this.minWidth &&\n      Math.ceil(rectangle.width) < Math.ceil(this.minWidth)\n    ) {\n      return false;\n    }\n\n    return isInside(\n      this.resizeContainerElement.getBoundingClientRect(),\n      rectangle\n    );\n  }\n}\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  ChangeDetectorRef,\n  OnChanges,\n  OnInit,\n  OnDestroy,\n  LOCALE_ID,\n  Inject,\n  TemplateRef,\n} from '@angular/core';\nimport { Subject, Subscription } from 'rxjs';\n\nimport { ResizeEvent } from 'angular-resizable-element';\nimport { CalendarDragHelper } from '../common/calendar-drag-helper.provider';\nimport { CalendarResizeHelper } from '../common/calendar-resize-helper.provider';\nimport {\n  CalendarEventTimesChangedEvent,\n  CalendarEventTimesChangedEventType,\n} from '../common/calendar-event-times-changed-event.interface';\nimport { CalendarUtils } from '../common/calendar-utils.provider';\nimport {\n  validateEvents,\n  roundToNearest,\n  trackByWeekDayHeaderDate,\n  trackByHourSegment,\n  trackByHour,\n  getMinutesMoved,\n  getDefaultEventEnd,\n  getMinimumEventHeightInMinutes,\n  addDaysWithExclusions,\n  isDraggedWithinPeriod,\n  shouldFireDroppedEvent,\n  getWeekViewPeriod,\n  trackByWeekAllDayEvent,\n  trackByWeekTimeEvent,\n} from '../common/util';\nimport { DateAdapter } from '../../date-adapters/date-adapter';\nimport {\n  DragEndEvent,\n  DropEvent,\n  DragMoveEvent,\n  ValidateDrag,\n} from 'angular-draggable-droppable';\nimport { PlacementArray } from 'positioning';\nimport {\n  MCEvent,\n  MCWeekDay,\n  MCWeekView,\n  MCWeekViewAllDayEvent,\n  MCWeekViewHourColumn,\n  MCWeekViewAllDayEventRow,\n  MCWeekViewTimeEvent,\n} from '../../utilities/mc-calendar-utils';\n\nexport interface WeekViewAllDayEventResize {\n  originalOffset: number;\n  originalSpan: number;\n  edge: string;\n}\n\nexport interface CalendarWeekViewBeforeRenderEvent extends MCWeekView {\n  header: MCWeekDay[];\n}\n\n/**\n * Shows all events on a given week. Example usage:\n *\n * ```typescript\n * <mwl-calendar-week-view\n *  [viewDate]=\"viewDate\"\n *  [events]=\"events\">\n * </mwl-calendar-week-view>\n * ```\n */\n@Component({\n  selector: 'mwl-calendar-week-view',\n  template: `\n    <div class=\"cal-week-view\" role=\"grid\">\n      <mwl-calendar-week-view-header\n        style=\"display: none;\"\n        [days]=\"days\"\n        [locale]=\"locale\"\n        [customTemplate]=\"headerTemplate\"\n        (dayHeaderClicked)=\"dayHeaderClicked.emit($event)\"\n        (eventDropped)=\"\n          eventDropped({ dropData: $event }, $event.newStart, true)\n        \"\n        (dragEnter)=\"dateDragEnter($event.date)\"\n      >\n      </mwl-calendar-week-view-header>\n      <div\n        class=\"cal-all-day-events\"\n        #allDayEventsContainer\n        *ngIf=\"view.allDayEventRows.length > 0\"\n        mwlDroppable\n        (dragEnter)=\"dragEnter('allDay')\"\n        (dragLeave)=\"dragLeave('allDay')\"\n      >\n        <div class=\"cal-day-columns\">\n          <div\n            class=\"cal-time-label-column\"\n            [ngTemplateOutlet]=\"allDayEventsLabelTemplate\"\n          ></div>\n          <div\n            class=\"cal-day-column\"\n            *ngFor=\"let day of days; trackBy: trackByWeekDayHeaderDate\"\n            mwlDroppable\n            dragOverClass=\"cal-drag-over\"\n            (drop)=\"eventDropped($event, day.date, true)\"\n            (dragEnter)=\"dateDragEnter(day.date)\"\n          ></div>\n        </div>\n        <div\n          *ngFor=\"let eventRow of view.allDayEventRows; trackBy: trackById\"\n          #eventRowContainer\n          class=\"cal-events-row\"\n        >\n          <div\n            *ngFor=\"\n              let allDayEvent of eventRow.row;\n              trackBy: trackByWeekAllDayEvent\n            \"\n            #event\n            class=\"cal-event-container\"\n            [class.cal-draggable]=\"\n              allDayEvent.event.draggable && allDayEventResizes.size === 0\n            \"\n            [class.cal-starts-within-week]=\"!allDayEvent.startsBeforeWeek\"\n            [class.cal-ends-within-week]=\"!allDayEvent.endsAfterWeek\"\n            [ngClass]=\"allDayEvent.event?.cssClass\"\n            [style.width.%]=\"(100 / days.length) * allDayEvent.span\"\n            [style.marginLeft.%]=\"(100 / days.length) * allDayEvent.offset\"\n            mwlResizable\n            [resizeSnapGrid]=\"{ left: dayColumnWidth, right: dayColumnWidth }\"\n            [validateResize]=\"validateResize\"\n            (resizeStart)=\"\n              allDayEventResizeStarted(eventRowContainer, allDayEvent, $event)\n            \"\n            (resizing)=\"\n              allDayEventResizing(allDayEvent, $event, dayColumnWidth)\n            \"\n            (resizeEnd)=\"allDayEventResizeEnded(allDayEvent)\"\n            mwlDraggable\n            dragActiveClass=\"cal-drag-active\"\n            [dropData]=\"{ event: allDayEvent.event, calendarId: calendarId }\"\n            [dragAxis]=\"{\n              x: allDayEvent.event.draggable && allDayEventResizes.size === 0,\n              y:\n                !snapDraggedEvents &&\n                allDayEvent.event.draggable &&\n                allDayEventResizes.size === 0\n            }\"\n            [dragSnapGrid]=\"snapDraggedEvents ? { x: dayColumnWidth } : {}\"\n            [validateDrag]=\"validateDrag\"\n            [touchStartLongPress]=\"{ delay: 300, delta: 30 }\"\n            (dragStart)=\"dragStarted(eventRowContainer, event)\"\n            (dragging)=\"allDayEventDragMove()\"\n            (dragEnd)=\"dragEnded(allDayEvent, $event, dayColumnWidth)\"\n          >\n            <div\n              class=\"cal-resize-handle cal-resize-handle-before-start\"\n              *ngIf=\"\n                allDayEvent.event?.resizable?.beforeStart &&\n                !allDayEvent.startsBeforeWeek\n              \"\n              mwlResizeHandle\n              [resizeEdges]=\"{ left: true }\"\n            ></div>\n            <mwl-calendar-week-view-event\n              [locale]=\"locale\"\n              [hourSegmentHeight]=\"hourSegmentHeight\"\n              [weekEvent]=\"allDayEvent\"\n              [tooltipPlacement]=\"tooltipPlacement\"\n              [tooltipTemplate]=\"tooltipTemplate\"\n              [tooltipAppendToBody]=\"tooltipAppendToBody\"\n              [tooltipDelay]=\"tooltipDelay\"\n              [customTemplate]=\"eventTemplate\"\n              [eventTitleTemplate]=\"eventTitleTemplate\"\n              [eventActionsTemplate]=\"eventActionsTemplate\"\n              [daysInWeek]=\"daysInWeek\"\n              (eventClicked)=\"\n                eventClicked.emit({\n                  event: allDayEvent.event,\n                  sourceEvent: $event.sourceEvent\n                })\n              \"\n            >\n            </mwl-calendar-week-view-event>\n            <div\n              class=\"cal-resize-handle cal-resize-handle-after-end\"\n              *ngIf=\"\n                allDayEvent.event?.resizable?.afterEnd &&\n                !allDayEvent.endsAfterWeek\n              \"\n              mwlResizeHandle\n              [resizeEdges]=\"{ right: true }\"\n            ></div>\n          </div>\n        </div>\n      </div>\n      <div\n        class=\"cal-time-events\"\n        mwlDroppable\n        (dragEnter)=\"dragEnter('time')\"\n        (dragLeave)=\"dragLeave('time')\"\n      >\n        <div\n          class=\"cal-time-label-column\"\n          *ngIf=\"view.hourColumns.length > 0 && daysInWeek !== 1\"\n        >\n          <div\n            *ngFor=\"\n              let hour of view.hourColumns[0].hours;\n              trackBy: trackByHour;\n              let odd = odd\n            \"\n            class=\"cal-hour\"\n            [class.cal-hour-odd]=\"odd\"\n          >\n            <mwl-calendar-week-view-hour-segment\n              *ngFor=\"let segment of hour.segments; trackBy: trackByHourSegment\"\n              [style.height.px]=\"hourSegmentHeight\"\n              [segment]=\"segment\"\n              [segmentHeight]=\"hourSegmentHeight\"\n              [locale]=\"locale\"\n              [customTemplate]=\"hourSegmentTemplate\"\n              [isTimeLabel]=\"true\"\n              [daysInWeek]=\"daysInWeek\"\n            >\n            </mwl-calendar-week-view-hour-segment>\n          </div>\n        </div>\n        <div\n          class=\"cal-day-columns\"\n          [class.cal-resize-active]=\"timeEventResizes.size > 0\"\n          #dayColumns\n        >\n          <div\n            class=\"cal-day-column\"\n            *ngFor=\"let column of view.hourColumns; trackBy: trackByHourColumn\"\n          >\n            <mwl-calendar-week-view-current-time-marker\n              [columnDate]=\"column.date\"\n              [dayStartHour]=\"dayStartHour\"\n              [dayStartMinute]=\"dayStartMinute\"\n              [dayEndHour]=\"dayEndHour\"\n              [dayEndMinute]=\"dayEndMinute\"\n              [hourSegments]=\"hourSegments\"\n              [hourSegmentHeight]=\"hourSegmentHeight\"\n              [customTemplate]=\"currentTimeMarkerTemplate\"\n            ></mwl-calendar-week-view-current-time-marker>\n            <div class=\"cal-events-container\">\n              <div\n                *ngFor=\"\n                  let timeEvent of column.events;\n                  trackBy: trackByWeekTimeEvent\n                \"\n                #event\n                class=\"cal-event-container\"\n                id=\"cal-event-{{ timeEvent.event.id }}\"\n                [class.cal-draggable]=\"\n                  timeEvent.event.draggable && timeEventResizes.size === 0\n                \"\n                [class.cal-starts-within-day]=\"!timeEvent.startsBeforeDay\"\n                [class.cal-ends-within-day]=\"!timeEvent.endsAfterDay\"\n                [ngClass]=\"timeEvent.event.cssClass\"\n                [hidden]=\"timeEvent.height === 0 && timeEvent.width === 0\"\n                [style.top.px]=\"timeEvent.top\"\n                [style.height.px]=\"timeEvent.height\"\n                [style.left.%]=\"timeEvent.left\"\n                [style.width.%]=\"timeEvent.width\"\n                mwlResizable\n                [resizeSnapGrid]=\"{\n                  left: dayColumnWidth,\n                  right: dayColumnWidth,\n                  top: eventSnapSize || hourSegmentHeight,\n                  bottom: eventSnapSize || hourSegmentHeight\n                }\"\n                [validateResize]=\"validateResize\"\n                [allowNegativeResizes]=\"true\"\n                (resizeStart)=\"\n                  timeEventResizeStarted(dayColumns, timeEvent, $event)\n                \"\n                (resizing)=\"timeEventResizing(timeEvent, $event)\"\n                (resizeEnd)=\"timeEventResizeEnded(timeEvent)\"\n                mwlDraggable\n                dragActiveClass=\"cal-drag-active\"\n                [dropData]=\"{ event: timeEvent.event, calendarId: calendarId }\"\n                [dragAxis]=\"{\n                  x: timeEvent.event.draggable && timeEventResizes.size === 0,\n                  y: timeEvent.event.draggable && timeEventResizes.size === 0\n                }\"\n                [dragSnapGrid]=\"\n                  snapDraggedEvents\n                    ? {\n                        x: dayColumnWidth,\n                        y: eventSnapSize || hourSegmentHeight\n                      }\n                    : {}\n                \"\n                [touchStartLongPress]=\"{ delay: 300, delta: 30 }\"\n                [ghostDragEnabled]=\"!snapDraggedEvents\"\n                [ghostElementTemplate]=\"weekEventTemplate\"\n                [validateDrag]=\"validateDrag\"\n                (dragStart)=\"dragStarted(dayColumns, event, timeEvent)\"\n                (dragging)=\"dragMove(timeEvent, $event)\"\n                (dragEnd)=\"dragEnded(timeEvent, $event, dayColumnWidth, true)\"\n              >\n                <div\n                  class=\"cal-resize-handle cal-resize-handle-before-start\"\n                  *ngIf=\"\n                    timeEvent.event?.resizable?.beforeStart &&\n                    !timeEvent.startsBeforeDay\n                  \"\n                  mwlResizeHandle\n                  [resizeEdges]=\"{\n                    left: true,\n                    top: true\n                  }\"\n                ></div>\n                <ng-template\n                  [ngTemplateOutlet]=\"weekEventTemplate\"\n                ></ng-template>\n                <ng-template #weekEventTemplate>\n                  <mwl-calendar-week-view-event\n                    [locale]=\"locale\"\n                    [hourSegmentHeight]=\"hourSegmentHeight\"\n                    [weekEvent]=\"timeEvent\"\n                    [tooltipPlacement]=\"tooltipPlacement\"\n                    [tooltipTemplate]=\"tooltipTemplate\"\n                    [tooltipAppendToBody]=\"tooltipAppendToBody\"\n                    [tooltipDisabled]=\"\n                      tooltipDisabled || dragActive || timeEventResizes.size > 0\n                    \"\n                    [tooltipDelay]=\"tooltipDelay\"\n                    [customTemplate]=\"eventTemplate\"\n                    [eventTitleTemplate]=\"eventTitleTemplate\"\n                    [eventActionsTemplate]=\"eventActionsTemplate\"\n                    [column]=\"column\"\n                    [daysInWeek]=\"daysInWeek\"\n                    (eventClicked)=\"\n                      eventClicked.emit({\n                        event: timeEvent.event,\n                        sourceEvent: $event.sourceEvent\n                      })\n                    \"\n                  >\n                  </mwl-calendar-week-view-event>\n                </ng-template>\n                <div\n                  class=\"cal-resize-handle cal-resize-handle-after-end\"\n                  *ngIf=\"\n                    timeEvent.event?.resizable?.afterEnd &&\n                    !timeEvent.endsAfterDay\n                  \"\n                  mwlResizeHandle\n                  [resizeEdges]=\"{\n                    right: true,\n                    bottom: true\n                  }\"\n                ></div>\n              </div>\n            </div>\n\n            <div\n              *ngFor=\"\n                let hour of column.hours;\n                trackBy: trackByHour;\n                let odd = odd\n              \"\n              class=\"cal-hour\"\n              [class.cal-hour-odd]=\"odd\"\n            >\n              <mwl-calendar-week-view-hour-segment\n                *ngFor=\"\n                  let segment of hour.segments;\n                  trackBy: trackByHourSegment\n                \"\n                [style.height.px]=\"hourSegmentHeight\"\n                [segment]=\"segment\"\n                [segmentHeight]=\"hourSegmentHeight\"\n                [locale]=\"locale\"\n                [customTemplate]=\"hourSegmentTemplate\"\n                [daysInWeek]=\"daysInWeek\"\n                (mwlClick)=\"\n                  hourSegmentClicked.emit({\n                    date: segment.date,\n                    sourceEvent: $event\n                  })\n                \"\n                [clickListenerDisabled]=\"\n                  hourSegmentClicked.observers.length === 0\n                \"\n                mwlDroppable\n                [dragOverClass]=\"\n                  !dragActive || !snapDraggedEvents ? 'cal-drag-over' : null\n                \"\n                dragActiveClass=\"cal-drag-active\"\n                (drop)=\"eventDropped($event, segment.date, false)\"\n                (dragEnter)=\"dateDragEnter(segment.date)\"\n                [isTimeLabel]=\"daysInWeek === 1\"\n              >\n              </mwl-calendar-week-view-hour-segment>\n            </div>\n          </div>\n        </div>\n        \n        <div\n          class=\"cal-time-label-column\" style=\"border-left: thin solid #e1e1e1;\"\n          *ngIf=\"view.hourColumns.length > 0 && daysInWeek !== 1\"\n        >\n          <div\n            *ngFor=\"\n              let hour of view.hourColumns[0].hours;\n              trackBy: trackByHour;\n              let odd = odd\n            \"\n            class=\"cal-hour\"\n            [class.cal-hour-odd]=\"odd\"\n          >\n            <mwl-calendar-week-view-hour-segment\n              *ngFor=\"let segment of hour.segments; trackBy: trackByHourSegment\"\n              [style.height.px]=\"hourSegmentHeight\"\n              [segment]=\"segment\"\n              [segmentHeight]=\"hourSegmentHeight\"\n              [locale]=\"locale\"\n              [customTemplate]=\"hourSegmentTemplate\"\n              [isTimeLabel]=\"false\"\n              [daysInWeek]=\"daysInWeek\"\n            >\n            </mwl-calendar-week-view-hour-segment>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n})\nexport class CalendarWeekViewComponent implements OnChanges, OnInit, OnDestroy {\n  /**\n   * The current view date\n   */\n  @Input() viewDate: Date;\n\n  /**\n   * An array of events to display on view\n   * The schema is available here: https://github.com/mattlewis92/calendar-utils/blob/c51689985f59a271940e30bc4e2c4e1fee3fcb5c/src/calendarUtils.ts#L49-L63\n   */\n  @Input() events: MCEvent[] = [];\n\n  /**\n   * An array of day indexes (0 = sunday, 1 = monday etc) that will be hidden on the view\n   */\n  @Input() excludeDays: number[] = [];\n\n  /**\n   * An observable that when emitted on will re-render the current view\n   */\n  @Input() refresh: Subject<any>;\n\n  /**\n   * The locale used to format dates\n   */\n  @Input() locale: string;\n\n  @Input() tooltipDisabled: boolean;\n\n  /**\n   * The placement of the event tooltip\n   */\n  @Input() tooltipPlacement: PlacementArray = 'auto';\n\n  /**\n   * A custom template to use for the event tooltips\n   */\n  @Input() tooltipTemplate: TemplateRef<any>;\n\n  /**\n   * Whether to append tooltips to the body or next to the trigger element\n   */\n  @Input() tooltipAppendToBody: boolean = true;\n\n  /**\n   * The delay in milliseconds before the tooltip should be displayed. If not provided the tooltip\n   * will be displayed immediately.\n   */\n  @Input() tooltipDelay: number | null = null;\n\n  /**\n   * The start number of the week.\n   * This is ignored when the `daysInWeek` input is also set as the `viewDate` will be used as the start of the week instead.\n   * Note, you should also pass this to the calendar title pipe so it shows the same days: {{ viewDate | calendarDate:(view + 'ViewTitle'):locale:weekStartsOn }}\n   */\n  @Input() weekStartsOn: number;\n\n  /**\n   * A custom template to use to replace the header\n   */\n  @Input() headerTemplate: TemplateRef<any>;\n\n  /**\n   * A custom template to use for week view events\n   */\n  @Input() eventTemplate: TemplateRef<any>;\n\n  /**\n   * A custom template to use for event titles\n   */\n  @Input() eventTitleTemplate: TemplateRef<any>;\n\n  /**\n   * A custom template to use for event actions\n   */\n  @Input() eventActionsTemplate: TemplateRef<any>;\n\n  /**\n   * The precision to display events.\n   * `days` will round event start and end dates to the nearest day and `minutes` will not do this rounding\n   */\n  @Input() precision: 'days' | 'minutes' = 'days';\n\n  /**\n   * An array of day indexes (0 = sunday, 1 = monday etc) that indicate which days are weekends\n   */\n  @Input() weekendDays: number[];\n\n  /**\n   * Whether to snap events to a grid when dragging\n   */\n  @Input() snapDraggedEvents: boolean = true;\n\n  /**\n   * The number of segments in an hour. Must be <= 6\n   */\n  @Input() hourSegments: number = 2;\n\n  /**\n   * The height in pixels of each hour segment\n   */\n  @Input() hourSegmentHeight: number = 30;\n\n  /**\n   * The day start hours in 24 hour time. Must be 0-23\n   */\n  @Input() dayStartHour: number = 0;\n\n  /**\n   * The day start minutes. Must be 0-59\n   */\n  @Input() dayStartMinute: number = 0;\n\n  /**\n   * The day end hours in 24 hour time. Must be 0-23\n   */\n  @Input() dayEndHour: number = 23;\n\n  /**\n   * The day end minutes. Must be 0-59\n   */\n  @Input() dayEndMinute: number = 59;\n\n  /**\n   * A custom template to use to replace the hour segment\n   */\n  @Input() hourSegmentTemplate: TemplateRef<any>;\n\n  /**\n   * The grid size to snap resizing and dragging of hourly events to\n   */\n  @Input() eventSnapSize: number;\n\n  /**\n   * A custom template to use for the all day events label text\n   */\n  @Input() allDayEventsLabelTemplate: TemplateRef<any>;\n\n  /**\n   * The number of days in a week. Can be used to create a shorter or longer week view.\n   * The first day of the week will always be the `viewDate` and `weekStartsOn` if set will be ignored\n   */\n  @Input() daysInWeek: number;\n\n  /**\n   * A custom template to use for the current time marker\n   */\n  @Input() currentTimeMarkerTemplate: TemplateRef<any>;\n\n  /**\n   * Called when a header week day is clicked. Adding a `cssClass` property on `$event.day` will add that class to the header element\n   */\n  @Output() dayHeaderClicked = new EventEmitter<{\n    day: MCWeekDay;\n    sourceEvent: MouseEvent;\n  }>();\n\n  /**\n   * Called when the event title is clicked\n   */\n  @Output() eventClicked = new EventEmitter<{\n    event: MCEvent;\n    sourceEvent: MouseEvent | any;\n  }>();\n\n  /**\n   * Called when an event is resized or dragged and dropped\n   */\n  @Output() eventTimesChanged = new EventEmitter<\n    CalendarEventTimesChangedEvent\n  >();\n\n  /**\n   * An output that will be called before the view is rendered for the current week.\n   * If you add the `cssClass` property to a day in the header it will add that class to the cell element in the template\n   */\n  @Output() beforeViewRender = new EventEmitter<\n    CalendarWeekViewBeforeRenderEvent\n  >();\n\n  /**\n   * Called when an hour segment is clicked\n   */\n  @Output() hourSegmentClicked = new EventEmitter<{\n    date: Date;\n    sourceEvent: MouseEvent;\n  }>();\n\n  /**\n   * @hidden\n   */\n  days: MCWeekDay[];\n\n  /**\n   * @hidden\n   */\n  view: MCWeekView;\n\n  /**\n   * @hidden\n   */\n  refreshSubscription: Subscription;\n\n  /**\n   * @hidden\n   */\n  allDayEventResizes: Map<\n    MCWeekViewAllDayEvent,\n    WeekViewAllDayEventResize\n  > = new Map();\n\n  /**\n   * @hidden\n   */\n  timeEventResizes: Map<MCEvent, ResizeEvent> = new Map();\n\n  /**\n   * @hidden\n   */\n  eventDragEnterByType = {\n    allDay: 0,\n    time: 0,\n  };\n\n  /**\n   * @hidden\n   */\n  dragActive = false;\n\n  /**\n   * @hidden\n   */\n  dragAlreadyMoved = false;\n\n  /**\n   * @hidden\n   */\n  validateDrag: ValidateDrag;\n\n  /**\n   * @hidden\n   */\n  validateResize: (args: any) => boolean;\n\n  /**\n   * @hidden\n   */\n  dayColumnWidth: number;\n\n  /**\n   * @hidden\n   */\n  calendarId = Symbol('angular calendar week view id');\n\n  /**\n   * @hidden\n   */\n  lastDraggedEvent: MCEvent;\n\n  /**\n   * @hidden\n   */\n  trackByWeekDayHeaderDate = trackByWeekDayHeaderDate;\n\n  /**\n   * @hidden\n   */\n  trackByHourSegment = trackByHourSegment;\n\n  /**\n   * @hidden\n   */\n  trackByHour = trackByHour;\n\n  /**\n   * @hidden\n   */\n  trackByWeekAllDayEvent = trackByWeekAllDayEvent;\n\n  /**\n   * @hidden\n   */\n  trackByWeekTimeEvent = trackByWeekTimeEvent;\n\n  /**\n   * @hidden\n   */\n  private lastDragEnterDate: Date;\n\n  /**\n   * @hidden\n   */\n  constructor(\n    protected cdr: ChangeDetectorRef,\n    protected utils: CalendarUtils,\n    @Inject(LOCALE_ID) locale: string,\n    protected dateAdapter: DateAdapter\n  ) {\n    this.locale = locale;\n  }\n\n  /**\n   * @hidden\n   */\n  trackByHourColumn = (index: number, column: MCWeekViewHourColumn) =>\n    column.hours[0] ? column.hours[0].segments[0].date.toISOString() : column;\n\n  /**\n   * @hidden\n   */\n  trackById = (index: number, row: MCWeekViewAllDayEventRow) => row.id;\n\n  /**\n   * @hidden\n   */\n  ngOnInit(): void {\n    if (this.refresh) {\n      this.refreshSubscription = this.refresh.subscribe(() => {\n        this.refreshAll();\n        this.cdr.markForCheck();\n      });\n    }\n  }\n\n  /**\n   * @hidden\n   */\n  ngOnChanges(changes: any): void {\n    const refreshHeader =\n      changes.viewDate ||\n      changes.excludeDays ||\n      changes.weekendDays ||\n      changes.daysInWeek ||\n      changes.weekStartsOn;\n\n    const refreshBody =\n      changes.viewDate ||\n      changes.dayStartHour ||\n      changes.dayStartMinute ||\n      changes.dayEndHour ||\n      changes.dayEndMinute ||\n      changes.hourSegments ||\n      changes.weekStartsOn ||\n      changes.weekendDays ||\n      changes.excludeDays ||\n      changes.hourSegmentHeight ||\n      changes.events ||\n      changes.daysInWeek;\n\n    if (refreshHeader) {\n      this.refreshHeader();\n    }\n\n    if (changes.events) {\n      validateEvents(this.events);\n    }\n\n    if (refreshBody) {\n      this.refreshBody();\n    }\n\n    if (refreshHeader || refreshBody) {\n      this.emitBeforeViewRender();\n    }\n  }\n\n  /**\n   * @hidden\n   */\n  ngOnDestroy(): void {\n    if (this.refreshSubscription) {\n      this.refreshSubscription.unsubscribe();\n    }\n  }\n\n  /**\n   * @hidden\n   */\n  timeEventResizeStarted(\n    eventsContainer: HTMLElement,\n    timeEvent: MCWeekViewTimeEvent,\n    resizeEvent: ResizeEvent\n  ): void {\n    this.timeEventResizes.set(timeEvent.event, resizeEvent);\n    this.resizeStarted(eventsContainer);\n  }\n\n  /**\n   * @hidden\n   */\n  timeEventResizing(timeEvent: MCWeekViewTimeEvent, resizeEvent: ResizeEvent) {\n    this.timeEventResizes.set(timeEvent.event, resizeEvent);\n    const adjustedEvents = new Map<MCEvent, MCEvent>();\n\n    const tempEvents = [...this.events];\n\n    this.timeEventResizes.forEach((lastResizeEvent, event) => {\n      const newEventDates = this.getTimeEventResizedDates(\n        event,\n        lastResizeEvent\n      );\n      const adjustedEvent = { ...event, ...newEventDates };\n      adjustedEvents.set(adjustedEvent, event);\n      const eventIndex = tempEvents.indexOf(event);\n      tempEvents[eventIndex] = adjustedEvent;\n    });\n\n    this.restoreOriginalEvents(tempEvents, adjustedEvents, true);\n  }\n\n  /**\n   * @hidden\n   */\n  timeEventResizeEnded(timeEvent: MCWeekViewTimeEvent) {\n    this.view = this.getWeekView(this.events);\n    const lastResizeEvent = this.timeEventResizes.get(timeEvent.event);\n    if (lastResizeEvent) {\n      this.timeEventResizes.delete(timeEvent.event);\n      const newEventDates = this.getTimeEventResizedDates(\n        timeEvent.event,\n        lastResizeEvent\n      );\n      this.eventTimesChanged.emit({\n        newStart: newEventDates.start,\n        newEnd: newEventDates.end,\n        event: timeEvent.event,\n        type: CalendarEventTimesChangedEventType.Resize,\n      });\n    }\n  }\n\n  /**\n   * @hidden\n   */\n  allDayEventResizeStarted(\n    allDayEventsContainer: HTMLElement,\n    allDayEvent: MCWeekViewAllDayEvent,\n    resizeEvent: ResizeEvent\n  ): void {\n    this.allDayEventResizes.set(allDayEvent, {\n      originalOffset: allDayEvent.offset,\n      originalSpan: allDayEvent.span,\n      edge: typeof resizeEvent.edges.left !== 'undefined' ? 'left' : 'right',\n    });\n    this.resizeStarted(\n      allDayEventsContainer,\n      this.getDayColumnWidth(allDayEventsContainer)\n    );\n  }\n\n  /**\n   * @hidden\n   */\n  allDayEventResizing(\n    allDayEvent: MCWeekViewAllDayEvent,\n    resizeEvent: ResizeEvent,\n    dayWidth: number\n  ): void {\n    const currentResize: WeekViewAllDayEventResize = this.allDayEventResizes.get(\n      allDayEvent\n    );\n\n    if (typeof resizeEvent.edges.left !== 'undefined') {\n      const diff: number = Math.round(+resizeEvent.edges.left / dayWidth);\n      allDayEvent.offset = currentResize.originalOffset + diff;\n      allDayEvent.span = currentResize.originalSpan - diff;\n    } else if (typeof resizeEvent.edges.right !== 'undefined') {\n      const diff: number = Math.round(+resizeEvent.edges.right / dayWidth);\n      allDayEvent.span = currentResize.originalSpan + diff;\n    }\n  }\n\n  /**\n   * @hidden\n   */\n  allDayEventResizeEnded(allDayEvent: MCWeekViewAllDayEvent): void {\n    const currentResize: WeekViewAllDayEventResize = this.allDayEventResizes.get(\n      allDayEvent\n    );\n\n    if (currentResize) {\n      const allDayEventResizingBeforeStart = currentResize.edge === 'left';\n      let daysDiff: number;\n      if (allDayEventResizingBeforeStart) {\n        daysDiff = allDayEvent.offset - currentResize.originalOffset;\n      } else {\n        daysDiff = allDayEvent.span - currentResize.originalSpan;\n      }\n\n      allDayEvent.offset = currentResize.originalOffset;\n      allDayEvent.span = currentResize.originalSpan;\n\n      let newStart: Date = allDayEvent.event.start;\n      let newEnd: Date = allDayEvent.event.end || allDayEvent.event.start;\n      if (allDayEventResizingBeforeStart) {\n        newStart = addDaysWithExclusions(\n          this.dateAdapter,\n          newStart,\n          daysDiff,\n          this.excludeDays\n        );\n      } else {\n        newEnd = addDaysWithExclusions(\n          this.dateAdapter,\n          newEnd,\n          daysDiff,\n          this.excludeDays\n        );\n      }\n\n      this.eventTimesChanged.emit({\n        newStart,\n        newEnd,\n        event: allDayEvent.event,\n        type: CalendarEventTimesChangedEventType.Resize,\n      });\n      this.allDayEventResizes.delete(allDayEvent);\n    }\n  }\n\n  /**\n   * @hidden\n   */\n  getDayColumnWidth(eventRowContainer: HTMLElement): number {\n    return Math.floor(eventRowContainer.offsetWidth / this.days.length);\n  }\n\n  /**\n   * @hidden\n   */\n  dateDragEnter(date: Date) {\n    this.lastDragEnterDate = date;\n  }\n\n  /**\n   * @hidden\n   */\n  eventDropped(\n    dropEvent: DropEvent<{ event?: MCEvent; calendarId?: symbol }>,\n    date: Date,\n    allDay: boolean\n  ): void {\n    if (\n      shouldFireDroppedEvent(dropEvent, date, allDay, this.calendarId) &&\n      this.lastDragEnterDate.getTime() === date.getTime() &&\n      (!this.snapDraggedEvents ||\n        dropEvent.dropData.event !== this.lastDraggedEvent)\n    ) {\n      this.eventTimesChanged.emit({\n        type: CalendarEventTimesChangedEventType.Drop,\n        event: dropEvent.dropData.event,\n        newStart: date,\n        allDay,\n      });\n    }\n    this.lastDraggedEvent = null;\n  }\n\n  /**\n   * @hidden\n   */\n  dragEnter(type: 'allDay' | 'time') {\n    this.eventDragEnterByType[type]++;\n  }\n\n  /**\n   * @hidden\n   */\n  dragLeave(type: 'allDay' | 'time') {\n    this.eventDragEnterByType[type]--;\n  }\n\n  /**\n   * @hidden\n   */\n  dragStarted(\n    eventsContainer: HTMLElement,\n    event: HTMLElement,\n    dayEvent?: MCWeekViewTimeEvent\n  ): void {\n    this.dayColumnWidth = this.getDayColumnWidth(eventsContainer);\n    const dragHelper: CalendarDragHelper = new CalendarDragHelper(\n      eventsContainer,\n      event\n    );\n    this.validateDrag = ({ x, y, transform }) =>\n      this.allDayEventResizes.size === 0 &&\n      this.timeEventResizes.size === 0 &&\n      dragHelper.validateDrag({\n        x,\n        y,\n        snapDraggedEvents: this.snapDraggedEvents,\n        dragAlreadyMoved: this.dragAlreadyMoved,\n        transform,\n      });\n    this.dragActive = true;\n    this.dragAlreadyMoved = false;\n    this.lastDraggedEvent = null;\n    this.eventDragEnterByType = {\n      allDay: 0,\n      time: 0,\n    };\n    if (!this.snapDraggedEvents && dayEvent) {\n      this.view.hourColumns.forEach((column) => {\n        const linkedEvent = column.events.find(\n          (columnEvent) =>\n            columnEvent.event === dayEvent.event && columnEvent !== dayEvent\n        );\n        // hide any linked events while dragging\n        if (linkedEvent) {\n          linkedEvent.width = 0;\n          linkedEvent.height = 0;\n        }\n      });\n    }\n    this.cdr.markForCheck();\n  }\n\n  /**\n   * @hidden\n   */\n  dragMove(dayEvent: MCWeekViewTimeEvent, dragEvent: DragMoveEvent) {\n    const newEventTimes = this.getDragMovedEventTimes(\n      dayEvent,\n      dragEvent,\n      this.dayColumnWidth,\n      true\n    );\n    const originalEvent = dayEvent.event;\n    const adjustedEvent = { ...originalEvent, ...newEventTimes };\n    const tempEvents = this.events.map((event) => {\n      if (event === originalEvent) {\n        return adjustedEvent;\n      }\n      return event;\n    });\n    this.restoreOriginalEvents(\n      tempEvents,\n      new Map([[adjustedEvent, originalEvent]]),\n      this.snapDraggedEvents\n    );\n    this.dragAlreadyMoved = true;\n  }\n\n  /**\n   * @hidden\n   */\n  allDayEventDragMove() {\n    this.dragAlreadyMoved = true;\n  }\n\n  /**\n   * @hidden\n   */\n  dragEnded(\n    weekEvent: MCWeekViewAllDayEvent | MCWeekViewTimeEvent,\n    dragEndEvent: DragEndEvent,\n    dayWidth: number,\n    useY = false\n  ): void {\n    this.view = this.getWeekView(this.events);\n    this.dragActive = false;\n    this.validateDrag = null;\n    const { start, end } = this.getDragMovedEventTimes(\n      weekEvent,\n      dragEndEvent,\n      dayWidth,\n      useY\n    );\n    if (\n      (this.snapDraggedEvents ||\n        this.eventDragEnterByType[useY ? 'time' : 'allDay'] > 0) &&\n      isDraggedWithinPeriod(start, end, this.view.period)\n    ) {\n      this.lastDraggedEvent = weekEvent.event;\n      this.eventTimesChanged.emit({\n        newStart: start,\n        newEnd: end,\n        event: weekEvent.event,\n        type: CalendarEventTimesChangedEventType.Drag,\n        allDay: !useY,\n      });\n    }\n  }\n\n  protected refreshHeader(): void {\n    this.days = this.utils.getWeekViewHeader({\n      viewDate: this.viewDate,\n      weekStartsOn: this.weekStartsOn,\n      excluded: this.excludeDays,\n      weekendDays: this.weekendDays,\n      ...getWeekViewPeriod(\n        this.dateAdapter,\n        this.viewDate,\n        this.weekStartsOn,\n        this.excludeDays,\n        this.daysInWeek\n      ),\n    });\n  }\n\n  protected refreshBody(): void {\n    this.view = this.getWeekView(this.events);\n  }\n\n  protected refreshAll(): void {\n    this.refreshHeader();\n    this.refreshBody();\n    this.emitBeforeViewRender();\n  }\n\n  protected emitBeforeViewRender(): void {\n    if (this.days && this.view) {\n      this.beforeViewRender.emit({\n        header: this.days,\n        ...this.view,\n      });\n    }\n  }\n\n  protected getWeekView(events: MCEvent[]) {\n    return this.utils.getWeekView({\n      events,\n      viewDate: this.viewDate,\n      weekStartsOn: this.weekStartsOn,\n      excluded: this.excludeDays,\n      precision: this.precision,\n      absolutePositionedEvents: true,\n      hourSegments: this.hourSegments,\n      dayStart: {\n        hour: this.dayStartHour,\n        minute: this.dayStartMinute,\n      },\n      dayEnd: {\n        hour: this.dayEndHour,\n        minute: this.dayEndMinute,\n      },\n      segmentHeight: this.hourSegmentHeight,\n      weekendDays: this.weekendDays,\n      ...getWeekViewPeriod(\n        this.dateAdapter,\n        this.viewDate,\n        this.weekStartsOn,\n        this.excludeDays,\n        this.daysInWeek\n      ),\n    });\n  }\n\n  protected getDragMovedEventTimes(\n    weekEvent: MCWeekViewAllDayEvent | MCWeekViewTimeEvent,\n    dragEndEvent: DragEndEvent | DragMoveEvent,\n    dayWidth: number,\n    useY: boolean\n  ) {\n    const daysDragged = roundToNearest(dragEndEvent.x, dayWidth) / dayWidth;\n    const minutesMoved = useY\n      ? getMinutesMoved(\n        dragEndEvent.y,\n        this.hourSegments,\n        this.hourSegmentHeight,\n        this.eventSnapSize\n      )\n      : 0;\n\n    const start = this.dateAdapter.addMinutes(\n      addDaysWithExclusions(\n        this.dateAdapter,\n        weekEvent.event.start,\n        daysDragged,\n        this.excludeDays\n      ),\n      minutesMoved\n    );\n    let end: Date;\n    if (weekEvent.event.end) {\n      end = this.dateAdapter.addMinutes(\n        addDaysWithExclusions(\n          this.dateAdapter,\n          weekEvent.event.end,\n          daysDragged,\n          this.excludeDays\n        ),\n        minutesMoved\n      );\n    }\n\n    return { start, end };\n  }\n\n  protected restoreOriginalEvents(\n    tempEvents: MCEvent[],\n    adjustedEvents: Map<MCEvent, MCEvent>,\n    snapDraggedEvents = true\n  ) {\n    const previousView = this.view;\n    this.view = this.getWeekView(tempEvents);\n    const adjustedEventsArray = tempEvents.filter((event) =>\n      adjustedEvents.has(event)\n    );\n    this.view.hourColumns.forEach((column, columnIndex) => {\n      previousView.hourColumns[columnIndex].hours.forEach((hour, hourIndex) => {\n        hour.segments.forEach((segment, segmentIndex) => {\n          column.hours[hourIndex].segments[segmentIndex].cssClass =\n            segment.cssClass;\n        });\n      });\n\n      adjustedEventsArray.forEach((adjustedEvent) => {\n        const originalEvent = adjustedEvents.get(adjustedEvent);\n        const existingColumnEvent = column.events.find(\n          (columnEvent) => columnEvent.event === adjustedEvent\n        );\n        if (existingColumnEvent) {\n          // restore the original event so trackBy kicks in and the dom isn't changed\n          existingColumnEvent.event = originalEvent;\n          existingColumnEvent['tempEvent'] = adjustedEvent;\n          if (!snapDraggedEvents) {\n            existingColumnEvent.height = 0;\n            existingColumnEvent.width = 0;\n          }\n        } else {\n          // add a dummy event to the drop so if the event was removed from the original column the drag doesn't end early\n          const event = {\n            event: originalEvent,\n            left: 0,\n            top: 0,\n            height: 0,\n            width: 0,\n            startsBeforeDay: false,\n            endsAfterDay: false,\n            tempEvent: adjustedEvent,\n          };\n          column.events.push(event);\n        }\n      });\n    });\n    adjustedEvents.clear();\n  }\n\n  protected getTimeEventResizedDates(\n    calendarEvent: MCEvent,\n    resizeEvent: ResizeEvent\n  ) {\n    const minimumEventHeight = getMinimumEventHeightInMinutes(\n      this.hourSegments,\n      this.hourSegmentHeight\n    );\n    const newEventDates = {\n      start: calendarEvent.start,\n      end: getDefaultEventEnd(\n        this.dateAdapter,\n        calendarEvent,\n        minimumEventHeight\n      ),\n    };\n    const { end, ...eventWithoutEnd } = calendarEvent;\n    const smallestResizes = {\n      start: this.dateAdapter.addMinutes(\n        newEventDates.end,\n        minimumEventHeight * -1\n      ),\n      end: getDefaultEventEnd(\n        this.dateAdapter,\n        eventWithoutEnd,\n        minimumEventHeight\n      ),\n    };\n\n    if (typeof resizeEvent.edges.left !== 'undefined') {\n      const daysDiff = Math.round(\n        +resizeEvent.edges.left / this.dayColumnWidth\n      );\n      const newStart = addDaysWithExclusions(\n        this.dateAdapter,\n        newEventDates.start,\n        daysDiff,\n        this.excludeDays\n      );\n      if (newStart < smallestResizes.start) {\n        newEventDates.start = newStart;\n      } else {\n        newEventDates.start = smallestResizes.start;\n      }\n    } else if (typeof resizeEvent.edges.right !== 'undefined') {\n      const daysDiff = Math.round(\n        +resizeEvent.edges.right / this.dayColumnWidth\n      );\n      const newEnd = addDaysWithExclusions(\n        this.dateAdapter,\n        newEventDates.end,\n        daysDiff,\n        this.excludeDays\n      );\n      if (newEnd > smallestResizes.end) {\n        newEventDates.end = newEnd;\n      } else {\n        newEventDates.end = smallestResizes.end;\n      }\n    }\n\n    if (typeof resizeEvent.edges.top !== 'undefined') {\n      const minutesMoved = getMinutesMoved(\n        resizeEvent.edges.top as number,\n        this.hourSegments,\n        this.hourSegmentHeight,\n        this.eventSnapSize\n      );\n      const newStart = this.dateAdapter.addMinutes(\n        newEventDates.start,\n        minutesMoved\n      );\n      if (newStart < smallestResizes.start) {\n        newEventDates.start = newStart;\n      } else {\n        newEventDates.start = smallestResizes.start;\n      }\n    } else if (typeof resizeEvent.edges.bottom !== 'undefined') {\n      const minutesMoved = getMinutesMoved(\n        resizeEvent.edges.bottom as number,\n        this.hourSegments,\n        this.hourSegmentHeight,\n        this.eventSnapSize\n      );\n      const newEnd = this.dateAdapter.addMinutes(\n        newEventDates.end,\n        minutesMoved\n      );\n      if (newEnd > smallestResizes.end) {\n        newEventDates.end = newEnd;\n      } else {\n        newEventDates.end = smallestResizes.end;\n      }\n    }\n\n    return newEventDates;\n  }\n\n  protected resizeStarted(eventsContainer: HTMLElement, minWidth?: number) {\n    this.dayColumnWidth = this.getDayColumnWidth(eventsContainer);\n    const resizeHelper: CalendarResizeHelper = new CalendarResizeHelper(\n      eventsContainer,\n      minWidth\n    );\n    this.validateResize = ({ rectangle }) =>\n      resizeHelper.validateResize({ rectangle });\n    this.cdr.markForCheck();\n  }\n}\n","import {\n  Component,\n  EventEmitter,\n  Input,\n\n\n  OnChanges, Output\n} from '@angular/core';\nimport { MCEvent } from '../../../utilities/mc-calendar-utils';\n\n@Component({\n  selector: 'mwl-mc-quicklinks',\n  templateUrl: './quicklinks.component.html',\n  styleUrls: ['./quicklinks.component.scss'],\n})\nexport class QuicklinksComponent implements OnChanges {\n  @Input()\n  event: MCEvent;\n\n  @Output()\n  quicklinkClick: EventEmitter<string> = new EventEmitter<string>();\n\n  isLive = false;\n\n  constructor() { }\n\n  ngOnChanges(): void {\n    setInterval(() => {\n      this.isLive =\n        this.event.videoURL &&\n        new Date() >= this.event.start &&\n        new Date() < this.event.end;\n    }, 60);\n  }\n\n  navigateToLink(link: string) {\n    this.quicklinkClick.emit(link);\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { DragAndDropModule } from 'angular-draggable-droppable';\nimport { ResizableModule } from 'angular-resizable-element';\nimport { CalendarCommonModule } from '../common/calendar-common.module';\nimport { CalendarWeekViewCurrentTimeMarkerComponent } from './calendar-week-view-current-time-marker.component';\nimport { CalendarWeekViewEventComponent } from './calendar-week-view-event.component';\nimport { CalendarWeekViewHeaderComponent } from './calendar-week-view-header.component';\nimport { CalendarWeekViewHourSegmentComponent } from './calendar-week-view-hour-segment.component';\nimport { CalendarWeekViewComponent } from './calendar-week-view.component';\nimport { QuicklinksComponent } from './quicklinks/quicklinks.component';\n\nexport {\n  MCGetWeekViewArgs as CalendarGetWeekViewArgs,\n  MCWeekViewAllDayEvent as CalendarWeekViewAllDayEvent,\n  MCWeekViewAllDayEventRow as CalendarWeekViewAllDayEventRow\n} from '../../utilities/mc-calendar-utils';\nexport { getWeekViewPeriod } from '../common/util';\nexport { CalendarWeekViewBeforeRenderEvent, CalendarWeekViewComponent } from './calendar-week-view.component';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ResizableModule,\n    DragAndDropModule,\n    CalendarCommonModule\n  ],\n  declarations: [\n    CalendarWeekViewComponent,\n    CalendarWeekViewHeaderComponent,\n    CalendarWeekViewEventComponent,\n    CalendarWeekViewHourSegmentComponent,\n    CalendarWeekViewCurrentTimeMarkerComponent,\n    QuicklinksComponent\n  ],\n  exports: [\n    ResizableModule,\n    DragAndDropModule,\n    CalendarWeekViewComponent,\n    CalendarWeekViewHeaderComponent,\n    CalendarWeekViewEventComponent,\n    CalendarWeekViewHourSegmentComponent,\n    CalendarWeekViewCurrentTimeMarkerComponent,\n    QuicklinksComponent\n  ],\n})\nexport class CalendarWeekModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { CalendarDayViewComponent } from './calendar-day-view.component';\nimport { CalendarCommonModule } from '../common/calendar-common.module';\nimport { CalendarWeekModule } from '../week/calendar-week.module';\n\nexport {\n  CalendarDayViewComponent,\n  CalendarDayViewBeforeRenderEvent,\n} from './calendar-day-view.component';\n\n@NgModule({\n  imports: [CommonModule, CalendarCommonModule, CalendarWeekModule],\n  declarations: [CalendarDayViewComponent],\n  exports: [CalendarDayViewComponent],\n})\nexport class CalendarDayModule {}\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  TemplateRef,\n} from '@angular/core';\nimport { isWithinThreshold, trackByEventId } from '../common/util';\nimport { PlacementArray } from 'positioning';\nimport { MCMonthViewDay, MCEvent } from '../../utilities/mc-calendar-utils';\n\n@Component({\n  selector: 'mwl-calendar-month-cell',\n  template: `\n    <ng-template\n      #defaultTemplate\n      let-day=\"day\"\n      let-openDay=\"openDay\"\n      let-locale=\"locale\"\n      let-tooltipPlacement=\"tooltipPlacement\"\n      let-highlightDay=\"highlightDay\"\n      let-unhighlightDay=\"unhighlightDay\"\n      let-eventClicked=\"eventClicked\"\n      let-tooltipTemplate=\"tooltipTemplate\"\n      let-tooltipAppendToBody=\"tooltipAppendToBody\"\n      let-tooltipDelay=\"tooltipDelay\"\n      let-trackByEventId=\"trackByEventId\"\n      let-validateDrag=\"validateDrag\"\n    >\n      <div\n        class=\"cal-cell-top\"\n        [attr.aria-label]=\"\n          { day: day, locale: locale } | calendarA11y: 'monthCell'\n        \"\n      >\n        <span aria-hidden=\"true\">\n          <span class=\"cal-day-badge\" *ngIf=\"day.badgeTotal > 0\">{{\n            day.badgeTotal\n          }}</span>\n          <span class=\"cal-day-number\">{{\n            day.date | calendarDate: 'monthViewDayNumber':locale\n          }}</span>\n        </span>\n      </div>\n      <div class=\"cal-events\" *ngIf=\"day.events.length > 0\">\n        <div\n          class=\"cal-event\"\n          *ngFor=\"let event of day.events; trackBy: trackByEventId\"\n          [ngStyle]=\"{ backgroundColor: event.color?.primary }\"\n          [ngClass]=\"event?.cssClass\"\n          (mouseenter)=\"highlightDay.emit({ event: event })\"\n          (mouseleave)=\"unhighlightDay.emit({ event: event })\"\n          [mwlCalendarTooltip]=\"\n            event.title | calendarEventTitle: 'monthTooltip':event\n          \"\n          [tooltipPlacement]=\"tooltipPlacement\"\n          [tooltipEvent]=\"event\"\n          [tooltipTemplate]=\"tooltipTemplate\"\n          [tooltipAppendToBody]=\"tooltipAppendToBody\"\n          [tooltipDelay]=\"tooltipDelay\"\n          mwlDraggable\n          [class.cal-draggable]=\"event.draggable\"\n          dragActiveClass=\"cal-drag-active\"\n          [dropData]=\"{ event: event, draggedFrom: day }\"\n          [dragAxis]=\"{ x: event.draggable, y: event.draggable }\"\n          [validateDrag]=\"validateDrag\"\n          [touchStartLongPress]=\"{ delay: 300, delta: 30 }\"\n          (mwlClick)=\"eventClicked.emit({ event: event, sourceEvent: $event })\"\n          [attr.aria-hidden]=\"{} | calendarA11y: 'hideMonthCellEvents'\"\n        ></div>\n      </div>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]=\"customTemplate || defaultTemplate\"\n      [ngTemplateOutletContext]=\"{\n        day: day,\n        openDay: openDay,\n        locale: locale,\n        tooltipPlacement: tooltipPlacement,\n        highlightDay: highlightDay,\n        unhighlightDay: unhighlightDay,\n        eventClicked: eventClicked,\n        tooltipTemplate: tooltipTemplate,\n        tooltipAppendToBody: tooltipAppendToBody,\n        tooltipDelay: tooltipDelay,\n        trackByEventId: trackByEventId,\n        validateDrag: validateDrag\n      }\"\n    >\n    </ng-template>\n  `,\n  host: {\n    class: 'cal-cell cal-day-cell',\n    '[class.cal-past]': 'day.isPast',\n    '[class.cal-today]': 'day.isToday',\n    '[class.cal-future]': 'day.isFuture',\n    '[class.cal-weekend]': 'day.isWeekend',\n    '[class.cal-in-month]': 'day.inMonth',\n    '[class.cal-out-month]': '!day.inMonth',\n    '[class.cal-has-events]': 'day.events.length > 0',\n    '[class.cal-open]': 'day === openDay',\n    '[class.cal-event-highlight]': '!!day.backgroundColor',\n  },\n})\nexport class CalendarMonthCellComponent {\n  @Input() day: MCMonthViewDay;\n\n  @Input() openDay: MCMonthViewDay;\n\n  @Input() locale: string;\n\n  @Input() tooltipPlacement: PlacementArray;\n\n  @Input() tooltipAppendToBody: boolean;\n\n  @Input() customTemplate: TemplateRef<any>;\n\n  @Input() tooltipTemplate: TemplateRef<any>;\n\n  @Input() tooltipDelay: number | null;\n\n  @Output() highlightDay: EventEmitter<any> = new EventEmitter();\n\n  @Output() unhighlightDay: EventEmitter<any> = new EventEmitter();\n\n  @Output() eventClicked = new EventEmitter<{\n    event: MCEvent;\n    sourceEvent: MouseEvent;\n  }>();\n\n  trackByEventId = trackByEventId;\n\n  validateDrag = isWithinThreshold;\n}\n","import {\n  Component,\n  Input,\n  TemplateRef,\n  EventEmitter,\n  Output,\n} from '@angular/core';\nimport { trackByWeekDayHeaderDate } from '../common/util';\nimport { MCWeekDay } from '../../utilities/mc-calendar-utils';\n\n@Component({\n  selector: 'mwl-calendar-month-view-header',\n  template: `\n    <ng-template\n      #defaultTemplate\n      let-days=\"days\"\n      let-locale=\"locale\"\n      let-trackByWeekDayHeaderDate=\"trackByWeekDayHeaderDate\"\n    >\n      <div class=\"cal-cell-row cal-header\" role=\"row\">\n        <div\n          class=\"cal-cell\"\n          *ngFor=\"let day of days; trackBy: trackByWeekDayHeaderDate\"\n          [class.cal-past]=\"day.isPast\"\n          [class.cal-today]=\"day.isToday\"\n          [class.cal-future]=\"day.isFuture\"\n          [class.cal-weekend]=\"day.isWeekend\"\n          (click)=\"\n            columnHeaderClicked.emit({\n              isoDayNumber: day.day,\n              sourceEvent: $event\n            })\n          \"\n          [ngClass]=\"day.cssClass\"\n          tabindex=\"0\"\n          role=\"columnheader\"\n        >\n          {{ day.date | calendarDate: 'monthViewColumnHeader':locale }}\n        </div>\n      </div>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]=\"customTemplate || defaultTemplate\"\n      [ngTemplateOutletContext]=\"{\n        days: days,\n        locale: locale,\n        trackByWeekDayHeaderDate: trackByWeekDayHeaderDate\n      }\"\n    >\n    </ng-template>\n  `,\n})\nexport class CalendarMonthViewHeaderComponent {\n  @Input() days: MCWeekDay[];\n\n  @Input() locale: string;\n\n  @Input() customTemplate: TemplateRef<any>;\n\n  @Output() columnHeaderClicked = new EventEmitter<{\n    isoDayNumber: number;\n    sourceEvent: MouseEvent;\n  }>();\n\n  trackByWeekDayHeaderDate = trackByWeekDayHeaderDate;\n}\n","import {\n  Component,\n  OnChanges,\n  Input,\n  Output,\n  EventEmitter,\n  ChangeDetectorRef,\n  OnInit,\n  OnDestroy,\n  LOCALE_ID,\n  Inject,\n  TemplateRef,\n} from '@angular/core';\nimport { Subject, Subscription } from 'rxjs';\nimport {\n  CalendarEventTimesChangedEvent,\n  CalendarEventTimesChangedEventType,\n} from '../common/calendar-event-times-changed-event.interface';\nimport { CalendarUtils } from '../common/calendar-utils.provider';\nimport { validateEvents } from '../common/util';\nimport { DateAdapter } from '../../date-adapters/date-adapter';\nimport { PlacementArray } from 'positioning';\nimport { MCWeekDay, MCMonthViewDay, MCViewPeriod, MCMonthView, MCEvent } from '../../utilities/mc-calendar-utils';\n\nexport interface CalendarMonthViewBeforeRenderEvent {\n  header: MCWeekDay[];\n  body: MCMonthViewDay[];\n  period: MCViewPeriod;\n}\n\nexport interface CalendarMonthViewEventTimesChangedEvent<\n  EventMetaType = any,\n  DayMetaType = any\n  > extends CalendarEventTimesChangedEvent<EventMetaType> {\n  day: MCMonthViewDay<DayMetaType>;\n}\n\n/**\n * Shows all events on a given month. Example usage:\n *\n * ```typescript\n * <mwl-calendar-month-view\n *  [viewDate]=\"viewDate\"\n *  [events]=\"events\">\n * </mwl-calendar-month-view>\n * ```\n */\n@Component({\n  selector: 'mwl-calendar-month-view',\n  template: `\n    <div class=\"cal-month-view\" role=\"grid\">\n      <mwl-calendar-month-view-header\n        [days]=\"columnHeaders\"\n        [locale]=\"locale\"\n        (columnHeaderClicked)=\"columnHeaderClicked.emit($event)\"\n        [customTemplate]=\"headerTemplate\"\n      >\n      </mwl-calendar-month-view-header>\n      <div class=\"cal-days\">\n        <div\n          *ngFor=\"let rowIndex of view.rowOffsets; trackBy: trackByRowOffset\"\n        >\n          <div class=\"cal-cell-row\">\n            <mwl-calendar-month-cell\n              *ngFor=\"\n                let day of view.days\n                  | slice: rowIndex:rowIndex + view.totalDaysVisibleInWeek;\n                trackBy: trackByDate\n              \"\n              [ngClass]=\"day?.cssClass\"\n              [day]=\"day\"\n              [openDay]=\"openDay\"\n              [locale]=\"locale\"\n              [tooltipPlacement]=\"tooltipPlacement\"\n              [tooltipAppendToBody]=\"tooltipAppendToBody\"\n              [tooltipTemplate]=\"tooltipTemplate\"\n              [tooltipDelay]=\"tooltipDelay\"\n              [customTemplate]=\"cellTemplate\"\n              [ngStyle]=\"{ backgroundColor: day.backgroundColor }\"\n              (mwlClick)=\"dayClicked.emit({ day: day, sourceEvent: $event })\"\n              [clickListenerDisabled]=\"dayClicked.observers.length === 0\"\n              (mwlKeydownEnter)=\"\n                dayClicked.emit({ day: day, sourceEvent: $event })\n              \"\n              (highlightDay)=\"toggleDayHighlight($event.event, true)\"\n              (unhighlightDay)=\"toggleDayHighlight($event.event, false)\"\n              mwlDroppable\n              dragOverClass=\"cal-drag-over\"\n              (drop)=\"\n                eventDropped(\n                  day,\n                  $event.dropData.event,\n                  $event.dropData.draggedFrom\n                )\n              \"\n              (eventClicked)=\"\n                eventClicked.emit({\n                  event: $event.event,\n                  sourceEvent: $event.sourceEvent\n                })\n              \"\n              [attr.tabindex]=\"{} | calendarA11y: 'monthCellTabIndex'\"\n            >\n            </mwl-calendar-month-cell>\n          </div>\n          <mwl-calendar-open-day-events\n            [locale]=\"locale\"\n            [isOpen]=\"openRowIndex === rowIndex\"\n            [events]=\"openDay?.events\"\n            [date]=\"openDay?.date\"\n            [customTemplate]=\"openDayEventsTemplate\"\n            [eventTitleTemplate]=\"eventTitleTemplate\"\n            [eventActionsTemplate]=\"eventActionsTemplate\"\n            (eventClicked)=\"\n              eventClicked.emit({\n                event: $event.event,\n                sourceEvent: $event.sourceEvent\n              })\n            \"\n            mwlDroppable\n            dragOverClass=\"cal-drag-over\"\n            (drop)=\"\n              eventDropped(\n                openDay,\n                $event.dropData.event,\n                $event.dropData.draggedFrom\n              )\n            \"\n          >\n          </mwl-calendar-open-day-events>\n        </div>\n      </div>\n    </div>\n  `,\n})\nexport class CalendarMonthViewComponent\n  implements OnChanges, OnInit, OnDestroy {\n  /**\n   * The current view date\n   */\n  @Input() viewDate: Date;\n\n  /**\n   * An array of events to display on view.\n   * The schema is available here: https://github.com/mattlewis92/calendar-utils/blob/c51689985f59a271940e30bc4e2c4e1fee3fcb5c/src/calendarUtils.ts#L49-L63\n   */\n  @Input() events: MCEvent[] = [];\n\n  /**\n   * An array of day indexes (0 = sunday, 1 = monday etc) that will be hidden on the view\n   */\n  @Input() excludeDays: number[] = [];\n\n  /**\n   * Whether the events list for the day of the `viewDate` option is visible or not\n   */\n  @Input() activeDayIsOpen: boolean = false;\n\n  /**\n   * If set will be used to determine the day that should be open. If not set, the `viewDate` is used\n   */\n  @Input() activeDay: Date;\n\n  /**\n   * An observable that when emitted on will re-render the current view\n   */\n  @Input() refresh: Subject<any>;\n\n  /**\n   * The locale used to format dates\n   */\n  @Input() locale: string;\n\n  /**\n   * The placement of the event tooltip\n   */\n  @Input() tooltipPlacement: PlacementArray = 'auto';\n\n  /**\n   * A custom template to use for the event tooltips\n   */\n  @Input() tooltipTemplate: TemplateRef<any>;\n\n  /**\n   * Whether to append tooltips to the body or next to the trigger element\n   */\n  @Input() tooltipAppendToBody: boolean = true;\n\n  /**\n   * The delay in milliseconds before the tooltip should be displayed. If not provided the tooltip\n   * will be displayed immediately.\n   */\n  @Input() tooltipDelay: number | null = null;\n\n  /**\n   * The start number of the week\n   */\n  @Input() weekStartsOn: number;\n\n  /**\n   * A custom template to use to replace the header\n   */\n  @Input() headerTemplate: TemplateRef<any>;\n\n  /**\n   * A custom template to use to replace the day cell\n   */\n  @Input() cellTemplate: TemplateRef<any>;\n\n  /**\n   * A custom template to use for the slide down box of events for the active day\n   */\n  @Input() openDayEventsTemplate: TemplateRef<any>;\n\n  /**\n   * A custom template to use for event titles\n   */\n  @Input() eventTitleTemplate: TemplateRef<any>;\n\n  /**\n   * A custom template to use for event actions\n   */\n  @Input() eventActionsTemplate: TemplateRef<any>;\n\n  /**\n   * An array of day indexes (0 = sunday, 1 = monday etc) that indicate which days are weekends\n   */\n  @Input() weekendDays: number[];\n\n  /**\n   * An output that will be called before the view is rendered for the current month.\n   * If you add the `cssClass` property to a day in the body it will add that class to the cell element in the template\n   */\n  @Output() beforeViewRender = new EventEmitter<\n    CalendarMonthViewBeforeRenderEvent\n  >();\n\n  /**\n   * Called when the day cell is clicked\n   */\n  @Output() dayClicked = new EventEmitter<{\n    day: MCMonthViewDay;\n    sourceEvent: MouseEvent | any;\n  }>();\n\n  /**\n   * Called when the event title is clicked\n   */\n  @Output() eventClicked = new EventEmitter<{\n    event: MCEvent;\n    sourceEvent: MouseEvent | any;\n  }>();\n\n  /**\n   * Called when a header week day is clicked. Returns ISO day number.\n   */\n  @Output() columnHeaderClicked = new EventEmitter<{\n    isoDayNumber: number;\n    sourceEvent: MouseEvent | any;\n  }>();\n\n  /**\n   * Called when an event is dragged and dropped\n   */\n  @Output()\n  eventTimesChanged = new EventEmitter<\n    CalendarMonthViewEventTimesChangedEvent\n  >();\n\n  /**\n   * @hidden\n   */\n  columnHeaders: MCWeekDay[];\n\n  /**\n   * @hidden\n   */\n  view: MCMonthView;\n\n  /**\n   * @hidden\n   */\n  openRowIndex: number;\n\n  /**\n   * @hidden\n   */\n  openDay: MCMonthViewDay;\n\n  /**\n   * @hidden\n   */\n  refreshSubscription: Subscription;\n\n  /**\n   * @hidden\n   */\n  constructor(\n    protected cdr: ChangeDetectorRef,\n    protected utils: CalendarUtils,\n    @Inject(LOCALE_ID) locale: string,\n    protected dateAdapter: DateAdapter\n  ) {\n    this.locale = locale;\n  }\n\n  /**\n   * @hidden\n   */\n  trackByRowOffset = (index: number, offset: number) =>\n    this.view.days\n      .slice(offset, this.view.totalDaysVisibleInWeek)\n      .map((day) => day.date.toISOString())\n      .join('-');\n\n  /**\n   * @hidden\n   */\n  trackByDate = (index: number, day: MCMonthViewDay) => day.date.toISOString();\n\n  /**\n   * @hidden\n   */\n  ngOnInit(): void {\n    if (this.refresh) {\n      this.refreshSubscription = this.refresh.subscribe(() => {\n        this.refreshAll();\n        this.cdr.markForCheck();\n      });\n    }\n  }\n\n  /**\n   * @hidden\n   */\n  ngOnChanges(changes: any): void {\n    const refreshHeader =\n      changes.viewDate || changes.excludeDays || changes.weekendDays;\n    const refreshBody =\n      changes.viewDate ||\n      changes.events ||\n      changes.excludeDays ||\n      changes.weekendDays;\n\n    if (refreshHeader) {\n      this.refreshHeader();\n    }\n\n    if (changes.events) {\n      validateEvents(this.events);\n    }\n\n    if (refreshBody) {\n      this.refreshBody();\n    }\n\n    if (refreshHeader || refreshBody) {\n      this.emitBeforeViewRender();\n    }\n\n    if (\n      changes.activeDayIsOpen ||\n      changes.viewDate ||\n      changes.events ||\n      changes.excludeDays ||\n      changes.activeDay\n    ) {\n      this.checkActiveDayIsOpen();\n    }\n  }\n\n  /**\n   * @hidden\n   */\n  ngOnDestroy(): void {\n    if (this.refreshSubscription) {\n      this.refreshSubscription.unsubscribe();\n    }\n  }\n\n  /**\n   * @hidden\n   */\n  toggleDayHighlight(event: MCEvent, isHighlighted: boolean): void {\n    this.view.days.forEach((day) => {\n      if (isHighlighted && day.events.indexOf(event) > -1) {\n        day.backgroundColor =\n          (event.color && event.color.secondary) || '#D1E8FF';\n      } else {\n        delete day.backgroundColor;\n      }\n    });\n  }\n\n  /**\n   * @hidden\n   */\n  eventDropped(\n    droppedOn: MCMonthViewDay,\n    event: MCEvent,\n    draggedFrom?: MCMonthViewDay\n  ): void {\n    if (droppedOn !== draggedFrom) {\n      const year: number = this.dateAdapter.getYear(droppedOn.date);\n      const month: number = this.dateAdapter.getMonth(droppedOn.date);\n      const date: number = this.dateAdapter.getDate(droppedOn.date);\n      const newStart: Date = this.dateAdapter.setDate(\n        this.dateAdapter.setMonth(\n          this.dateAdapter.setYear(event.start, year),\n          month\n        ),\n        date\n      );\n      let newEnd: Date;\n      if (event.end) {\n        const secondsDiff: number = this.dateAdapter.differenceInSeconds(\n          newStart,\n          event.start\n        );\n        newEnd = this.dateAdapter.addSeconds(event.end, secondsDiff);\n      }\n      this.eventTimesChanged.emit({\n        event,\n        newStart,\n        newEnd,\n        day: droppedOn,\n        type: CalendarEventTimesChangedEventType.Drop,\n      });\n    }\n  }\n\n  protected refreshHeader(): void {\n    this.columnHeaders = this.utils.getWeekViewHeader({\n      viewDate: this.viewDate,\n      weekStartsOn: this.weekStartsOn,\n      excluded: this.excludeDays,\n      weekendDays: this.weekendDays,\n    });\n  }\n\n  protected refreshBody(): void {\n    this.view = this.utils.getMonthView({\n      events: this.events,\n      viewDate: this.viewDate,\n      weekStartsOn: this.weekStartsOn,\n      excluded: this.excludeDays,\n      weekendDays: this.weekendDays,\n    });\n  }\n\n  protected checkActiveDayIsOpen(): void {\n    if (this.activeDayIsOpen === true) {\n      const activeDay = this.activeDay || this.viewDate;\n      this.openDay = this.view.days.find((day) =>\n        this.dateAdapter.isSameDay(day.date, activeDay)\n      );\n      const index: number = this.view.days.indexOf(this.openDay);\n      this.openRowIndex =\n        Math.floor(index / this.view.totalDaysVisibleInWeek) *\n        this.view.totalDaysVisibleInWeek;\n    } else {\n      this.openRowIndex = null;\n      this.openDay = null;\n    }\n  }\n\n  protected refreshAll(): void {\n    this.refreshHeader();\n    this.refreshBody();\n    this.emitBeforeViewRender();\n    this.checkActiveDayIsOpen();\n  }\n\n  protected emitBeforeViewRender(): void {\n    if (this.columnHeaders && this.view) {\n      this.beforeViewRender.emit({\n        header: this.columnHeaders,\n        body: this.view.days,\n        period: this.view.period,\n      });\n    }\n  }\n}\n","import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  TemplateRef,\n} from '@angular/core';\nimport {\n  trigger,\n  style,\n  state,\n  transition,\n  animate,\n  AnimationTriggerMetadata,\n} from '@angular/animations';\nimport { isWithinThreshold, trackByEventId } from '../common/util';\nimport { MCEvent } from '../../utilities/mc-calendar-utils';\n\nexport const collapseAnimation: AnimationTriggerMetadata = trigger('collapse', [\n  state(\n    'void',\n    style({\n      height: 0,\n      overflow: 'hidden',\n      'padding-top': 0,\n      'padding-bottom': 0,\n    })\n  ),\n  state(\n    '*',\n    style({\n      height: '*',\n      overflow: 'hidden',\n      'padding-top': '*',\n      'padding-bottom': '*',\n    })\n  ),\n  transition('* => void', animate('150ms ease-out')),\n  transition('void => *', animate('150ms ease-in')),\n]);\n\n@Component({\n  selector: 'mwl-calendar-open-day-events',\n  template: `\n    <ng-template\n      #defaultTemplate\n      let-events=\"events\"\n      let-eventClicked=\"eventClicked\"\n      let-isOpen=\"isOpen\"\n      let-trackByEventId=\"trackByEventId\"\n      let-validateDrag=\"validateDrag\"\n    >\n      <div\n        class=\"cal-open-day-events\"\n        [@collapse]\n        *ngIf=\"isOpen\"\n        role=\"application\"\n      >\n        <span\n          tabindex=\"-1\"\n          role=\"alert\"\n          [attr.aria-label]=\"\n            { date: date, locale: locale } | calendarA11y: 'openDayEventsAlert'\n          \"\n        ></span>\n        <span\n          tabindex=\"0\"\n          role=\"landmark\"\n          [attr.aria-label]=\"\n            { date: date, locale: locale }\n              | calendarA11y: 'openDayEventsLandmark'\n          \"\n        ></span>\n        <div\n          *ngFor=\"let event of events; trackBy: trackByEventId\"\n          [ngClass]=\"event?.cssClass\"\n          mwlDraggable\n          [class.cal-draggable]=\"event.draggable\"\n          dragActiveClass=\"cal-drag-active\"\n          [dropData]=\"{ event: event }\"\n          [dragAxis]=\"{ x: event.draggable, y: event.draggable }\"\n          [validateDrag]=\"validateDrag\"\n          [touchStartLongPress]=\"{ delay: 300, delta: 30 }\"\n        >\n          <span\n            class=\"cal-event\"\n            [ngStyle]=\"{ backgroundColor: event.color?.primary }\"\n          >\n          </span>\n          &ngsp;\n          <mwl-calendar-event-title\n            [event]=\"event\"\n            [customTemplate]=\"eventTitleTemplate\"\n            view=\"month\"\n            (mwlClick)=\"\n              eventClicked.emit({ event: event, sourceEvent: $event })\n            \"\n            (mwlKeydownEnter)=\"\n              eventClicked.emit({ event: event, sourceEvent: $event })\n            \"\n            tabindex=\"0\"\n            [attr.aria-label]=\"\n              { event: event, locale: locale }\n                | calendarA11y: 'eventDescription'\n            \"\n          >\n          </mwl-calendar-event-title>\n          &ngsp;\n          <mwl-calendar-event-actions\n            [event]=\"event\"\n            [customTemplate]=\"eventActionsTemplate\"\n          >\n          </mwl-calendar-event-actions>\n        </div>\n      </div>\n    </ng-template>\n    <ng-template\n      [ngTemplateOutlet]=\"customTemplate || defaultTemplate\"\n      [ngTemplateOutletContext]=\"{\n        events: events,\n        eventClicked: eventClicked,\n        isOpen: isOpen,\n        trackByEventId: trackByEventId,\n        validateDrag: validateDrag\n      }\"\n    >\n    </ng-template>\n  `,\n  animations: [collapseAnimation],\n})\nexport class CalendarOpenDayEventsComponent {\n  @Input() locale: string;\n\n  @Input() isOpen: boolean = false;\n\n  @Input() events: MCEvent[];\n\n  @Input() customTemplate: TemplateRef<any>;\n\n  @Input() eventTitleTemplate: TemplateRef<any>;\n\n  @Input() eventActionsTemplate: TemplateRef<any>;\n\n  @Input() date: Date;\n\n  @Output() eventClicked = new EventEmitter<{\n    event: MCEvent;\n    sourceEvent: MouseEvent | any;\n  }>();\n\n  trackByEventId = trackByEventId;\n\n  validateDrag = isWithinThreshold;\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { DragAndDropModule } from 'angular-draggable-droppable';\nimport { CalendarCommonModule } from '../common/calendar-common.module';\nimport { CalendarMonthCellComponent } from './calendar-month-cell.component';\nimport { CalendarMonthViewHeaderComponent } from './calendar-month-view-header.component';\nimport { CalendarMonthViewComponent } from './calendar-month-view.component';\nimport { CalendarOpenDayEventsComponent } from './calendar-open-day-events.component';\n\nexport { MCMonthViewDay as CalendarMonthViewDay } from '../../utilities/mc-calendar-utils';\nexport {\n  CalendarMonthViewBeforeRenderEvent,\n  CalendarMonthViewComponent,\n  CalendarMonthViewEventTimesChangedEvent\n} from './calendar-month-view.component';\nexport { collapseAnimation } from './calendar-open-day-events.component';\n\n@NgModule({\n  imports: [CommonModule, DragAndDropModule, CalendarCommonModule],\n  declarations: [\n    CalendarMonthViewComponent,\n    CalendarMonthCellComponent,\n    CalendarOpenDayEventsComponent,\n    CalendarMonthViewHeaderComponent,\n  ],\n  exports: [\n    DragAndDropModule,\n    CalendarMonthViewComponent,\n    CalendarMonthCellComponent,\n    CalendarOpenDayEventsComponent,\n    CalendarMonthViewHeaderComponent,\n  ],\n})\nexport class CalendarMonthModule { }\n","import { ModuleWithProviders, NgModule, Provider } from '@angular/core';\nimport {\n  CalendarA11y,\n  CalendarCommonModule,\n  CalendarDateFormatter,\n  CalendarEventTitleFormatter,\n  CalendarModuleConfig,\n} from './common/calendar-common.module';\nimport { CalendarUtils } from './common/calendar-utils.provider';\nimport { CalendarDayModule } from './day/calendar-day.module';\nimport { CalendarMonthModule } from './month/calendar-month.module';\nimport { CalendarWeekModule } from './week/calendar-week.module';\n\nexport * from './common/calendar-common.module';\nexport * from './day/calendar-day.module';\nexport * from './month/calendar-month.module';\nexport * from './week/calendar-week.module';\n\n/**\n * The main module of this library. Example usage:\n *\n * ```typescript\n * import { CalenderModule } from 'angular-calendar';\n *\n * @NgModule({\n *   imports: [\n *     CalenderModule.forRoot()\n *   ]\n * })\n * class MyModule {}\n * ```\n *\n */\n@NgModule({\n  imports: [\n    CalendarCommonModule,\n    CalendarMonthModule,\n    CalendarWeekModule,\n    CalendarDayModule,\n  ],\n  exports: [\n    CalendarCommonModule,\n    CalendarMonthModule,\n    CalendarWeekModule,\n    CalendarDayModule,\n  ],\n})\nexport class CalendarModule {\n  static forRoot(\n    dateAdapter: Provider,\n    config: CalendarModuleConfig = {}\n  ): ModuleWithProviders<CalendarModule> {\n    return {\n      ngModule: CalendarModule,\n      providers: [\n        dateAdapter,\n        config.eventTitleFormatter || CalendarEventTitleFormatter,\n        config.dateFormatter || CalendarDateFormatter,\n        config.utils || CalendarUtils,\n        config.a11y || CalendarA11y,\n      ],\n    };\n  }\n}\n"]}